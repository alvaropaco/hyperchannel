"use strict"
define("hyperchannel/app",["exports","hyperchannel/resolver","ember-load-initializers","hyperchannel/config/environment"],function(e,n,t,a){Object.defineProperty(e,"__esModule",{value:!0})
var s=Ember.Application.extend({modulePrefix:a.default.modulePrefix,podModulePrefix:a.default.podModulePrefix,Resolver:n.default});(0,t.default)(s,a.default.modulePrefix),e.default=s}),define("hyperchannel/components/-lf-get-outlet-state",["exports","liquid-fire/components/-lf-get-outlet-state"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/components/app-container/component",["exports","ember-gestures/mixins/recognizers"],function(e,n){function t(e,n){return n.id===e||Ember.$(n).parents("#"+e).length>0}Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend(n.default,{tagName:"div",classNames:["app-container"],classNameBindings:["showGlobalMenu:global-menu-open","showChannelMenu:channel-menu-open"],recognizers:"swipeleft swiperight tap",swipeLeft:function(){this.set("showGlobalMenu",!1)},swipeRight:function(){this.set("showGlobalMenu",!0)},tap:function(e){!this.get("showGlobalMenu")||t("channel-header",e.target)||t("global",e.target)||this.set("showGlobalMenu",!1)}})}),define("hyperchannel/components/app-container/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"A2LoAbSQ",block:'{"symbols":["&default"],"statements":[[11,1],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hyperchannel/components/app-container/template.hbs"}})}),define("hyperchannel/components/channel-container/component",["exports"],function(e){function n(){Ember.$("#channel-content").animate({scrollTop:Ember.$("#channel-content ul").height()},"500")}Object.defineProperty(e,"__esModule",{value:!0})
var t=Ember.Component,a=Ember.observer,s=Ember.run.scheduleOnce,r=Ember.inject.service
e.default=t.extend({elementId:"channel",newMessage:"",channel:null,scrollingDisabled:!1,coms:r(),messagesUpdated:a("channel.messages.[]",function(){this.get("scrollingDisabled")||s("afterRender",n)}),didInsertElement:function(){this._super.apply(this,arguments),s("afterRender",n),s("afterRender",function(){Hammer(document.getElementById("channel-content")).on("swipe",function(){})})},actions:{processMessageOrCommand:function(){"/"===this.get("newMessage").substr(0,1)?this.onCommand(this.get("newMessage")):this.onMessage(this.get("newMessage"))},menu:function(e,n){this.sendAction("menu",e,n)},loadPreviousMessages:function(){var e=this
this.set("scrollingDisabled",!0),this.get("coms").loadLastMessages(this.get("channel.space"),this.get("channel"),this.get("channel.searchedPreviousLogsUntilDate")).catch(function(){}).finally(function(){e.set("scrollingDisabled",!1)})}}})}),define("hyperchannel/components/channel-container/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"XEpIXPR3",block:'{"symbols":["username","message"],"statements":[[6,"main"],[7],[0,"\\n  "],[6,"header"],[9,"id","channel-header"],[9,"onClick",""],[9,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[3,"action",[[19,0,[]],"menu","global","toggle"]],[7],[0,"\\n    "],[6,"h2"],[9,"id","channel-name"],[10,"class",[26,[[25,"if",[[19,0,["channel","connected"]],"connected","disconnected"],null]]]],[7],[1,[20,["channel","name"]],false],[8],[0,"\\n    "],[6,"p"],[9,"id","channel-title"],[7],[1,[20,["channel","formattedTopic"]],false],[8],[0,"\\n    "],[6,"nav"],[7],[0,"\\n      "],[6,"a"],[9,"href","#"],[9,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[7],[6,"i"],[9,"class","icon-megaphone"],[7],[8],[8],[6,"a"],[9,"href","#"],[9,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[7],[6,"i"],[9,"class","icon-mute"],[7],[8],[8],[0,"\\n    "],[8],[0,"\\n  "],[8],[0,"\\n\\n  "],[6,"section"],[9,"id","channel-content"],[9,"class","main"],[7],[0,"\\n"],[4,"if",[[19,0,["channel","isLogged"]]],null,{"statements":[[0,"      "],[6,"a"],[9,"class","load-previous"],[9,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[3,"action",[[19,0,[]],"loadPreviousMessages"]],[7],[0,"\\n        Load previous messages\\n      "],[8],[0,"\\n"]],"parameters":[]},null],[0,"\\n    "],[6,"ul"],[7],[0,"\\n"],[4,"each",[[19,0,["channel","sortedMessages"]]],null,{"statements":[[0,"        "],[6,"li"],[7],[0,"\\n          "],[1,[25,"component",[[19,2,["type"]]],[["message"],[[19,2,[]]]]],false],[0,"\\n        "],[8],[0,"\\n"]],"parameters":[2]},{"statements":[[4,"if",[[19,0,["channel","isLogged"]]],null,{"statements":[[0,"          "],[6,"li"],[9,"class","no-messages"],[7],[0,"No recent messages to display."],[8],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[6,"li"],[9,"class","no-messages"],[7],[0,"No Kosmos logs configured for this channel. "],[6,"a"],[9,"href","https://wiki.kosmos.org/Setting_up_channel_logs"],[9,"target","_blank"],[9,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[7],[0,"Learn more"],[8],[8],[0,"\\n"]],"parameters":[]}]],"parameters":[]}],[0,"    "],[8],[0,"\\n  "],[8],[0,"\\n\\n  "],[6,"footer"],[7],[0,"\\n    "],[6,"section"],[9,"id","new-message"],[7],[0,"\\n      "],[6,"form"],[3,"action",[[19,0,[]],"processMessageOrCommand"],[["on"],["submit"]]],[7],[0,"\\n        "],[1,[25,"channel-input-field",null,[["value","placeholder","name","id","autocomplete"],[[19,0,["newMessage"]],"Type a message and hit enter","chat-message","message-field","off"]]],false],[0,"\\n      "],[8],[0,"\\n    "],[8],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n\\n"],[6,"aside"],[7],[0,"\\n  "],[6,"header"],[7],[0,"\\n    "],[6,"nav"],[7],[0,"\\n      "],[4,"link-to",["index"],[["class"],["active"]],{"statements":[[6,"i"],[9,"class","icon-users"],[7],[8]],"parameters":[]},null],[6,"a"],[9,"href","#"],[9,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[7],[6,"i"],[9,"class","icon-paperclip"],[7],[8],[8],[4,"link-to",["settings"],null,{"statements":[[6,"i"],[9,"class","icon-cog"],[7],[8]],"parameters":[]},null],[6,"a"],[9,"href","#"],[9,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[7],[6,"i"],[9,"class","icon-resize-enlarge"],[7],[8],[8],[0,"\\n    "],[8],[0,"\\n  "],[8],[0,"\\n  "],[6,"section"],[9,"id","user-list"],[9,"class","main"],[7],[0,"\\n    "],[6,"ul"],[7],[0,"\\n"],[4,"each",[[19,0,["channel","userList"]]],null,{"statements":[[0,"      "],[6,"li"],[7],[1,[25,"link-to-username",null,[["username"],[[19,1,[]]]]],false],[8],[0,"\\n"]],"parameters":[1]},null],[0,"    "],[8],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hyperchannel/components/channel-container/template.hbs"}})}),define("hyperchannel/components/channel-input-field/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.TextField.extend({keyUp:function(e){if(e.altKey)switch(e.key){case"k":this._insertAtCaret("")}},_insertAtCaret:function(e){var n=this.$().get(0)
if(document.selection)n.focus(),n=document.selection.createRange(),n.text=e,n.focus()
else if(n.selectionStart||"0"===n.selectionStart){var t=n.selectionStart,a=n.selectionEnd,s=n.scrollTop
n.value=n.value.substring(0,t)+e+n.value.substring(a,n.value.length),n.focus(),n.selectionStart=t+e.length,n.selectionEnd=t+e.length,n.scrollTop=s}else n.value+=e,n.focus()}})}),define("hyperchannel/components/channel-nav/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({tagName:"ul"})}),define("hyperchannel/components/channel-nav/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"JxQlsCnD",block:'{"symbols":["space","channel"],"statements":[[4,"each",[[19,0,["spaces"]]],null,{"statements":[[0,"  "],[6,"li"],[7],[0,"\\n    "],[6,"h2"],[7],[4,"link-to",["space",[19,1,[]]],null,{"statements":[[1,[19,1,["name"]],false]],"parameters":[]},null],[8],[0,"\\n    "],[6,"ul"],[7],[0,"\\n"],[4,"each",[[19,1,["sortedChannels"]]],null,{"statements":[[0,"        "],[6,"li"],[10,"class",[26,[[25,"if",[[19,2,["connected"]],"connected","disconnected"],null]," ",[19,2,["unreadMessagesClass"]]]]],[7],[0,"\\n"],[4,"if",[[19,2,["isUserChannel"]]],null,{"statements":[[0,"            "],[4,"link-to",["space.userChannel",[19,1,[]],[19,2,[]]],null,{"statements":[[1,[19,2,["name"]],false]],"parameters":[]},null],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[4,"link-to",["space.channel",[19,1,[]],[19,2,[]]],null,{"statements":[[1,[19,2,["name"]],false]],"parameters":[]},null],[0,"\\n"]],"parameters":[]}],[0,"        "],[8],[0,"\\n"]],"parameters":[2]},null],[0,"      "],[6,"li"],[7],[0,"\\n        "],[6,"a"],[9,"class","join-channel"],[9,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[3,"action",[[19,0,[]],[25,"action",[[19,0,[]],[19,0,["joinChannel"]],[19,1,[]]],null]]],[7],[0,"+"],[8],[0,"\\n      "],[8],[0,"\\n    "],[8],[0,"\\n  "],[8],[0,"\\n"]],"parameters":[1]},null]],"hasEval":false}',meta:{moduleName:"hyperchannel/components/channel-nav/template.hbs"}})}),define("hyperchannel/components/date-headline/component",["exports","moment"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({classNames:["date-headline"],updateInterval:12e4,headline:Ember.computed("message.date",function(){var e=this,t=(0,n.default)(this.get("message.date")),a=function(){Ember.run.later(function(){e.notifyPropertyChange("message.date")},e.get("updateInterval"))}
return t.isSame((0,n.default)(),"day")?(a(),"Today"):t.isSame((0,n.default)().subtract(1,"day"),"day")?(a(),"Yesterday"):this.get("message.date").toLocaleDateString()})})}),define("hyperchannel/components/date-headline/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"8MgoHQ5L",block:'{"symbols":[],"statements":[[6,"h3"],[7],[1,[18,"headline"],false],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hyperchannel/components/date-headline/template.hbs"}})}),define("hyperchannel/components/from-elsewhere",["exports","ember-elsewhere/components/from-elsewhere"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/components/illiquid-model",["exports","liquid-fire/components/illiquid-model"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/components/link-to-username/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var n=Ember.Component,t=Ember.computed,a=Ember.isPresent
e.default=n.extend({username:null,roles:{"@":"op","%":"half-op","+":"voice"},role:t("username","roles",function(){var e=this.get("roles")[this.get("username")[0]]
return a(e)?e:"normal"}),usernameWithoutPrefix:t("username","roles",function(){var e=RegExp("^[\\"+Object.keys(this.get("roles")).join("\\")+"]")
return this.get("username").replace(e,"")})})}),define("hyperchannel/components/link-to-username/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"51V6uCBy",block:'{"symbols":[],"statements":[[4,"link-to",["space.userChannel",[19,0,["usernameWithoutPrefix"]]],[["class"],[[19,0,["role"]]]],{"statements":[[1,[18,"username"],false]],"parameters":[]},null],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hyperchannel/components/link-to-username/template.hbs"}})}),define("hyperchannel/components/liquid-bind",["exports","liquid-fire/components/liquid-bind"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/components/liquid-child",["exports","liquid-fire/components/liquid-child"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/components/liquid-container",["exports","liquid-fire/components/liquid-container"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/components/liquid-if",["exports","liquid-fire/components/liquid-if"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/components/liquid-measured",["exports","liquid-fire/components/liquid-measured"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"measure",{enumerable:!0,get:function(){return n.measure}})}),define("hyperchannel/components/liquid-outlet",["exports","liquid-fire/components/liquid-outlet"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/components/liquid-spacer",["exports","liquid-fire/components/liquid-spacer"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/components/liquid-sync",["exports","liquid-fire/components/liquid-sync"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/components/liquid-unless",["exports","liquid-fire/components/liquid-unless"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/components/liquid-versions",["exports","liquid-fire/components/liquid-versions"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/components/message-chat-me/component",["exports","hyperchannel/components/message-chat/component"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default.extend({classNames:["chat-message","chat-me-message"]})}),define("hyperchannel/components/message-chat-me/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"paP8735e",block:'{"symbols":[],"statements":[[6,"span"],[9,"class","username"],[10,"data-username",[20,["message","nickname"]],null],[7],[1,[20,["message","nickname"]],false],[8],[0,"\\n"],[6,"span"],[9,"class","message"],[7],[1,[18,"formattedContent"],false],[8],[0,"\\n\\n"]],"hasEval":false}',meta:{moduleName:"hyperchannel/components/message-chat-me/template.hbs"}})}),define("hyperchannel/components/message-chat/component",["exports","moment"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0})
var t=Ember.computed,a=Ember.String.htmlSafe
e.default=Ember.Component.extend({tagName:"div",classNames:["chat-message"],message:null,datetime:t("message.date",function(){return(0,n.default)(this.get("message.date")).format("YYYY-MM-DD[T]HH:mm")}),dateTitle:t("message.date",function(){return(0,n.default)(this.get("message.date")).format("YYYY-MM-DD [at] HH:mm")}),formattedContent:t("message.content",function(){var e=this.get("message.content"),n=void 0
return n=e.match(/^(http)s?:\/\/.*(gif|png|jpg|jpeg)$/i)?'<br><a href="'+e+'" target="_blank" rel="nofollow noopener"><img src="'+e+'" class="from-image-url" alt="'+e+'"></a>':linkifyStr(e,{linkAttributes:{rel:"nofollow noopener"},validate:{url:function(e){return/^(http)s?:\/\//.test(e)},email:function(){return!1}}}),n=n.replace(/\u0003(\d+)/g,'<span class="color-$1">').replace(/"color-(\d)"/g,'"color-0$1"').replace(/\u0002/g,'<span class="bold">').replace(/\u001D/g,'<span class="italic">').replace(/\u000f/g,"</span>"),a(n)})})}),define("hyperchannel/components/message-chat/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"z8kWt4IN",block:'{"symbols":[],"statements":[[6,"span"],[9,"class","chat-message__username"],[10,"data-username",[20,["message","nickname"]],null],[7],[0,"\\n  "],[1,[20,["message","nickname"]],false],[0,":\\n"],[8],[0,"\\n\\n"],[6,"time"],[9,"class","chat-message__date"],[10,"datetime",[18,"datetime"],null],[10,"title",[18,"dateTitle"],null],[7],[0,"\\n  "],[1,[25,"moment-format",[[19,0,["message","date"]],"HH:mm"],null],false],[0,"\\n"],[8],[0,"\\n\\n"],[6,"span"],[9,"class","chat-message__message"],[7],[0,"\\n  "],[1,[18,"formattedContent"],false],[0,"\\n"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hyperchannel/components/message-chat/template.hbs"}})}),define("hyperchannel/components/modal-target/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({modalAnimation:function(){return this.lookup("explode").call(this,{pick:".modal-background",use:["fade",{maxOpacity:.5}]},{pick:".modal-dialog",use:"scale"})},actions:{outsideClick:function(e){e&&e.onOutsideClick&&e.onOutsideClick()}}})})
define("hyperchannel/components/modal-target/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"3Fm0k3TT",block:'{"symbols":["modal","currentModal"],"statements":[[4,"from-elsewhere",null,[["name"],["modal"]],{"statements":[[4,"liquid-bind",[[19,1,[]]],[["containerless","use"],[true,[19,0,["modalAnimation"]]]],{"statements":[[4,"if",[[19,2,[]]],null,{"statements":[[0,"      "],[6,"div"],[9,"class","modal-container"],[7],[0,"\\n        "],[6,"div"],[9,"class","modal-background"],[10,"onclick",[25,"action",[[19,0,[]],"outsideClick",[19,2,[]]],null],null],[9,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[7],[8],[0,"\\n        "],[6,"div"],[9,"class","modal-dialog"],[7],[0,"\\n"],[4,"if",[[19,2,["body"]]],null,{"statements":[[0,"            "],[1,[25,"component",[[19,2,["body"]]],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[1,[25,"component",[[19,2,[]]],null],false],[0,"\\n"]],"parameters":[]}],[0,"        "],[8],[0,"\\n      "],[8],[0,"\\n"]],"parameters":[]},null]],"parameters":[2]},null]],"parameters":[1]},null],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hyperchannel/components/modal-target/template.hbs"}})}),define("hyperchannel/components/multiple-from-elsewhere",["exports","ember-elsewhere/components/multiple-from-elsewhere"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/components/notification-topic-change/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({tagName:"div",classNames:["topic-change-notification"]})}),define("hyperchannel/components/notification-topic-change/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"I+LsLdTX",block:'{"symbols":[],"statements":[[0,"Topic was changed to \\""],[1,[20,["message","content"]],false],[0,"\\" by "],[6,"span"],[9,"class","username"],[10,"data-username",[20,["message","nickname"]],null],[7],[1,[20,["message","nickname"]],false],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hyperchannel/components/notification-topic-change/template.hbs"}})}),define("hyperchannel/components/space-setting-modal/component",["exports","hyperchannel/models/space"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({settings:null,space:null,init:function(){this._super.apply(this,arguments),this.set("space",n.default.create(this.get("settings").serialize()))},actions:{save:function(){this.onSave(this.get("space"))},cancel:function(){this.onCancel()}}})}),define("hyperchannel/components/space-setting-modal/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"91hLjWEF",block:'{"symbols":[],"statements":[[6,"h1"],[7],[0,"Space Setting"],[8],[0,"\\n\\n"],[6,"form"],[9,"name","add-space"],[3,"action",[[19,0,[]],"save"],[["on"],["submit"]]],[7],[0,"\\n  "],[6,"p"],[7],[0,"\\n    "],[1,[25,"input",null,[["value","required","placeholder"],[[19,0,["space","protocol"]],"required","IRC"]]],false],[0,"\\n  "],[8],[0,"\\n  "],[6,"p"],[7],[0,"\\n    "],[1,[25,"input",null,[["value","required","placeholder"],[[19,0,["space","name"]],"required","Freenode"]]],false],[0,"\\n  "],[8],[0,"\\n  "],[6,"p"],[7],[0,"\\n    "],[1,[25,"input",null,[["value","required","placeholder"],[[19,0,["space","server","hostname"]],"required","irc.servername.org"]]],false],[0,"\\n  "],[8],[0,"\\n  "],[6,"p"],[7],[0,"\\n    "],[1,[25,"input",null,[["value","required","placeholder"],[[19,0,["space","server","port"]],"required","6667"]]],false],[0,"\\n  "],[8],[0,"\\n  "],[6,"p"],[7],[0,"\\n    "],[1,[25,"input",null,[["type","checked","id"],["checkbox",[19,0,["space","server","secure"]],"tls-enabled-modal"]]],false],[0,"\\n    "],[6,"label"],[9,"for","tls-enabled-modal"],[7],[0,"Secure (TLS)"],[8],[0,"\\n  "],[8],[0,"\\n  "],[6,"p"],[7],[0,"\\n    "],[1,[25,"input",null,[["value","placeholder"],[[19,0,["space","server","username"]],"username"]]],false],[0,"\\n  "],[8],[0,"\\n  "],[6,"p"],[7],[0,"\\n    "],[1,[25,"input",null,[["value","placeholder"],[[19,0,["space","server","password"]],"password"]]],false],[0,"\\n  "],[8],[0,"\\n  "],[6,"p"],[7],[0,"\\n    "],[1,[25,"input",null,[["value","required","placeholder"],[[19,0,["space","server","nickname"]],"required","nickname"]]],false],[0,"\\n  "],[8],[0,"\\n  "],[6,"p"],[7],[0,"\\n    username:  "],[1,[20,["space","server","username"]],false],[0,"\\n  "],[8],[0,"\\n  "],[6,"p"],[7],[0,"\\n    "],[6,"input"],[9,"type","submit"],[9,"value","Save"],[7],[8],[0,"\\n  "],[8],[0,"\\n"],[8],[0,"\\n\\n"],[6,"button"],[9,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[3,"action",[[19,0,[]],"cancel"]],[7],[0,"Cancel"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hyperchannel/components/space-setting-modal/template.hbs"}})}),define("hyperchannel/components/to-elsewhere",["exports","ember-elsewhere/components/to-elsewhere"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/controllers/application",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var n=Ember.Controller,t=Ember.computed.alias,a=Ember.inject.service
e.default=n.extend({coms:a(),spaces:t("coms.spaces"),showGlobalMenu:!1,showChannelMenu:!1})}),define("hyperchannel/controllers/index",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({application:Ember.inject.controller()})}),define("hyperchannel/controllers/settings",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var n=Ember.Controller,t=Ember.inject,a=t.controller,s=t.service,r=Ember.computed.notEmpty
e.default=n.extend({application:a(),coms:s(),storage:s("remotestorage"),newSpace:null,selectedSpacePreset:null,showSpaceSettingModal:r("selectedSpacePreset"),actions:{addSpaceFromPreset:function(e){this.set("selectedSpacePreset",e)},saveSpace:function(e){var n=this
this.set("selectedSpacePreset",null),this.get("storage").saveSpace(e).then(function(){n.get("coms").connectAndAddSpace(e)})}}})}),define("hyperchannel/controllers/space",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({})}),define("hyperchannel/controllers/space/base_channel",["exports","hyperchannel/models/message"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0})
var t=Ember.Controller,a=Ember.inject,s=a.controller,r=a.service,o=Ember.Logger,i=Ember.isPresent
e.default=t.extend({newMessage:null,space:s(),coms:r(),storage:r("remotestorage"),createMessage:function(e,t){return n.default.create({type:t,date:new Date,nickname:this.get("space.model.server.nickname"),content:e})},actions:{sendMessage:function(e){var n=this.createMessage(e,"message-chat")
this.get("coms").transferMessage(this.get("space.model"),this.get("model"),n.get("content")),this.get("model.messages").pushObject(n),this.set("newMessage",null)},executeCommand:function(e){var n=["help","join","leave","me","msg","part","topic"],t=e.substr(1),a=t.split(" "),s=a[0]
n.includes(s.toLowerCase())?this.send(s+"Command",a.slice(1)):o.warn("[channel]","Unknown command",t),this.set("newMessage",null)},joinCommand:function(e){var n=this.get("space.model"),t=this.get("coms").createChannel(n,e[0])
this.get("storage").saveSpace(n),this.transitionToRoute("space.channel",n,t)},partCommand:function(){var e=this.get("space.model"),n=this.get("model.name")
this.get("coms").removeChannel(e,n)
var t=e.get("channels.lastObject")
i(t)?this.transitionToRoute("space.channel",e,t):this.transitionToRoute("space",e)},leaveCommand:function(){this.send("partCommand")},helpCommand:function(){},meCommand:function(e){var n=e.join(" "),t=this.createMessage(n,"message-chat-me")
this.get("coms").transferMeMessage(this.get("space.model"),this.get("model.sockethubChannelId"),t.get("content")),this.get("model.messages").pushObject(t)},msgCommand:function(e){var n=e.shift()
this.get("coms").createUserChannel(this.get("space.model"),n)},topicCommand:function(e){var n=this.get("model"),t=e.join(" ")
this.get("coms").changeTopic(this.get("space.model"),n,t)}}})}),define("hyperchannel/controllers/space/channel",["exports","hyperchannel/controllers/space/base_channel"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default.extend({})}),define("hyperchannel/controllers/space/user_channel",["exports","hyperchannel/controllers/space/base_channel"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default.extend({})}),define("hyperchannel/ember-gestures/recognizers/pan",["exports","ember-gestures/recognizers/pan"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default}),define("hyperchannel/ember-gestures/recognizers/pinch",["exports","ember-gestures/recognizers/pinch"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default}),define("hyperchannel/ember-gestures/recognizers/press",["exports","ember-gestures/recognizers/press"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default}),define("hyperchannel/ember-gestures/recognizers/rotate",["exports","ember-gestures/recognizers/rotate"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default}),define("hyperchannel/ember-gestures/recognizers/swipe",["exports","ember-gestures/recognizers/swipe"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default}),define("hyperchannel/ember-gestures/recognizers/swipeleft",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={include:[],exclude:[],options:{threshold:25,direction:Hammer.DIRECTION_LEFT},eventName:"swipeleft",recognizer:"swipe"}}),define("hyperchannel/ember-gestures/recognizers/swiperight",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={include:[],exclude:[],options:{threshold:25,direction:Hammer.DIRECTION_RIGHT},eventName:"swiperight",recognizer:"swipe"}}),define("hyperchannel/ember-gestures/recognizers/tap",["exports","ember-gestures/recognizers/tap"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/ember-gestures/recognizers/vertical-pan",["exports","ember-gestures/recognizers/vertical-pan"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/ember-gestures/recognizers/vertical-swipe",["exports","ember-gestures/recognizers/vertical-swipe"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/event_dispatcher",["exports","ember-gestures/event_dispatcher","hyperchannel/config/environment"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0})
var a=Ember.assign||Ember.merge,s=a({},{emberUseCapture:!1,removeTracking:!1,useFastPaths:!1})
s=a(s,t.default.gestures),e.default=n.default.extend({useCapture:s.emberUseCapture,removeTracking:s.removeTracking,useFastPaths:s.useFastPaths})}),define("hyperchannel/helpers/app-version",["exports","hyperchannel/config/environment","ember-cli-app-version/utils/regexp"],function(e,n,t){function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
return n.hideSha?s.match(t.versionRegExp)[0]:n.hideVersion?s.match(t.shaRegExp)[0]:s}Object.defineProperty(e,"__esModule",{value:!0}),e.appVersion=a
var s=n.default.APP.version
e.default=Ember.Helper.helper(a)}),define("hyperchannel/helpers/is-after",["exports","hyperchannel/config/environment","ember-moment/helpers/is-after"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({globalAllowEmpty:!!Ember.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/is-before",["exports","hyperchannel/config/environment","ember-moment/helpers/is-before"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({globalAllowEmpty:!!Ember.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/is-between",["exports","hyperchannel/config/environment","ember-moment/helpers/is-between"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({globalAllowEmpty:!!Ember.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/is-same-or-after",["exports","hyperchannel/config/environment","ember-moment/helpers/is-same-or-after"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({globalAllowEmpty:!!Ember.get(n.default,"moment.allowEmpty")})})
define("hyperchannel/helpers/is-same-or-before",["exports","hyperchannel/config/environment","ember-moment/helpers/is-same-or-before"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({globalAllowEmpty:!!Ember.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/is-same",["exports","hyperchannel/config/environment","ember-moment/helpers/is-same"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({globalAllowEmpty:!!Ember.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/lf-lock-model",["exports","liquid-fire/helpers/lf-lock-model"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"lfLockModel",{enumerable:!0,get:function(){return n.lfLockModel}})}),define("hyperchannel/helpers/lf-or",["exports","liquid-fire/helpers/lf-or"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"lfOr",{enumerable:!0,get:function(){return n.lfOr}})}),define("hyperchannel/helpers/moment-add",["exports","hyperchannel/config/environment","ember-moment/helpers/moment-add"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({globalAllowEmpty:!!Ember.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/moment-calendar",["exports","hyperchannel/config/environment","ember-moment/helpers/moment-calendar"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({globalAllowEmpty:!!Ember.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/moment-duration",["exports","ember-moment/helpers/moment-duration"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/helpers/moment-format",["exports","hyperchannel/config/environment","ember-moment/helpers/moment-format"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({globalAllowEmpty:!!Ember.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/moment-from-now",["exports","hyperchannel/config/environment","ember-moment/helpers/moment-from-now"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({globalAllowEmpty:!!Ember.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/moment-from",["exports","hyperchannel/config/environment","ember-moment/helpers/moment-from"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({globalAllowEmpty:!!Ember.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/moment-subtract",["exports","hyperchannel/config/environment","ember-moment/helpers/moment-subtract"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({globalAllowEmpty:!!Ember.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/moment-to-date",["exports","hyperchannel/config/environment","ember-moment/helpers/moment-to-date"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({globalAllowEmpty:!!Ember.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/moment-to-now",["exports","hyperchannel/config/environment","ember-moment/helpers/moment-to-now"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({globalAllowEmpty:!!Ember.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/moment-to",["exports","hyperchannel/config/environment","ember-moment/helpers/moment-to"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({globalAllowEmpty:!!Ember.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/moment-unix",["exports","ember-moment/helpers/unix"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"unix",{enumerable:!0,get:function(){return n.unix}})}),define("hyperchannel/helpers/moment",["exports","ember-moment/helpers/moment"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/helpers/now",["exports","ember-moment/helpers/now"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/helpers/route-action",["exports","ember-route-action-helper/helpers/route-action"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/helpers/unix",["exports","ember-moment/helpers/unix"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"unix",{enumerable:!0,get:function(){return n.unix}})}),define("hyperchannel/initializers/app-version",["exports","ember-cli-app-version/initializer-factory","hyperchannel/config/environment"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0})
var a=t.default.APP,s=a.name,r=a.version
e.default={name:"App Version",initialize:(0,n.default)(s,r)}}),define("hyperchannel/initializers/container-debug-adapter",["exports","ember-resolver/resolvers/classic/container-debug-adapter"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"container-debug-adapter",initialize:function(){var e=arguments[1]||arguments[0]
e.register("container-debug-adapter:main",n.default),e.inject("container-debug-adapter:main","namespace","application:main")}}}),define("hyperchannel/initializers/ember-hammertime",["exports","ember-hammertime/components/component"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ember-hammertime",initialize:function(){}}}),define("hyperchannel/initializers/export-application-global",["exports","hyperchannel/config/environment"],function(e,n){function t(){var e=arguments[1]||arguments[0]
if(!1!==n.default.exportApplicationGlobal){var t
if("undefined"!=typeof window)t=window
else if("undefined"!=typeof global)t=global
else{if("undefined"==typeof self)return
t=self}var a,s=n.default.exportApplicationGlobal
a="string"==typeof s?s:Ember.String.classify(n.default.modulePrefix),t[a]||(t[a]=e,e.reopen({willDestroy:function(){this._super.apply(this,arguments),delete t[a]}}))}}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default={name:"export-application-global",initialize:t}}),define("hyperchannel/initializers/hammer",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"hammer",initialize:function(){delete Hammer.defaults.cssProps.userSelect}}}),define("hyperchannel/initializers/liquid-fire",["exports","liquid-fire/ember-internals"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),(0,n.initialize)(),e.default={name:"liquid-fire",initialize:function(){}}}),define("hyperchannel/initializers/sockethub",["exports","hyperchannel/config/environment"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0})
var t=new SockethubClient(io(n.default.sockethubURL,{path:"/sockethub"}))
e.default={name:"sockethub",initialize:function(e){e.register("sockethub:client",t,{instantiate:!1,singleton:!0}),e.inject("controller","sockethub","sockethub:client"),e.inject("route","sockethub","sockethub:client"),e.inject("component","sockethub","sockethub:client"),e.inject("service","sockethub","sockethub:client")}}}),define("hyperchannel/instance-initializers/ember-gestures",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var n=Ember.getOwner
e.default={name:"ember-gestures",initialize:function(e){"function"==typeof e.lookup?e.lookup("service:-gestures"):n(e).lookup("service:-gestures")}}}),define("hyperchannel/instance-initializers/remotestorage",["exports"],function(e){function n(e){var n=e.lookup("service:remotestorage"),t=n.get("rs")
window.remoteStorage=t,["ready","not-connected","connected","disconnected","error","features-loaded","connecting","authing","wire-busy","wire-done","network-offline","network-online"].forEach(function(e){t.on(e,function(){return Ember.Logger.debug("[remotestorage] RS event: "+e)})})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=n,e.default={name:"remotestorage",initialize:n}}),define("hyperchannel/models/base_channel",["exports","hyperchannel/models/message","moment"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0})
var a=Ember.computed,s=Ember.isPresent
e.default=Ember.Object.extend({space:null,name:"",userList:null,messages:null,connected:!1,sockethubChannelId:null,topic:null,unreadMessages:!1,unreadMentions:!1,visible:!1,init:function(){this._super.apply(this,arguments),this.set("messages",[]),this.set("userList",[])},isLogged:a("space.loggedChannels.[]","name",function(){var e=this,n=this.get("space.loggedChannels").find(function(n){return n===e.get("name")})
return s(n)}),slug:a("name",function(){return this.get("name").replace(/#/g,"")}),unreadMessagesClass:a("visible","unreadMessages","unreadMentions",function(){return this.get("visible")||!this.get("unreadMessages")?null:this.get("unreadMentions")?"unread-mentions":"unread-messages"}),sortedMessages:a("messages.@each.date",function(){return this.get("messages").sortBy("date")}),addDateHeadline:function(e){var a=(0,t.default)(e.get("date")).startOf("day").toDate()
if(!this.get("messages").find(function(e){return"date-headline"===e.get("type")&&e.get("date").toString()===a.toString()})){var s=n.default.create({type:"date-headline",date:a})
this.get("messages").pushObject(s)}},addMessage:function(e){this.addDateHeadline(e),this.get("messages").pushObject(e),this.get("visible")||(this.set("unreadMessages",!0),e.get("content").match(this.get("space.userNickname"))&&this.set("unreadMentions",!0))},addUser:function(e){this.get("userList").includes(e)||this.get("userList").pushObject(e)},removeUser:function(e){this.get("userList").removeObject(e)}})}),define("hyperchannel/models/channel",["exports","hyperchannel/models/base_channel"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default.extend({searchedPreviousLogsUntilDate:null,formattedTopic:Ember.computed("topic",function(){if(null!==this.get("topic")){var e=linkifyStr(this.get("topic"),{defaultProtocol:"https",linkAttributes:{rel:"nofollow"}})
return new Ember.String.htmlSafe(e)}return""})})})
define("hyperchannel/models/message",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Object.extend({type:null,date:null,nickname:null,content:null})}),define("hyperchannel/models/space",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var n=Ember.computed,t=Ember.isPresent
e.default=Ember.Object.extend({name:null,protocol:"IRC",server:{hostname:null,port:7e3,secure:!0,username:null,password:null,nickname:null,nickServ:{password:null}},channels:null,previousSockethubPersonIds:null,init:function(){this._super.apply(this,arguments),this.set("channels",[]),this.set("previousSockethubPersonIds",[])},channelNames:n("channels.@each.name",function(){return this.get("channels").mapBy("name")}),sockethubChannelIds:n("channels.@each.sockethubChannelId",function(){return this.get("channels").mapBy("sockethubChannelId")}),loggedChannels:n("name","protocol",function(){return"Freenode"===this.get("name")&&"IRC"===this.get("protocol")?["#5apps","#kosmos","#kosmos-dev","#remotestorage","#hackerbeach","#unhosted","#sockethub","#opensourcedesign","#openknot","#emberjs","#indieweb","#mastodon"]:[]}),userNickname:n.alias("server.nickname"),updateUsername:function(e){switch(this.get("previousSockethubPersonIds").pushObject(this.get("sockethubPersonId")),this.get("protocol")){case"IRC":this.set("server.nickname",e)
break
case"XMPP":this.set("server.username",e)}},sockethubPersonId:function(){var e=void 0
switch(this.get("protocol")){case"IRC":e="irc://"+this.get("server.nickname")+"@"+this.get("server.hostname")
break
case"XMPP":e=this.get("server.username")+"/hyperchannel"}return e}.property("protocol","server.hostname","server.username","server.nickname"),channelSorting:["name"],sortedChannels:n.sort("channels","channelSorting"),serialize:function(){var e=this,n={id:this.get("id")||this.get("name").dasherize(),name:this.get("name"),protocol:this.get("protocol"),server:{hostname:this.get("server.hostname"),port:parseInt(this.get("server.port"),10),secure:this.get("server.secure"),nickname:this.get("server.nickname")},channels:this.get("channelNames")||[]}
return["username","password","nickname"].forEach(function(a){t(e.get("server."+a))&&(n.server[a]=e.get("server."+a))}),n}})}),define("hyperchannel/models/user_channel",["exports","hyperchannel/models/base_channel"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default.extend({isUserChannel:!0})}),define("hyperchannel/resolver",["exports","ember-resolver"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default}),define("hyperchannel/router",["exports","hyperchannel/config/environment"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0})
var t=Ember.Router.extend({location:n.default.locationType,rootURL:n.default.rootURL})
t.map(function(){this.route("space",{path:"/:id"},function(){this.route("channel",{path:"/channel/:slug"}),this.route("userChannel",{path:"/user/:slug"})}),this.route("settings")}),e.default=t}),define("hyperchannel/routes/application",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var n=Ember.Route,t=Ember.inject.service,a=Ember.isEmpty
e.default=n.extend({logger:t(),coms:t(),storage:t("remotestorage"),beforeModel:function(){this._super.apply(this,arguments)},model:function(){return this.get("coms").setupListeners(),this.get("coms").instantiateSpacesAndChannels()},actions:{menu:function(e,n){var t="show"+e.capitalize()+"Menu"
switch(n){case"show":this.controller.set(t,!0)
break
case"hide":this.controller.set(t,!1)
break
case"toggle":this.controller.toggleProperty(t)}},openNewChannel:function(e){var n=window.prompt("Join channel")
if(!a(n)){"IRC"!==e.get("protocol")||n.match(/^#/)||(n="#"+n)
var t=this.get("coms").createChannel(e,n)
this.get("storage").saveSpace(e),this.transitionTo("space.channel",e,t)}}}})}),define("hyperchannel/routes/index",["exports","ember-local-storage"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Route.extend({userSettings:(0,n.storageFor)("user-settings"),redirect:function(){var e=this.get("userSettings.currentSpace")||"freenode",n=this.get("userSettings.currentChannel")||"#kosmos"
e&&n&&this.transitionTo("space.channel",e,n)}})}),define("hyperchannel/routes/settings",["exports","hyperchannel/models/space","hyperchannel/config/environment"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0})
var a=Ember.Route,s=Ember.inject.service,r=Ember.isEmpty,o=Ember.Logger,i=Ember.RSVP
e.default=a.extend({storage:s("remotestorage"),coms:s(),model:function(){var e=this.get("storage.rs").kosmos,a=e.spaces.getAll().then(function(e){var t=[]
return r(e)?t:(Object.keys(e).forEach(function(a){t.push(n.default.create(e[a]))}),t)},function(e){o.error(e)})
return i.hash({spaces:a,spacePresets:t.default.spacePresets.map(function(e){return n.default.create(e)})})},setupController:function(e){this._super.apply(this,arguments),e.set("newSpace",n.default.create())},actions:{addSpace:function(){var e=this,n=this.controller.get("newSpace")
n.set("id",n.get("name").dasherize()),this.get("storage").saveSpace(n).then(function(){e.get("coms").connectAndAddSpace(n),e.modelFor("settings").spaces.pushObject(n)},function(e){o.error("error saving in RS",n,e)})},removeSpace:function(e){var n=this
this.get("storage").removeSpace(e).then(function(){n.modelFor("settings").spaces.removeObject(e)},function(n){o.error("error deleting from RS",e,n)})}}})}),define("hyperchannel/routes/space",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Route.extend({coms:Ember.inject.service(),model:function(e){return this.get("coms").get("spaces").findBy("id",e.id)}})}),define("hyperchannel/routes/space/base_channel",["exports","ember-local-storage"],function(e,n){function t(){window.innerWidth>900&&Ember.$("input#message-field").focus()}Object.defineProperty(e,"__esModule",{value:!0})
var a=Ember.Route,s=Ember.inject.service,r=Ember.run,o=r.later,i=r.scheduleOnce
e.default=a.extend({coms:s(),userSettings:(0,n.storageFor)("user-settings"),model:function(e){var n=this.modelFor("space"),t=n.get("channels").findBy("slug",e.slug)
return t||(t=this.createChannelOrUserChannel(n,e.slug)),t},setupController:function(e,n){this._super(e,n),i("afterRender",function(){t()})},actions:{didTransition:function(){var e=this,n=this.modelFor("space"),t=this.controller.get("model")
this.set("userSettings.currentSpace",n.get("id")),this.set("userSettings.currentChannel",t.get("slug")),this.get("coms.spaces").forEach(function(e){e.get("channels").setEach("visible",!1)}),t.set("visible",!0),t.set("unreadMessages",!1),t.set("unreadMentions",!1),o(this,function(){return e.send("menu","global","hide")},500)}}})}),define("hyperchannel/routes/space/channel",["exports","hyperchannel/routes/space/base_channel"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default.extend({createChannelOrUserChannel:function(e,n){return this.get("coms").createChannel(e,"#"+n)}})}),define("hyperchannel/routes/space/user_channel",["exports","hyperchannel/routes/space/base_channel"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default.extend({createChannelOrUserChannel:function(e,n){return this.get("coms").createUserChannel(e,n)}})}),define("hyperchannel/services/-gestures",["exports","hyperchannel/config/environment","ember-gestures/services/-gestures"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0})
var a=Ember.assign||Ember.merge,s=a({},{useCapture:!1})
s=a(s,n.default.gestures),e.default=t.default.extend({useCapture:s.useCapture})}),define("hyperchannel/services/ajax",["exports","ember-ajax/services/ajax"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/services/coms",["exports","hyperchannel/models/space","hyperchannel/models/channel","hyperchannel/models/user_channel","hyperchannel/models/message","hyperchannel/config/environment","moment","ember-local-storage"],function(e,n,t,a,s,r,o,i){Object.defineProperty(e,"__esModule",{value:!0})
var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=Ember.Service,u=Ember.inject.service,d=Ember.RSVP,p=Ember.isEmpty,m=Ember.isPresent,h=Ember.Logger,f=Ember.get
e.default=c.extend({ajax:u(),logger:u(),userSettings:(0,i.storageFor)("user-settings"),storage:u("remotestorage"),irc:u("sockethub-irc"),xmpp:u("sockethub-xmpp"),spaces:null,setupListeners:function(){this.sockethub.socket.on("completed",this.handleSockethubCompleted.bind(this)),this.sockethub.socket.on("message",this.handleSockethubMessage.bind(this)),this.sockethub.socket.on("failure",this.handleSockethubFailure.bind(this))},instantiateSpacesAndChannels:function(){var e=this
this.set("spaces",[])
var t=this.get("storage.rs")
return new d.Promise(function(a,s){t.kosmos.spaces.getAll().then(function(t){p(Object.keys(t))?(h.debug("No space data found in RS. Adding default space..."),e.get("storage").addDefaultSpace().then(function(n){e.connectAndAddSpace(n.space),e.instantiateChannels(n.space,n.channels),a()})):(Object.keys(t).forEach(function(a){var s=n.default.create({id:a,name:t[a].name,protocol:t[a].protocol,server:t[a].server})
e.connectAndAddSpace(s),e.instantiateChannels(s,t[a].channels)}),a())},function(n){e.log("error","couldn'd load spaces from RS",n),s()})})},connectServer:function(e){this.getServiceForSockethubPlatform(e.get("protocol")).connect(e)},connectAndAddSpace:function(e){this.connectServer(e),this.get("spaces").pushObject(e)},joinChannel:function(e,n,t){this.getServiceForSockethubPlatform(e.get("protocol")).join(e,n,t)},transferMessage:function(e,n,t){var a={"@id":n.get("sockethubChannelId"),"@type":n.get("isUserChannel")?"person":"room",displayName:n.get("name")}
this.getServiceForSockethubPlatform(e.get("protocol")).transferMessage(e,a,t)},transferMeMessage:function(e,n,t){switch(e.get("protocol")){case"IRC":this.get("irc").transferMeMessage(e,n,t)}},leaveChannel:function(e,n){switch(e.get("protocol")){case"IRC":this.get("irc").leave(e,n)}},changeTopic:function(e,n,t){switch(e.get("protocol")){case"IRC":this.get("irc").changeTopic(e,n,t)}},updateChannelUserList:function(e){var n=this.getChannelById(e.actor["@id"])
n&&(n.set("connected",!0),Array.isArray(e.object.members)&&n.set("userList",e.object.members.sort()))},addUserToChannelUserList:function(e){var n=this.getChannelById(e.target["@id"])
n&&n.addUser(e.actor.displayName)},removeUserFromChannelUserList:function(e){var n=this.getChannelById(e.target["@id"])
n&&n.removeUser(e.actor.displayName)},getChannelById:function(e){var n=e.match(/(?:irc:\/\/)?(?:.+@)?(.+?)(?:\/|$)/)[1],t=this.get("spaces").findBy("server.hostname",n)
if(p(t))return void Ember.Logger.warn("Could not find space by hostname",n)
var a=t.get("channels").findBy("sockethubChannelId",e)
return p(a)?void Ember.Logger.warn("Could not find channel by sockethubChannelId",e):a},getChannel:function(e,n){var t=this.get("spaces").findBy("sockethubPersonId",e)
if(p(t))return void Ember.Logger.warn("Could not find space by sockethubPersonId",e)
var a=t.get("channels").findBy("sockethubChannelId",n)
return p(a)?void Ember.Logger.warn("Could not find channel by sockethubChannelId",n):a},updateUsername:function(e){if("object"===l(e.actor)){var n=e.actor["@id"],t=this.get("spaces").findBy("sockethubPersonId",n)
m(t)&&t.updateUsername(e.target.displayName)}},updateChannelTopic:function(e){var n=void 0
"object"===l(e.target)?n=e.target["@id"].match(/irc:\/\/(.+)\//)[1]:"string"==typeof e.actor&&(n=e.actor.match(/irc:\/\/.+@(.+)/)[1])
var t=this.get("spaces").findBy("server.hostname",n)
if(!p(t)){var a=t.get("channels").findBy("sockethubChannelId",e.target["@id"])
p(a)&&(Ember.Logger.warn("No channel for update topic message found. Creating it.",e),a=this.createChannel(t,e.target.displayName))
var s=a.get("topic"),r=e.object.topic
a.set("topic",r),m(s)&&r!==s&&!a.get("visible")&&Notification.requestPermission(function(){new Notification(a.name,{body:"New Topic: "+r})})}},instantiateChannels:function(e,n){var t=this
n.forEach(function(n){t.createChannel(e,n)})},createChannel:function(e,n){var a=this.getServiceForSockethubPlatform(e.get("protocol")),s=t.default.create({space:e,name:n,sockethubChannelId:a.generateChannelId(e,n)})
return this.joinChannel(e,s,"room"),e.get("channels").pushObject(s),this.get("storage").saveSpace(e),s.get("isLogged")&&this.loadLastMessages(e,s,o.default.utc(),2).catch(function(){}),s},loadLastMessages:function(e,n,t){var a=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:14,r=void 0
return r=n.get("searchedPreviousLogsUntilDate")?(0,o.default)(n.get("searchedPreviousLogsUntilDate")).subtract(s,"days"):o.default.utc().subtract(s,"days"),t.isBefore(r,"day")?void n.set("searchedPreviousLogsUntilDate",t):this.loadArchiveMessages(e,n,t).catch(function(){return a.loadLastMessages(e,n,t.subtract(1,"day"))})},loadArchiveMessages:function(e,n,t){var a=this,i=r.default.publicLogsUrl+"/"+e.get("name").toLowerCase()+"/channels/"+n.get("slug")+"/"
return i+=t.format("YYYY/MM/DD"),this.get("ajax").request(i,{type:"GET",dataType:"json"}).then(function(e){f(e,"today.messages").forEach(function(e){a.log("chat_message",e)
var t=s.default.create({type:"message-chat",date:new Date(e.timestamp),nickname:e.from,content:e.text})
n.addMessage(t)})
var t=f(e,"today.previous")
n.set("searchedPreviousLogsUntilDate",o.default.utc(t.replace(/\//g,"-")))}).catch(function(e){throw a.log("ajax-error","couldn't load archive document",e),e})},createUserChannel:function(e,n){var t=this.getServiceForSockethubPlatform(e.get("protocol")),s=a.default.create({space:e,name:n,sockethubChannelId:t.generateChannelId(e,n)})
return this.joinChannel(e,s,"person"),e.get("channels").pushObject(s),s},removeChannel:function(e,n){var t=e.get("channels").findBy("name",n)
return this.leaveChannel(e,t),e.get("channels").removeObject(t),this.get("storage").saveSpace(e),t},getServiceForSockethubPlatform:function(e){return this.get(e.dasherize())},handleSockethubCompleted:function(e){switch(this.log(e.context+"_completed",e),e["@type"]){case"join":var n=this.get("spaces").findBy("sockethubPersonId",e.actor["@id"])
p(n)&&(n=this.get("spaces").find(function(n){return n.get("previousSockethubPersonIds").includes(e.actor["@id"])})),p(n)?h.warn("Could not find space for join message",e):this.get(e.context).handleJoinCompleted(n,e)}},handleSockethubMessage:function(e){switch(this.log(e.context+"_message","SH message",e),e["@type"]){case"observe":"attendance"===e.object["@type"]&&this.updateChannelUserList(e)
break
case"join":this.handleChannelJoin(e)
break
case"leave":this.removeUserFromChannelUserList(e)
break
case"send":switch(e.object["@type"]){case"message":case"me":this.getServiceForSockethubPlatform(e.context).addMessageToChannel(e)}break
case"update":switch(e.object["@type"]){case"topic":this.updateChannelTopic(e)
break
case"address":this.updateUsername(e)
break
case"presence":this.get("xmpp").handlePresenceUpdate(e)
break
case"error":h.warn("Got error update message",e.actor["@id"],e.object.content)}}},handleChannelJoin:function(e){if(e.object["@type"]&&"error"===e.object["@type"]){var n=this.getChannel(e.target["@id"],e.actor["@id"])
m(n)?n.set("connected",!1):h.warn("Could not find channel for error message",e)}else this.addUserToChannelUserList(e)},handleSockethubFailure:function(e){this.log("sh_failure",e)},log:function(){var e;(e=this.get("logger")).log.apply(e,arguments)}})}),define("hyperchannel/services/ember-elsewhere",["exports","ember-elsewhere/services/ember-elsewhere"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/services/liquid-fire-transitions",["exports","liquid-fire/transition-map"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default}),define("hyperchannel/services/logger",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var n=Ember.Service
e.default=n.extend({enabled:!0,allowedTypes:["connection","error","join","leave","message","irc_message","xmpp_message","send","xmpp_completed","irc_completed","sh_completed","sh_failure","irc","xmpp","ajax-error","chat_message"],activeTypes:["connection","error","join","leave","send","sh_completed","xmpp_completed","irc_completed","sh_failure","irc","xmpp","message","irc_message","xmpp_message"],log:function(e){if(!this.get("allowedTypes").includes(e))throw new Error('You specified a unknown type: "'+e+'".')
if(this.get("activeTypes").includes(e)&&this.get("enabled")){var n=Array.prototype.slice.call(arguments)
n[0]="["+n[0]+"]",Ember.Logger.debug.apply(null,n)}},add:function(e){this.get("activeTypes").addObject(e)},remove:function(e){this.get("activeTypes").removeObject(e)},disable:function(){this.set("enabled",!1)},enable:function(){this.set("enabled",!0)}})}),define("hyperchannel/services/moment",["exports","hyperchannel/config/environment","ember-moment/services/moment"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({defaultFormat:Ember.get(n.default,"moment.outputFormat")})}),define("hyperchannel/services/remotestorage",["exports","hyperchannel/models/space","npm:remotestoragejs","npm:remotestorage-module-kosmos"],function(e,n,t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Service.extend({rsInstance:null,rs:function(){if(this.get("rsInstance"))return this.get("rsInstance")
var e=new t.default({modules:[a.default.default]})
return e.access.claim("kosmos","rw"),e.caching.enable("/kosmos/"),this.set("rsInstance",e),e}.property("rsInstance"),addDefaultSpace:function(){var e=window.prompt("Choose a nickname"),t={id:"freenode",name:"Freenode",protocol:"IRC",server:{hostname:"irc.freenode.net",secure:!0,port:7e3,nickname:e},channels:["#hackerbeach","#kosmos","#kosmos-dev","#kosmos-random","#sockethub"]}
return this.get("rs").kosmos.spaces.store(t).then(function(){Ember.Logger.debug("[remotestorage]","created/stored default space")
var e=t.channels
return delete t.channels,{space:n.default.create(t),channels:e}})},saveSpace:function(e){return this.get("rs").kosmos.spaces.store(e.serialize()).then(function(){return Ember.Logger.debug("[remotestorage]","saved space "+e.get("name")+" in RS")})},removeSpace:function(e){return this.get("rs").kosmos.spaces.remove(e.get("id")).then(function(){return Ember.Logger.debug("[remotestorage]","removed space "+e.get("name")+" from RS")})}})}),define("hyperchannel/services/sockethub-irc",["exports","hyperchannel/utils/channel-message-from-sockethub-object"],function(e,n){function t(e,n){var t={context:"irc",actor:e.get("sockethubPersonId")}
return Ember.$.extend({},t,n)}function a(e,n,a){return t(e,{"@type":"send",target:n,object:{"@type":arguments.length>3&&void 0!==arguments[3]?arguments[3]:"message",content:a}})}Object.defineProperty(e,"__esModule",{value:!0})
var s=Ember.inject.service,r=Ember.isEmpty,o=Ember.Logger
e.default=Ember.Service.extend({logger:s(),coms:s(),connect:function(e){var n={"@id":e.get("sockethubPersonId"),"@type":"person",displayName:e.get("server.nickname")}
o.debug("actor object",n),this.sockethub.ActivityStreams.Object.create(n)
var a=t(e,{object:{"@type":"credentials",nick:e.get("server.nickname"),server:e.get("server.hostname"),port:parseInt(e.get("server.port"),10),secure:e.get("server.secure")}})
this.log("irc","connecting to IRC network",a),this.sockethub.socket.emit("credentials",a)},handleJoinCompleted:function(e,n){var t=e.get("channels").findBy("sockethubChannelId",n.target["@id"])
t&&this.observeChannel(e,t)},join:function(e,n,a){switch(a){case"room":this.sockethub.ActivityStreams.Object.create({"@type":a,"@id":n.get("sockethubChannelId"),displayName:n.get("name")})
var s=t(e,{"@type":"join",target:n.get("sockethubChannelId"),object:{}})
this.log("irc","joining channel",s),this.sockethub.socket.emit("message",s)
break
case"person":n.set("connected",!0)}},transferMessage:function(e,n,t){var s=a(e,n,t)
this.log("send","sending message job",s),this.sockethub.socket.emit("message",s)},transferMeMessage:function(e,n,t){var s=a(e,n,t,"me")
this.log("send","sending message job",s),this.sockethub.socket.emit("message",s)},addMessageToChannel:function(e){var t=e.actor["@id"].match(/irc:\/\/.+@(.+)/)[1],a=this.get("coms.spaces").findBy("server.hostname",t)
if(r(a))return void o.warn("Could not find space for message",e)
var s=this.getChannelForMessage(a,e),i=(0,n.default)(e)
i.get("nickname")!==a.get("userNickname")&&s.addMessage(i)},leave:function(e,n){if(!n.get("isUserChannel")){this.sockethub.ActivityStreams.Object.create({"@type":"room","@id":n.get("sockethubChannelId"),displayName:n.get("name")})
var a=t(e,{"@type":"leave",target:n.get("sockethubChannelId"),object:{}})
this.log("leave","leaving channel",a),this.sockethub.socket.emit("message",a)}},changeTopic:function(e,n,a){var s=t(e,{"@type":"update",target:n.get("sockethubChannelId"),object:{"@type":"topic",topic:a}})
this.sockethub.socket.emit("message",s)},observeChannel:function(e,n){var a=t(e,{"@type":"observe",target:n.get("sockethubChannelId"),object:{"@type":"attendance"}})
this.log("irc","asking for attendance list",a),this.sockethub.socket.emit("message",a)},generateChannelId:function(e,n){return"irc://"+e.get("server.hostname")+"/"+n},getChannelForMessage:function(e,n){var t=void 0,a=void 0
return e.get("userNickname")===n.target.displayName?(t=n.actor.displayName||n.actor["@id"],(a=e.get("channels").findBy("name",t))||(a=this.get("coms").createUserChannel(e,t))):(t=n.target.displayName,(a=e.get("channels").findBy("name",t))||(a=this.get("coms").createChannel(e,t))),a},log:function(){var e;(e=this.get("logger")).log.apply(e,arguments)}})}),define("hyperchannel/services/sockethub-xmpp",["exports","hyperchannel/utils/channel-message-from-sockethub-object"],function(e,n){function t(e,n){var t={context:"xmpp",actor:e.get("sockethubPersonId")}
return Ember.$.extend({},t,n)}function a(e,n,a){return t(e,{"@type":"send",target:n,object:{"@type":arguments.length>3&&void 0!==arguments[3]?arguments[3]:"message",content:a}})}Object.defineProperty(e,"__esModule",{value:!0})
var s=Ember.inject.service,r=Ember.isEmpty,o=Ember.Logger
e.default=Ember.Service.extend({logger:s(),coms:s(),connect:function(e){var n=e.get("sockethubPersonId")
this.sockethub.ActivityStreams.Object.create({"@id":n,"@type":"person",displayName:e.get("server.nickname")})
var t={actor:n,context:"xmpp",object:{"@type":"credentials",username:e.get("server.username"),password:e.get("server.password"),server:e.get("server.hostname"),port:parseInt(e.get("server.port"),10),resource:"hyperchannel"}},a={"@type":"connect",context:"xmpp",actor:n}
this.log("xmpp","connecting to XMPP server..."),this.sockethub.socket.emit("credentials",t),this.sockethub.socket.emit("message",a)},handleJoinCompleted:function(e,n){var t=n.target["@id"].split("/")[0],a=e.get("channels").findBy("sockethubChannelId",t)
r(a)?o.warn("Could not find channel for join message",n):a.set("connected",!0)},join:function(e,n,a){this.sockethub.ActivityStreams.Object.create({"@type":a,"@id":n.get("sockethubChannelId"),displayName:n.get("name")})
var s=t(e,{"@type":"join",actor:{"@type":"person","@id":e.get("sockethubPersonId"),displayName:e.get("server.nickname")},target:{"@id":n.get("sockethubChannelId"),"@type":a}})
this.log("xmpp","joining channel",s),this.sockethub.socket.emit("message",s)},transferMessage:function(e,n,t){var s=a(e,n,t)
this.log("send","sending message job",s),this.sockethub.socket.emit("message",s)},handlePresenceUpdate:function(e){if("room"===e.target["@type"]){var n=e.target["@id"],t=this.get("coms.spaces").find(function(e){return e.get("sockethubChannelIds").includes(n)}),a=t.get("channels").findBy("sockethubChannelId",n)
a&&("offline"===e.object.presence?a.removeUser(e.actor.displayName):a.addUser(e.actor.displayName))}else o.debug("Presence update:",e.actor["@id"],e.object.presence,e.object.status)},addMessageToChannel:function(e){if(!r(e.object.content)){var t=this.getSpaceForMessage(e)
if(r(t))return void o.warn("Could not find space for message",e)
var a=this.getChannelForMessage(t,e),s=(0,n.default)(e)
s.get("nickname")!==t.get("userNickname")&&a.addMessage(s)}},generateChannelId:function(e,n){return n},getSpaceForMessage:function(e){var n=e.target["@id"]
return"room"===e.target["@type"]?this.get("coms.spaces").find(function(e){return e.get("sockethubChannelIds").includes(n)}):this.get("coms.spaces").findBy("sockethubPersonId",n)},getChannelForMessage:function(e,n){var t=n.target["@id"],a=void 0
return"room"===n.target["@type"]?(a=e.get("channels").findBy("sockethubChannelId",t))||(a=this.get("coms").createChannel(e,t)):(a=e.get("channels").findBy("sockethubChannelId",n.actor["@id"]))||(a=this.get("coms").createUserChannel(e,n.actor["@id"])),a},log:function(){var e;(e=this.get("logger")).log.apply(e,arguments)}})}),define("hyperchannel/storages/user-settings",["exports","ember-local-storage/local/object"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0})
var t=n.default.extend()
t.reopenClass({initialState:function(){return{nickname:null,currentSpace:"freenode",currentChannel:"kosmos"}}}),e.default=t}),define("hyperchannel/templates/application",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"ha6cu2aS",block:'{"symbols":[],"statements":[[4,"app-container",null,[["showGlobalMenu","showChannelMenu"],[[19,0,["showGlobalMenu"]],[19,0,["showChannelMenu"]]]],{"statements":[[0,"  "],[6,"div"],[9,"id","global"],[7],[0,"\\n    "],[6,"header"],[9,"id","sitename"],[7],[0,"\\n      "],[6,"h1"],[7],[0,"Kosmos"],[8],[0,"\\n    "],[8],[0,"\\n\\n    "],[6,"div"],[9,"class","main"],[7],[0,"\\n      "],[6,"nav"],[9,"id","channels"],[7],[0,"\\n        "],[1,[25,"channel-nav",null,[["spaces","joinChannel"],[[19,0,["spaces"]],[25,"route-action",["openNewChannel"],null]]]],false],[0,"\\n      "],[8],[0,"\\n    "],[8],[0,"\\n  "],[8],[0,"\\n\\n  "],[1,[18,"outlet"],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[1,[18,"modal-target"],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hyperchannel/templates/application.hbs"}})}),define("hyperchannel/templates/index",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"mEBCHNce",block:'{"symbols":[],"statements":[[6,"p"],[7],[0,"[index.hbs]"],[8],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hyperchannel/templates/index.hbs"}})}),define("hyperchannel/templates/settings",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"TsrB32NL",block:'{"symbols":["spacePreset","space"],"statements":[[6,"section"],[9,"id","settings"],[7],[0,"\\n  "],[6,"h2"],[7],[0,"Settings"],[8],[0,"\\n\\n  "],[6,"div"],[9,"class","content"],[7],[0,"\\n    "],[6,"h3"],[7],[0,"Spaces"],[8],[0,"\\n\\n"],[4,"each",[[19,0,["model","spaces"]]],null,{"statements":[[0,"      "],[6,"h3"],[7],[1,[19,2,["name"]],false],[8],[0,"\\n      "],[6,"button"],[9,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[3,"action",[[19,0,[]],"removeSpace",[19,2,[]]]],[7],[0,"delete"],[8],[0,"\\n      "],[6,"hr"],[7],[8],[0,"\\n"]],"parameters":[2]},null],[0,"\\n    "],[6,"h3"],[7],[0,"Presets"],[8],[0,"\\n\\n"],[4,"each",[[19,0,["model","spacePresets"]]],null,{"statements":[[0,"      "],[6,"h3"],[7],[1,[19,1,["name"]],false],[8],[0,"\\n      "],[6,"button"],[9,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[3,"action",[[19,0,[]],"addSpaceFromPreset",[19,1,[]]]],[7],[0,"add"],[8],[0,"\\n      "],[6,"hr"],[7],[8],[0,"\\n"]],"parameters":[1]},null],[0,"\\n    "],[6,"h3"],[7],[0,"Add new space"],[8],[0,"\\n    "],[6,"form"],[9,"name","add-space"],[3,"action",[[19,0,[]],"addSpace"],[["on"],["submit"]]],[7],[0,"\\n      "],[6,"p"],[7],[0,"\\n        "],[1,[25,"input",null,[["value","required","placeholder"],[[19,0,["newSpace","name"]],"required","Freenode"]]],false],[0,"\\n      "],[8],[0,"\\n      "],[6,"p"],[7],[0,"\\n        "],[1,[25,"input",null,[["value","required","placeholder"],[[19,0,["newSpace","server","hostname"]],"required","irc.servername.org"]]],false],[0,"\\n      "],[8],[0,"\\n      "],[6,"p"],[7],[0,"\\n        "],[1,[25,"input",null,[["value","required","placeholder"],[[19,0,["newSpace","server","port"]],"required","6667"]]],false],[0,"\\n      "],[8],[0,"\\n      "],[6,"p"],[7],[0,"\\n        "],[1,[25,"input",null,[["type","checked","id"],["checkbox",[19,0,["newSpace","server","secure"]],"tls-enabled"]]],false],[0,"\\n        "],[6,"label"],[9,"for","tls-enabled"],[7],[0,"Secure (TLS)"],[8],[0,"\\n      "],[8],[0,"\\n      "],[6,"p"],[7],[0,"\\n        "],[1,[25,"input",null,[["value","placeholder"],[[19,0,["newSpace","server","username"]],"username"]]],false],[0,"\\n      "],[8],[0,"\\n      "],[6,"p"],[7],[0,"\\n        "],[1,[25,"input",null,[["value","placeholder"],[[19,0,["newSpace","server","password"]],"password"]]],false],[0,"\\n      "],[8],[0,"\\n      "],[6,"p"],[7],[0,"\\n        "],[1,[25,"input",null,[["value","required","placeholder"],[[19,0,["newSpace","server","nickname"]],"required","nickname"]]],false],[0,"\\n      "],[8],[0,"\\n      "],[6,"p"],[7],[0,"\\n        "],[6,"input"],[9,"type","submit"],[9,"value","Save"],[7],[8],[0,"\\n      "],[8],[0,"\\n    "],[8],[0,"\\n\\n  "],[8],[0,"\\n"],[8],[0,"\\n\\n"],[4,"if",[[19,0,["showSpaceSettingModal"]]],null,{"statements":[[0,"  "],[1,[25,"to-elsewhere",null,[["named","send"],["modal",[25,"hash",null,[["body","onOutsideClick"],[[25,"component",["space-setting-modal"],[["settings","onSave","onCancel"],[[19,0,["selectedSpacePreset"]],[25,"action",[[19,0,[]],"saveSpace"],null],[25,"action",[[19,0,[]],[25,"mut",[[19,0,["selectedSpacePreset"]]],null],null],null]]]],[25,"action",[[19,0,[]],[25,"mut",[[19,0,["selectedSpacePreset"]]],null],null],null]]]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"hyperchannel/templates/settings.hbs"}})}),define("hyperchannel/templates/space/channel",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"pLDIIWbO",block:'{"symbols":[],"statements":[[1,[25,"channel-container",null,[["channel","newMessage","onMessage","onCommand","menu"],[[19,0,["model"]],[19,0,["newMessage"]],[25,"action",[[19,0,[]],"sendMessage"],null],[25,"action",[[19,0,[]],"executeCommand"],null],[25,"route-action",["menu"],null]]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hyperchannel/templates/space/channel.hbs"}})}),define("hyperchannel/templates/space/user_channel",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"62v+YcAP",block:'{"symbols":[],"statements":[[1,[25,"channel-container",null,[["channel","newMessage","onMessage","onCommand"],[[19,0,["model"]],[19,0,["newMessage"]],[25,"action",[[19,0,[]],"sendMessage"],null],[25,"action",[[19,0,[]],"executeCommand"],null]]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hyperchannel/templates/space/user_channel.hbs"}})}),define("hyperchannel/transitions/cross-fade",["exports","liquid-fire/transitions/cross-fade"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/transitions/default",["exports","liquid-fire/transitions/default"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})})
define("hyperchannel/transitions/explode",["exports","liquid-fire/transitions/explode"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/transitions/fade",["exports","liquid-fire/transitions/fade"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/transitions/flex-grow",["exports","liquid-fire/transitions/flex-grow"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/transitions/fly-to",["exports","liquid-fire/transitions/fly-to"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/transitions/move-over",["exports","liquid-fire/transitions/move-over"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/transitions/scale",["exports","liquid-fire/transitions/scale"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/transitions/scroll-then",["exports","liquid-fire/transitions/scroll-then"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/transitions/to-down",["exports","liquid-fire/transitions/to-down"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/transitions/to-left",["exports","liquid-fire/transitions/to-left"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/transitions/to-right",["exports","liquid-fire/transitions/to-right"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/transitions/to-up",["exports","liquid-fire/transitions/to-up"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/transitions/wait",["exports","liquid-fire/transitions/wait"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/utils/channel-message-from-sockethub-object",["exports","hyperchannel/models/message"],function(e,n){function t(e){return n.default.create({type:"me"===e.object["@type"]?"message-chat-me":"message-chat",date:new Date(e.published),nickname:e.actor.displayName||e.actor["@id"],content:e.object.content})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=t}),define("hyperchannel/config/environment",["ember"],function(e){try{var n="hyperchannel/config/environment",t=document.querySelector('meta[name="'+n+'"]').getAttribute("content"),a=JSON.parse(unescape(t)),s={default:a}
return Object.defineProperty(s,"__esModule",{value:!0}),s}catch(e){throw new Error('Could not read config from meta tag with name "'+n+'".')}}),runningTests||require("hyperchannel/app").default.create({name:"hyperchannel",version:"0.2.0+deb2dcf7"})

//# sourceMappingURL=hyperchannel.map