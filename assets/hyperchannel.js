"use strict"
define("hyperchannel/app",["exports","hyperchannel/resolver","ember-load-initializers","hyperchannel/config/environment"],function(e,n,t,s){Object.defineProperty(e,"__esModule",{value:!0})
var a=Ember.Application.extend({modulePrefix:s.default.modulePrefix,podModulePrefix:s.default.podModulePrefix,Resolver:n.default});(0,t.default)(a,s.default.modulePrefix),e.default=a}),define("hyperchannel/components/-lf-get-outlet-state",["exports","liquid-fire/components/-lf-get-outlet-state"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/components/app-container/component",["exports","ember-gestures/mixins/recognizers"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0})
var t=Ember.Component,s=Ember.$,a=Ember.computed
function r(e,n){return n.id===e||s(n).parents("#"+e).length>0}e.default=t.extend(n.default,{tagName:"div",classNames:["app-container"],classNameBindings:["showGlobalMenu:global-menu-open","showChannelMenu:channel-menu-open"],recognizers:"swipeleft swiperight tap",managerOptions:a("",function(){return{domEvents:!0,touchAction:"auto",inputClass:Hammer.SUPPORT_POINTER_EVENTS?Hammer.PointerEventInput:Hammer.TouchInput}}),swipeLeft:function(){this.set("showGlobalMenu",!1)},swipeRight:function(){this.set("showGlobalMenu",!0)},tap:function(e){!this.showGlobalMenu||r("channel-header",e.target)||r("global",e.target)||this.set("showGlobalMenu",!1)}})}),define("hyperchannel/components/app-container/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"tQfjRDft",block:'{"symbols":["&default"],"statements":[[13,1],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hyperchannel/components/app-container/template.hbs"}})}),define("hyperchannel/components/channel-container/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var n=Ember.$,t=Ember.Component,s=Ember.observer,a=Ember.run.scheduleOnce,r=Ember.inject.service
function o(){n("#channel-content").animate({scrollTop:n("#channel-content ul").height()},"500")}e.default=t.extend({elementId:"channel",newMessage:"",channel:null,scrollingDisabled:!1,coms:r(),messagesUpdated:s("channel.messages.[]",function(){this.scrollingDisabled||a("afterRender",o)}),didInsertElement:function(){this._super.apply(this,arguments),a("afterRender",o),a("afterRender",function(){Hammer(document.getElementById("channel-content")).on("swipe",function(){})})},actions:{processMessageOrCommand:function(){"/"===this.newMessage.substr(0,1)?this.onCommand(this.newMessage):this.onMessage(this.newMessage)},menu:function(e,n){this.menu(e,n)},loadPreviousMessages:function(){var e=this
this.set("scrollingDisabled",!0),this.coms.loadLastMessages(this.get("channel.space"),this.channel,this.get("channel.searchedPreviousLogsUntilDate")).catch(function(){}).finally(function(){e.set("scrollingDisabled",!1)})}}})}),define("hyperchannel/components/channel-container/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"UKMZhMzX",block:'{"symbols":["username","message"],"statements":[[6,"main"],[8],[0,"\\n  "],[6,"header"],[10,"id","channel-header"],[10,"onClick",""],[10,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[3,"action",[[21,0,[]],"menu","global","toggle"]],[8],[0,"\\n    "],[6,"h2"],[10,"id","channel-name"],[11,"class",[27,[[26,"if",[[22,["channel","connected"]],"connected","disconnected"],null]]]],[8],[1,[22,["channel","name"]],false],[9],[0,"\\n    "],[6,"p"],[10,"id","channel-title"],[8],[1,[22,["channel","formattedTopic"]],false],[9],[0,"\\n    "],[6,"nav"],[8],[0,"\\n      "],[6,"a"],[10,"href","#"],[10,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[8],[6,"i"],[10,"class","icon-megaphone"],[8],[9],[9],[6,"a"],[10,"href","#"],[10,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[8],[6,"i"],[10,"class","icon-mute"],[8],[9],[9],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n\\n  "],[6,"section"],[10,"id","channel-content"],[10,"class","main"],[8],[0,"\\n"],[4,"if",[[22,["channel","isLogged"]]],null,{"statements":[[0,"      "],[6,"a"],[10,"class","load-previous"],[10,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[3,"action",[[21,0,[]],"loadPreviousMessages"]],[8],[0,"\\n        Load previous messages\\n      "],[9],[0,"\\n"]],"parameters":[]},null],[0,"\\n    "],[6,"ul"],[8],[0,"\\n"],[4,"each",[[22,["channel","sortedMessages"]]],null,{"statements":[[0,"        "],[6,"li"],[8],[0,"\\n          "],[1,[26,"component",[[21,2,["type"]]],[["message"],[[21,2,[]]]]],false],[0,"\\n        "],[9],[0,"\\n"]],"parameters":[2]},{"statements":[[4,"if",[[22,["channel","isLogged"]]],null,{"statements":[[0,"          "],[6,"li"],[10,"class","no-messages discreet"],[8],[0,"No recent messages to display."],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[6,"li"],[10,"class","no-messages discreet"],[8],[0,"No Kosmos logs configured for this channel. "],[6,"a"],[10,"href","https://wiki.kosmos.org/Setting_up_channel_logs"],[10,"target","_blank"],[10,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[8],[0,"Learn more"],[9],[9],[0,"\\n"]],"parameters":[]}]],"parameters":[]}],[0,"    "],[9],[0,"\\n  "],[9],[0,"\\n\\n  "],[6,"footer"],[8],[0,"\\n    "],[6,"section"],[10,"id","new-message"],[8],[0,"\\n      "],[6,"form"],[3,"action",[[21,0,[]],"processMessageOrCommand"],[["on"],["submit"]]],[8],[0,"\\n        "],[1,[26,"channel-input-field",null,[["value","placeholder","name","id","autocomplete"],[[22,["newMessage"]],"Type a message and hit enter","chat-message","message-field","off"]]],false],[0,"\\n      "],[9],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n"],[9],[0,"\\n\\n"],[6,"aside"],[8],[0,"\\n  "],[6,"header"],[8],[0,"\\n    "],[6,"nav"],[8],[0,"\\n      "],[4,"link-to",["index"],[["class"],["active"]],{"statements":[[6,"i"],[10,"class","icon-users"],[8],[9]],"parameters":[]},null],[6,"a"],[10,"href","#"],[10,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[8],[6,"i"],[10,"class","icon-paperclip"],[8],[9],[9],[4,"link-to",["settings"],null,{"statements":[[6,"i"],[10,"class","icon-cog"],[8],[9]],"parameters":[]},null],[6,"a"],[10,"href","#"],[10,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[8],[6,"i"],[10,"class","icon-resize-enlarge"],[8],[9],[9],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n  "],[6,"section"],[10,"id","user-list"],[10,"class","main"],[8],[0,"\\n    "],[6,"ul"],[8],[0,"\\n"],[4,"each",[[22,["channel","userList"]]],null,{"statements":[[0,"      "],[6,"li"],[8],[1,[26,"link-to-username",null,[["username"],[[21,1,[]]]]],false],[9],[0,"\\n"]],"parameters":[1]},null],[0,"    "],[9],[0,"\\n  "],[9],[0,"\\n"],[9],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hyperchannel/components/channel-container/template.hbs"}})}),define("hyperchannel/components/channel-input-field/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var n=Ember.TextField
e.default=n.extend({keyUp:function(e){if(e.altKey)switch(e.key){case"k":this._insertAtCaret("")}},_insertAtCaret:function(e){var n=this.$().get(0)
if(document.selection)n.focus(),(n=document.selection.createRange()).text=e,n.focus()
else if(n.selectionStart||"0"===n.selectionStart){var t=n.selectionStart,s=n.selectionEnd,a=n.scrollTop
n.value=n.value.substring(0,t)+e+n.value.substring(s,n.value.length),n.focus(),n.selectionStart=t+e.length,n.selectionEnd=t+e.length,n.scrollTop=a}else n.value+=e,n.focus()}})}),define("hyperchannel/components/channel-nav/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var n=Ember.Component
e.default=n.extend({tagName:"ul"})}),define("hyperchannel/components/channel-nav/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"cAkHBsyM",block:'{"symbols":["space","channel"],"statements":[[4,"each",[[22,["spaces"]]],null,{"statements":[[0,"  "],[6,"li"],[8],[0,"\\n    "],[6,"h2"],[8],[4,"link-to",["space",[21,1,[]]],null,{"statements":[[1,[21,1,["name"]],false]],"parameters":[]},null],[9],[0,"\\n    "],[6,"ul"],[8],[0,"\\n"],[4,"each",[[21,1,["sortedChannels"]]],null,{"statements":[[0,"        "],[6,"li"],[11,"class",[27,[[26,"if",[[21,2,["connected"]],"connected","disconnected"],null]," ",[21,2,["unreadMessagesClass"]]]]],[8],[0,"\\n"],[4,"if",[[21,2,["isUserChannel"]]],null,{"statements":[[0,"            "],[4,"link-to",["space.user-channel",[21,1,[]],[21,2,[]]],null,{"statements":[[1,[21,2,["name"]],false]],"parameters":[]},null],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[4,"link-to",["space.channel",[21,1,[]],[21,2,[]]],null,{"statements":[[1,[21,2,["name"]],false]],"parameters":[]},null],[0,"\\n"]],"parameters":[]}],[0,"        "],[9],[0,"\\n"]],"parameters":[2]},null],[0,"      "],[6,"li"],[8],[0,"\\n        "],[6,"a"],[10,"class","join-channel"],[10,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[3,"action",[[21,0,[]],[26,"action",[[21,0,[]],[22,["joinChannel"]],[21,1,[]]],null]]],[8],[0,"+"],[9],[0,"\\n      "],[9],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[1]},null]],"hasEval":false}',meta:{moduleName:"hyperchannel/components/channel-nav/template.hbs"}})}),define("hyperchannel/components/date-headline/component",["exports","moment","hyperchannel/config/environment"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0})
var s=Ember.run.later,a=Ember.computed,r=Ember.Component
e.default=r.extend({classNames:["date-headline"],updateInterval:12e4,headline:a("message.date",function(){var e=this,a=(0,n.default)(this.get("message.date")),r=function(){"testing"===!t.default.environment&&s(function(){e.notifyPropertyChange("message.date")},e.updateInterval)}
return a.isSame((0,n.default)(),"day")?(r(),"Today"):a.isSame((0,n.default)().subtract(1,"day"),"day")?(r(),"Yesterday"):this.get("message.date").toLocaleDateString()})})}),define("hyperchannel/components/date-headline/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"fHZkRLss",block:'{"symbols":[],"statements":[[6,"h3"],[8],[1,[20,"headline"],false],[9],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hyperchannel/components/date-headline/template.hbs"}})}),define("hyperchannel/components/from-elsewhere",["exports","ember-elsewhere/components/from-elsewhere"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/components/illiquid-model",["exports","liquid-fire/components/illiquid-model"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/components/link-to-username/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var n=Ember.Component,t=Ember.computed,s=Ember.isPresent
e.default=n.extend({username:null,roles:null,init:function(){this._super.apply(this,arguments),this.set("roles",{"@":"op","%":"half-op","+":"voice"})},role:t("username","roles",function(){var e=this.roles[this.username[0]]
return s(e)?e:"normal"}),usernameWithoutPrefix:t("username","roles",function(){var e=RegExp("^[\\"+Object.keys(this.roles).join("\\")+"]")
return this.username.replace(e,"")})})}),define("hyperchannel/components/link-to-username/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"awUlmJDV",block:'{"symbols":[],"statements":[[4,"link-to",["space.user-channel",[22,["usernameWithoutPrefix"]]],[["class"],[[22,["role"]]]],{"statements":[[1,[20,"username"],false]],"parameters":[]},null],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hyperchannel/components/link-to-username/template.hbs"}})}),define("hyperchannel/components/liquid-bind",["exports","liquid-fire/components/liquid-bind"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/components/liquid-child",["exports","liquid-fire/components/liquid-child"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/components/liquid-container",["exports","liquid-fire/components/liquid-container"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/components/liquid-if",["exports","liquid-fire/components/liquid-if"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/components/liquid-measured",["exports","liquid-fire/components/liquid-measured"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"measure",{enumerable:!0,get:function(){return n.measure}})}),define("hyperchannel/components/liquid-outlet",["exports","liquid-fire/components/liquid-outlet"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/components/liquid-spacer",["exports","liquid-fire/components/liquid-spacer"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/components/liquid-sync",["exports","liquid-fire/components/liquid-sync"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/components/liquid-unless",["exports","liquid-fire/components/liquid-unless"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/components/liquid-versions",["exports","liquid-fire/components/liquid-versions"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/components/message-chat-me/component",["exports","hyperchannel/components/message-chat/component"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default.extend({classNames:["chat-message","chat-me-message"]})}),define("hyperchannel/components/message-chat-me/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"9URaVBgI",block:'{"symbols":[],"statements":[[6,"span"],[10,"class","username"],[11,"data-username",[22,["message","nickname"]],null],[8],[1,[22,["message","nickname"]],false],[9],[0,"\\n"],[6,"span"],[10,"class","message"],[8],[1,[20,"formattedContent"],false],[9],[0,"\\n\\n"]],"hasEval":false}',meta:{moduleName:"hyperchannel/components/message-chat-me/template.hbs"}})}),define("hyperchannel/components/message-chat/component",["exports","moment"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0})
var t=Ember.Component,s=Ember.computed,a=Ember.String.htmlSafe
e.default=t.extend({tagName:"div",classNames:["chat-message"],message:null,datetime:s("message.date",function(){return(0,n.default)(this.get("message.date")).format("YYYY-MM-DD[T]HH:mm")}),dateTitle:s("message.date",function(){return(0,n.default)(this.get("message.date")).format("YYYY-MM-DD [at] HH:mm")}),formattedContent:s("message.content",function(){var e=this.get("message.content"),n=void 0
return n=(n=e.match(/^(http)s?:\/\/.*(gif|png|jpg|jpeg)$/i)?'<br><a href="'+e+'" target="_blank" rel="nofollow noopener"><img src="'+e+'" class="from-image-url" alt="'+e+'"></a>':linkifyStr(e,{linkAttributes:{rel:"nofollow noopener"},validate:{url:function(e){return/^(http)s?:\/\//.test(e)},email:function(){return!1}}})).replace(/\u0003(\d+)/g,'<span class="color-$1">').replace(/"color-(\d)"/g,'"color-0$1"').replace(/\u0002/g,'<span class="bold">').replace(/\u001D/g,'<span class="italic">').replace(/\u000f/g,"</span>"),a(n)})})}),define("hyperchannel/components/message-chat/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"3OFQJjH1",block:'{"symbols":[],"statements":[[6,"span"],[10,"class","chat-message__username"],[11,"data-username",[22,["message","nickname"]],null],[8],[0,"\\n  "],[1,[22,["message","nickname"]],false],[0,":\\n"],[9],[0,"\\n\\n"],[6,"time"],[10,"class","chat-message__date"],[11,"datetime",[20,"datetime"],null],[11,"title",[20,"dateTitle"],null],[8],[0,"\\n  "],[1,[26,"moment-format",[[22,["message","date"]],"HH:mm"],null],false],[0,"\\n"],[9],[0,"\\n\\n"],[6,"span"],[10,"class","chat-message__message"],[8],[0,"\\n  "],[1,[20,"formattedContent"],false],[0,"\\n"],[9],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hyperchannel/components/message-chat/template.hbs"}})}),define("hyperchannel/components/modal-target/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var n=Ember.Component
e.default=n.extend({modalAnimation:function(){return this.lookup("explode").call(this,{pick:".modal-background",use:["fade",{maxOpacity:.5}]},{pick:".modal-dialog",use:"scale"})},actions:{outsideClick:function(e){e&&e.onOutsideClick&&e.onOutsideClick()}}})})
define("hyperchannel/components/modal-target/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"dwaeSRFX",block:'{"symbols":["modal","currentModal"],"statements":[[4,"from-elsewhere",null,[["name"],["modal"]],{"statements":[[4,"liquid-bind",[[21,1,[]]],[["containerless","use"],[true,[22,["modalAnimation"]]]],{"statements":[[4,"if",[[21,2,[]]],null,{"statements":[[0,"      "],[6,"div"],[10,"class","modal-container"],[8],[0,"\\n        "],[6,"div"],[10,"class","modal-background"],[11,"onclick",[26,"action",[[21,0,[]],"outsideClick",[21,2,[]]],null],null],[10,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[8],[9],[0,"\\n        "],[6,"div"],[10,"class","modal-dialog"],[8],[0,"\\n"],[4,"if",[[21,2,["body"]]],null,{"statements":[[0,"            "],[1,[26,"component",[[21,2,["body"]]],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[1,[26,"component",[[21,2,[]]],null],false],[0,"\\n"]],"parameters":[]}],[0,"        "],[9],[0,"\\n      "],[9],[0,"\\n"]],"parameters":[]},null]],"parameters":[2]},null]],"parameters":[1]},null],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hyperchannel/components/modal-target/template.hbs"}})}),define("hyperchannel/components/multiple-from-elsewhere",["exports","ember-elsewhere/components/multiple-from-elsewhere"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/components/notification-topic-change/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var n=Ember.Component
e.default=n.extend({tagName:"div",classNames:["topic-change-notification"]})}),define("hyperchannel/components/notification-topic-change/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"NgPJwxHa",block:'{"symbols":[],"statements":[[0,"Topic was changed to \\""],[1,[22,["message","content"]],false],[0,"\\" by "],[6,"span"],[10,"class","username"],[11,"data-username",[22,["message","nickname"]],null],[8],[1,[22,["message","nickname"]],false],[9],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hyperchannel/components/notification-topic-change/template.hbs"}})}),define("hyperchannel/components/space-setting-modal/component",["exports","hyperchannel/models/space"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0})
var t=Ember.Component
e.default=t.extend({settings:null,space:null,init:function(){this._super.apply(this,arguments)
var e=n.default.create()
e.setProperties(this.settings.serialize()),this.set("space",e)},actions:{save:function(){this.onSave(this.space)},cancel:function(){this.onCancel()}}})}),define("hyperchannel/components/space-setting-modal/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"4hI/2tEF",block:'{"symbols":[],"statements":[[6,"h1"],[8],[0,"Space Setting"],[9],[0,"\\n\\n"],[6,"form"],[10,"name","add-space"],[3,"action",[[21,0,[]],"save"],[["on"],["submit"]]],[8],[0,"\\n  "],[6,"p"],[8],[0,"\\n    "],[1,[26,"input",null,[["value","required","placeholder"],[[22,["space","protocol"]],"required","IRC"]]],false],[0,"\\n  "],[9],[0,"\\n  "],[6,"p"],[8],[0,"\\n    "],[1,[26,"input",null,[["value","required","placeholder"],[[22,["space","name"]],"required","Freenode"]]],false],[0,"\\n  "],[9],[0,"\\n  "],[6,"p"],[8],[0,"\\n    "],[1,[26,"input",null,[["value","required","placeholder"],[[22,["space","server","hostname"]],"required","irc.servername.org"]]],false],[0,"\\n  "],[9],[0,"\\n  "],[6,"p"],[8],[0,"\\n    "],[1,[26,"input",null,[["value","required","placeholder"],[[22,["space","server","port"]],"required","6667"]]],false],[0,"\\n  "],[9],[0,"\\n  "],[6,"p"],[8],[0,"\\n    "],[1,[26,"input",null,[["type","checked","id"],["checkbox",[22,["space","server","secure"]],"tls-enabled-modal"]]],false],[0,"\\n    "],[6,"label"],[10,"for","tls-enabled-modal"],[8],[0,"Secure (TLS)"],[9],[0,"\\n  "],[9],[0,"\\n  "],[6,"p"],[8],[0,"\\n    "],[1,[26,"input",null,[["value","placeholder"],[[22,["space","server","username"]],"username"]]],false],[0,"\\n  "],[9],[0,"\\n  "],[6,"p"],[8],[0,"\\n    "],[1,[26,"input",null,[["type","value","placeholder"],["password",[22,["space","server","password"]],"password"]]],false],[0,"\\n  "],[9],[0,"\\n  "],[6,"p"],[8],[0,"\\n    "],[1,[26,"input",null,[["value","required","placeholder"],[[22,["space","server","nickname"]],"required","nickname"]]],false],[0,"\\n  "],[9],[0,"\\n  "],[6,"p"],[8],[0,"\\n    "],[6,"input"],[10,"value","Save"],[10,"type","submit"],[8],[9],[0,"\\n  "],[9],[0,"\\n"],[9],[0,"\\n\\n"],[6,"button"],[10,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[3,"action",[[21,0,[]],"cancel"]],[8],[0,"Cancel"],[9],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hyperchannel/components/space-setting-modal/template.hbs"}})}),define("hyperchannel/components/to-elsewhere",["exports","ember-elsewhere/components/to-elsewhere"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/components/web-push-subscription/component",["exports","hyperchannel/utils/url-base64-to-uint8-array"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0})
var t=Ember.Component,s=Ember.computed
e.default=t.extend({botkaURL:null,username:null,subscribed:!1,webPushBaseURL:s("botkaURL",function(){return this.botkaURL+"/web-push"}),init:function(){var e=this
this._super.apply(this,arguments),navigator.serviceWorker.ready.then(function(e){return e.pushManager.getSubscription()}).then(function(n){n&&e.set("subscribed",!0)})},actions:{subscribe:function(){var e,t,s=this
navigator.serviceWorker.ready.then((e=regeneratorRuntime.mark(function e(t){var s,a,r
return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.webPushBaseURL+"/vapid-public-key")
case 2:return s=e.sent,e.next=5,s.text()
case 5:return a=e.sent,r=(0,n.default)(a),e.abrupt("return",t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:r}))
case 8:case"end":return e.stop()}},e,this)}),t=function(){var n=e.apply(this,arguments)
return new Promise(function(e,t){return function s(a,r){try{var o=n[a](r),i=o.value}catch(e){return void t(e)}if(!o.done)return Promise.resolve(i).then(function(e){s("next",e)},function(e){s("throw",e)})
e(i)}("next")})},function(e){return t.apply(this,arguments)}).bind(this)).then(function(e){return console.debug("Subscribed",e.endpoint),fetch(s.webPushBaseURL+"/register",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({user:s.username,subscription:e})})}).then(this.set("subscribed",!0))},unsubscribe:function(){var e=this
navigator.serviceWorker.ready.then(function(e){return e.pushManager.getSubscription()}).then(function(n){return n.unsubscribe().then(function(){return console.debug("Unsubscribed",n.endpoint),fetch(e.webPushBaseURL+"/unregister",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({subscription:n})})})}).then(this.set("subscribed",!1))}}})}),define("hyperchannel/components/web-push-subscription/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"oy6lwHHX",block:'{"symbols":[],"statements":[[6,"p"],[8],[0,"\\n  "],[6,"i"],[8],[0,"username:"],[9],[0," "],[1,[20,"username"],false],[6,"br"],[8],[9],[0,"\\n  "],[6,"i"],[8],[0,"base URL:"],[9],[0," "],[1,[20,"webPushBaseURL"],false],[0,"\\n"],[9],[0,"\\n"],[6,"p"],[8],[0,"\\n"],[4,"if",[[22,["subscribed"]]],null,{"statements":[[0,"    "],[6,"button"],[10,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[3,"action",[[21,0,[]],"unsubscribe"]],[8],[0,"Disable push notifications"],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[6,"button"],[10,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[3,"action",[[21,0,[]],"subscribe"]],[8],[0,"Receive push notifications"],[9],[0,"\\n"]],"parameters":[]}],[9]],"hasEval":false}',meta:{moduleName:"hyperchannel/components/web-push-subscription/template.hbs"}})}),define("hyperchannel/controllers/application",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var n=Ember.Controller,t=Ember.computed.alias,s=Ember.inject.service
e.default=n.extend({coms:s(),spaces:t("coms.spaces"),showGlobalMenu:!1,showChannelMenu:!1})}),define("hyperchannel/controllers/index",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var n=Ember.Controller,t=Ember.inject.controller
e.default=n.extend({application:t()})}),define("hyperchannel/controllers/settings",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var n=Ember.Controller,t=Ember.inject.controller,s=Ember.inject.service,a=Ember.computed.notEmpty
e.default=n.extend({application:t(),coms:s(),storage:s("remotestorage"),newSpace:null,selectedSpacePreset:null,showSpaceSettingModal:a("selectedSpacePreset"),actions:{addSpaceFromPreset:function(e){this.set("selectedSpacePreset",e)},saveSpace:function(e){var n=this
this.set("selectedSpacePreset",null),this.storage.saveSpace(e).then(function(){n.coms.connectAndAddSpace(e)})}}})}),define("hyperchannel/controllers/space",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var n=Ember.Controller
e.default=n.extend({})}),define("hyperchannel/controllers/space/base_channel",["exports","hyperchannel/models/message"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0})
var t=Ember.Controller,s=Ember.inject.controller,a=Ember.inject.service,r=Ember.isPresent,o=Ember.Logger
e.default=t.extend({newMessage:null,space:s(),coms:a(),storage:a("remotestorage"),createMessage:function(e,t){return n.default.create({type:t,date:new Date,nickname:this.get("space.model.server.nickname"),content:e})},actions:{sendMessage:function(e){var n=this.createMessage(e,"message-chat")
this.coms.transferMessage(this.get("space.model"),this.model,n.get("content")),this.get("model.messages").pushObject(n),this.set("newMessage",null)},executeCommand:function(e){var n=e.substr(1),t=n.split(" "),s=t[0];["help","join","leave","me","msg","part","topic"].includes(s.toLowerCase())?this.send(s+"Command",t.slice(1)):o.warn("[channel]","Unknown command",n),this.set("newMessage",null)},joinCommand:function(e){var n=this.get("space.model"),t=this.coms.createChannel(n,e[0])
this.storage.saveSpace(n),this.transitionToRoute("space.channel",n,t)},partCommand:function(){var e=this.get("space.model"),n=this.get("model.name")
this.coms.removeChannel(e,n)
var t=e.get("channels.lastObject")
r(t)?this.transitionToRoute("space.channel",e,t):this.transitionToRoute("space",e)},leaveCommand:function(){this.send("partCommand")},helpCommand:function(){},meCommand:function(e){var n=e.join(" "),t=this.createMessage(n,"message-chat-me")
this.coms.transferMeMessage(this.get("space.model"),this.get("model.sockethubChannelId"),t.get("content")),this.get("model.messages").pushObject(t)},msgCommand:function(e){var n=e.shift()
this.coms.createUserChannel(this.get("space.model"),n)},topicCommand:function(e){var n=this.model,t=e.join(" ")
this.coms.changeTopic(this.get("space.model"),n,t)}}})}),define("hyperchannel/controllers/space/channel",["exports","hyperchannel/controllers/space/base_channel"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default.extend({})}),define("hyperchannel/controllers/space/user_channel",["exports","hyperchannel/controllers/space/base_channel"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default.extend({})}),define("hyperchannel/ember-gestures/recognizers/pan",["exports","ember-gestures/recognizers/pan"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default}),define("hyperchannel/ember-gestures/recognizers/pinch",["exports","ember-gestures/recognizers/pinch"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default}),define("hyperchannel/ember-gestures/recognizers/press",["exports","ember-gestures/recognizers/press"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default}),define("hyperchannel/ember-gestures/recognizers/rotate",["exports","ember-gestures/recognizers/rotate"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default}),define("hyperchannel/ember-gestures/recognizers/swipe",["exports","ember-gestures/recognizers/swipe"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default}),define("hyperchannel/ember-gestures/recognizers/swipeleft",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={include:[],exclude:[],options:{threshold:25,direction:Hammer.DIRECTION_LEFT},eventName:"swipeleft",recognizer:"swipe"}}),define("hyperchannel/ember-gestures/recognizers/swiperight",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={include:[],exclude:[],options:{threshold:25,direction:Hammer.DIRECTION_RIGHT},eventName:"swiperight",recognizer:"swipe"}}),define("hyperchannel/ember-gestures/recognizers/tap",["exports","ember-gestures/recognizers/tap"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/ember-gestures/recognizers/vertical-pan",["exports","ember-gestures/recognizers/vertical-pan"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/ember-gestures/recognizers/vertical-swipe",["exports","ember-gestures/recognizers/vertical-swipe"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/event_dispatcher",["exports","ember-gestures/event_dispatcher","hyperchannel/config/environment"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0})
var s=Ember.assign||Ember.merge,a=s({},{emberUseCapture:!1,removeTracking:!1,useFastPaths:!1})
a=s(a,t.default.gestures),e.default=n.default.extend({useCapture:a.emberUseCapture,removeTracking:a.removeTracking,useFastPaths:a.useFastPaths})}),define("hyperchannel/helpers/app-version",["exports","hyperchannel/config/environment","ember-cli-app-version/utils/regexp"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0}),e.appVersion=a
var s=n.default.APP.version
function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
return n.hideSha?s.match(t.versionRegExp)[0]:n.hideVersion?s.match(t.shaRegExp)[0]:s}e.default=Ember.Helper.helper(a)}),define("hyperchannel/helpers/is-after",["exports","ember-moment/helpers/is-after"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/helpers/is-before",["exports","ember-moment/helpers/is-before"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})})
define("hyperchannel/helpers/is-between",["exports","ember-moment/helpers/is-between"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/helpers/is-same-or-after",["exports","ember-moment/helpers/is-same-or-after"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/helpers/is-same-or-before",["exports","ember-moment/helpers/is-same-or-before"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/helpers/is-same",["exports","ember-moment/helpers/is-same"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/helpers/lf-lock-model",["exports","liquid-fire/helpers/lf-lock-model"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"lfLockModel",{enumerable:!0,get:function(){return n.lfLockModel}})}),define("hyperchannel/helpers/lf-or",["exports","liquid-fire/helpers/lf-or"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"lfOr",{enumerable:!0,get:function(){return n.lfOr}})}),define("hyperchannel/helpers/moment-add",["exports","ember-moment/helpers/moment-add"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/helpers/moment-calendar",["exports","ember-moment/helpers/moment-calendar"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/helpers/moment-diff",["exports","ember-moment/helpers/moment-diff"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/helpers/moment-duration",["exports","ember-moment/helpers/moment-duration"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/helpers/moment-format",["exports","ember-moment/helpers/moment-format"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/helpers/moment-from-now",["exports","ember-moment/helpers/moment-from-now"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/helpers/moment-from",["exports","ember-moment/helpers/moment-from"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/helpers/moment-subtract",["exports","ember-moment/helpers/moment-subtract"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/helpers/moment-to-date",["exports","ember-moment/helpers/moment-to-date"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/helpers/moment-to-now",["exports","ember-moment/helpers/moment-to-now"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/helpers/moment-to",["exports","ember-moment/helpers/moment-to"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/helpers/moment-unix",["exports","ember-moment/helpers/unix"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/helpers/moment",["exports","ember-moment/helpers/moment"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/helpers/now",["exports","ember-moment/helpers/now"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/helpers/route-action",["exports","ember-route-action-helper/helpers/route-action"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/helpers/unix",["exports","ember-moment/helpers/unix"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/initializers/app-version",["exports","ember-cli-app-version/initializer-factory","hyperchannel/config/environment"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0})
var s=t.default.APP,a=s.name,r=s.version
e.default={name:"App Version",initialize:(0,n.default)(a,r)}}),define("hyperchannel/initializers/container-debug-adapter",["exports","ember-resolver/resolvers/classic/container-debug-adapter"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"container-debug-adapter",initialize:function(){var e=arguments[1]||arguments[0]
e.register("container-debug-adapter:main",n.default),e.inject("container-debug-adapter:main","namespace","application:main")}}}),define("hyperchannel/initializers/ember-hammertime",["exports","ember-hammertime/components/component"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ember-hammertime",initialize:function(){}}}),define("hyperchannel/initializers/export-application-global",["exports","hyperchannel/config/environment"],function(e,n){function t(){var e=arguments[1]||arguments[0]
if(!1!==n.default.exportApplicationGlobal){var t
if("undefined"!=typeof window)t=window
else if("undefined"!=typeof global)t=global
else{if("undefined"==typeof self)return
t=self}var s,a=n.default.exportApplicationGlobal
s="string"==typeof a?a:Ember.String.classify(n.default.modulePrefix),t[s]||(t[s]=e,e.reopen({willDestroy:function(){this._super.apply(this,arguments),delete t[s]}}))}}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default={name:"export-application-global",initialize:t}}),define("hyperchannel/initializers/hammer",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"hammer",initialize:function(){delete Hammer.defaults.cssProps.userSelect}}}),define("hyperchannel/initializers/liquid-fire",["exports","liquid-fire/ember-internals","liquid-fire/velocity-ext"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),(0,n.initialize)(),e.default={name:"liquid-fire",initialize:function(){}}}),define("hyperchannel/initializers/sockethub",["exports","hyperchannel/config/environment"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0})
var t=new SockethubClient(io(n.default.sockethubURL,{path:"/sockethub"}))
e.default={name:"sockethub",initialize:function(e){e.register("sockethub:client",t,{instantiate:!1,singleton:!0}),e.inject("controller","sockethub","sockethub:client"),e.inject("route","sockethub","sockethub:client"),e.inject("component","sockethub","sockethub:client"),e.inject("service","sockethub","sockethub:client")}}}),define("hyperchannel/instance-initializers/ember-gestures",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var n=Ember.getOwner
e.default={name:"ember-gestures",initialize:function(e){"function"==typeof e.lookup?e.lookup("service:-gestures"):n(e).lookup("service:-gestures")}}})
define("hyperchannel/instance-initializers/remotestorage",["exports"],function(e){function n(e){var n=e.lookup("service:remotestorage").get("rs")
window.remoteStorage=n;["ready","not-connected","connected","disconnected","error","features-loaded","connecting","authing","wire-busy","wire-done","network-offline","network-online"].forEach(function(e){n.on(e,function(){return console.debug("[remotestorage] RS event: "+e)})})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=n,e.default={name:"remotestorage",initialize:n}}),define("hyperchannel/models/base_channel",["exports","hyperchannel/models/message","moment"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0})
var s=Ember.Object,a=Ember.computed,r=Ember.isPresent
e.default=s.extend({space:null,name:"",userList:null,messages:null,connected:!1,sockethubChannelId:null,topic:null,unreadMessages:!1,unreadMentions:!1,visible:!1,init:function(){this._super.apply(this,arguments),this.set("messages",[]),this.set("userList",[])},isLogged:a("space.loggedChannels.[]","name",function(){var e=this,n=this.get("space.loggedChannels").find(function(n){return n===e.name})
return r(n)}),slug:a("name",function(){return this.name.replace(/#/g,"")}),unreadMessagesClass:a("visible","unreadMessages","unreadMentions",function(){return this.visible||!this.unreadMessages?null:this.unreadMentions?"unread-mentions":"unread-messages"}),sortedMessages:a("messages.@each.date",function(){return this.messages.sortBy("date")}),addDateHeadline:function(e){var s=(0,t.default)(e.get("date")).startOf("day").toDate()
if(!this.messages.find(function(e){return"date-headline"===e.get("type")&&e.get("date").toString()===s.toString()})){var a=n.default.create({type:"date-headline",date:s})
this.messages.pushObject(a)}},addMessage:function(e){this.addDateHeadline(e),this.messages.pushObject(e),this.visible||(this.set("unreadMessages",!0),e.get("content").match(this.get("space.userNickname"))&&this.set("unreadMentions",!0))},addUser:function(e){this.userList.includes(e)||this.userList.pushObject(e)},removeUser:function(e){this.userList.removeObject(e)}})}),define("hyperchannel/models/channel",["exports","hyperchannel/models/base_channel"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0})
var t=Ember.String.htmlSafe,s=Ember.computed
e.default=n.default.extend({searchedPreviousLogsUntilDate:null,formattedTopic:s("topic",function(){if(null!==this.topic){var e=linkifyStr(this.topic,{defaultProtocol:"https",linkAttributes:{rel:"nofollow"}})
return new t(e)}return""})})}),define("hyperchannel/models/message",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var n=Ember.Object
e.default=n.extend({type:null,date:null,nickname:null,content:null})}),define("hyperchannel/models/space",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var n=Ember.computed.alias,t=Ember.computed.sort,s=Ember.Object,a=Ember.computed,r=Ember.isPresent
e.default=s.extend({name:null,protocol:"IRC",server:null,channels:null,botkaURL:null,previousSockethubPersonIds:null,channelSorting:null,sortedChannels:t("channels","channelSorting"),init:function(){this.set("channelSorting",["name"]),this.set("channels",[]),this.set("previousSockethubPersonIds",[]),this.set("server",{hostname:null,port:7e3,secure:!0,username:null,password:null,nickname:null,nickServ:{password:null}}),this._super.apply(this,arguments)},channelNames:a("channels.@each.name",function(){return this.channels.mapBy("name")}),sockethubChannelIds:a("channels.@each.sockethubChannelId",function(){return this.channels.mapBy("sockethubChannelId")}),loggedChannels:a("name","protocol",function(){return"Freenode"===this.name&&"IRC"===this.protocol?["#5apps","#kosmos","#kosmos-dev","#remotestorage","#hackerbeach","#unhosted","#sockethub","#opensourcedesign","#openknot","#emberjs","#indieweb","#mastodon"]:[]}),userNickname:n("server.nickname"),updateUsername:function(e){switch(this.previousSockethubPersonIds.pushObject(this.sockethubPersonId),this.protocol){case"IRC":this.set("server.nickname",e)
break
case"XMPP":this.set("server.username",e)}},sockethubPersonId:a("protocol","server.{hostname,username,nickname}",function(){var e=void 0
switch(this.protocol){case"IRC":e="irc://"+this.get("server.nickname")+"@"+this.get("server.hostname")
break
case"XMPP":e=this.get("server.username")+"/hyperchannel"}return e}),serialize:function(){var e=this,n={id:this.id||this.name.dasherize(),name:this.name,protocol:this.protocol,server:{hostname:this.get("server.hostname"),port:parseInt(this.get("server.port"),10),secure:this.get("server.secure"),nickname:this.get("server.nickname")},channels:this.channelNames||[],botkaURL:this.botkaURL||null}
return["username","password","nickname"].forEach(function(t){r(e.get("server."+t))&&(n.server[t]=e.get("server."+t))}),n}})}),define("hyperchannel/models/user_channel",["exports","hyperchannel/models/base_channel"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default.extend({isUserChannel:!0})}),define("hyperchannel/resolver",["exports","ember-resolver"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default}),define("hyperchannel/router",["exports","hyperchannel/config/environment"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0})
var t=Ember.Router.extend({location:n.default.locationType,rootURL:n.default.rootURL})
t.map(function(){this.route("space",{path:"/:id"},function(){this.route("channel",{path:"/channel/:slug"}),this.route("user-channel",{path:"/user/:slug"})}),this.route("settings")}),e.default=t}),define("hyperchannel/routes/application",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var n=Ember.Route,t=Ember.inject.service,s=Ember.isEmpty
e.default=n.extend({logger:t(),coms:t(),storage:t("remotestorage"),beforeModel:function(){this._super.apply(this,arguments)},model:function(){return this.coms.setupListeners(),this.coms.instantiateSpacesAndChannels()},actions:{menu:function(e,n){var t="show"+e.capitalize()+"Menu"
switch(n){case"show":this.controller.set(t,!0)
break
case"hide":this.controller.set(t,!1)
break
case"toggle":this.controller.toggleProperty(t)}},openNewChannel:function(e){var n=window.prompt("Join channel")
if(!s(n)){"IRC"!==e.get("protocol")||n.match(/^#/)||(n="#"+n)
var t=this.coms.createChannel(e,n)
this.storage.saveSpace(e),this.transitionTo("space.channel",e,t)}}}})}),define("hyperchannel/routes/index",["exports","ember-local-storage","hyperchannel/config/environment"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0})
var s=Ember.Route
e.default=s.extend({userSettings:(0,n.storageFor)("user-settings"),redirect:function(){var e=this.get("userSettings.currentSpace")||t.default.defaultSpaceId,n=this.get("userSettings.currentChannel")||"kosmos"
e&&n&&this.transitionTo("space.channel",e,n)}})}),define("hyperchannel/routes/settings",["exports","hyperchannel/models/space","hyperchannel/config/environment"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0})
var s=Ember.Route,a=Ember.inject.service,r=Ember.isEmpty,o=Ember.RSVP,i=Ember.Logger
e.default=s.extend({storage:a("remotestorage"),coms:a(),model:function(){var e=this.get("storage.rs").kosmos.spaces.getAll().then(function(e){var t=[]
return r(e)?t:(Object.keys(e).forEach(function(s){var a=n.default.create()
a.setProperties(e[s]),t.push(a)}),t)},function(e){i.error(e)})
return o.hash({spaces:e,spacePresets:t.default.spacePresets.map(function(e){var t=n.default.create()
return t.setProperties(e),t})})},setupController:function(e){this._super.apply(this,arguments),e.set("newSpace",n.default.create())},actions:{addSpace:function(){var e=this,n=this.controller.get("newSpace")
n.set("id",n.get("name").dasherize()),this.storage.saveSpace(n).then(function(){e.coms.connectAndAddSpace(n),e.modelFor("settings").spaces.pushObject(n)},function(e){i.error("error saving in RS",n,e)})},removeSpace:function(e){var n=this
this.storage.removeSpace(e).then(function(){n.modelFor("settings").spaces.removeObject(e)},function(n){i.error("error deleting from RS",e,n)})}}})}),define("hyperchannel/routes/space",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var n=Ember.inject.service,t=Ember.Route
e.default=t.extend({coms:n(),model:function(e){return this.coms.get("spaces").findBy("id",e.id)}})}),define("hyperchannel/routes/space/base_channel",["exports","ember-local-storage"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0})
var t=Ember.$,s=Ember.Route,a=Ember.inject.service,r=Ember.run.scheduleOnce,o=Ember.run.later
e.default=s.extend({coms:a(),userSettings:(0,n.storageFor)("user-settings"),model:function(e){var n=this.modelFor("space"),t=n.get("channels").findBy("slug",e.slug)
return t||(t=this.createChannelOrUserChannel(n,e.slug)),t},setupController:function(e,n){this._super(e,n),r("afterRender",function(){window.innerWidth>900&&t("input#message-field").focus()})},actions:{didTransition:function(){var e=this,n=this.modelFor("space"),t=this.controller.get("model")
this.set("userSettings.currentSpace",n.get("id")),this.set("userSettings.currentChannel",t.get("slug")),this.get("coms.spaces").forEach(function(e){e.get("channels").setEach("visible",!1)}),t.set("visible",!0),t.set("unreadMessages",!1),t.set("unreadMentions",!1),o(this,function(){return e.send("menu","global","hide")},500)}}})}),define("hyperchannel/routes/space/channel",["exports","hyperchannel/routes/space/base_channel"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default.extend({createChannelOrUserChannel:function(e,n){return this.coms.createChannel(e,"#"+n)}})}),define("hyperchannel/routes/space/user_channel",["exports","hyperchannel/routes/space/base_channel"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default.extend({createChannelOrUserChannel:function(e,n){return this.coms.createUserChannel(e,n)}})}),define("hyperchannel/services/-gestures",["exports","hyperchannel/config/environment","ember-gestures/services/-gestures"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0})
var s=Ember.assign||Ember.merge,a=s({},{useCapture:!1})
a=s(a,n.default.gestures),e.default=t.default.extend({useCapture:a.useCapture})}),define("hyperchannel/services/ajax",["exports","ember-ajax/services/ajax"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/services/coms",["exports","hyperchannel/models/space","hyperchannel/models/channel","hyperchannel/models/user_channel","hyperchannel/models/message","hyperchannel/config/environment","moment","ember-local-storage"],function(e,n,t,s,a,r,o,i){Object.defineProperty(e,"__esModule",{value:!0})
var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=Ember.Service,u=Ember.inject.service,d=Ember.RSVP,p=Ember.isPresent,h=Ember.isEmpty,m=Ember.get
e.default=c.extend({ajax:u(),logger:u(),userSettings:(0,i.storageFor)("user-settings"),storage:u("remotestorage"),irc:u("sockethub-irc"),xmpp:u("sockethub-xmpp"),spaces:null,setupListeners:function(){this.sockethub.socket.on("completed",this.handleSockethubCompleted.bind(this)),this.sockethub.socket.on("message",this.handleSockethubMessage.bind(this)),this.sockethub.socket.on("failure",this.handleSockethubFailure.bind(this))},instantiateSpacesAndChannels:function(){var e=this
this.set("spaces",[])
var t=this.get("storage.rs")
return new d.Promise(function(s,a){t.kosmos.spaces.getAll().then(function(t){h(Object.keys(t))?(console.debug("No space data found in RS. Adding default space..."),e.storage.addDefaultSpace().then(function(n){e.connectAndAddSpace(n.space),e.instantiateChannels(n.space,n.channels),s()})):(Object.keys(t).forEach(function(s){var a=n.default.create()
a.setProperties({id:s,name:t[s].name,protocol:t[s].protocol,server:t[s].server,botkaURL:t[s].botkaURL}),e.connectAndAddSpace(a),e.instantiateChannels(a,t[s].channels)}),s())},function(n){e.log("error","couldn'd load spaces from RS",n),a()})})},connectServer:function(e){this.getServiceForSockethubPlatform(e.get("protocol")).connect(e)},connectAndAddSpace:function(e){this.connectServer(e),this.spaces.pushObject(e)},joinChannel:function(e,n,t){this.getServiceForSockethubPlatform(e.get("protocol")).join(e,n,t)},transferMessage:function(e,n,t){var s={"@id":n.get("sockethubChannelId"),"@type":n.get("isUserChannel")?"person":"room",displayName:n.get("name")}
this.getServiceForSockethubPlatform(e.get("protocol")).transferMessage(e,s,t)},transferMeMessage:function(e,n,t){switch(e.get("protocol")){case"IRC":this.irc.transferMeMessage(e,n,t)}},leaveChannel:function(e,n){switch(e.get("protocol")){case"IRC":this.irc.leave(e,n)}},changeTopic:function(e,n,t){switch(e.get("protocol")){case"IRC":this.irc.changeTopic(e,n,t)}},updateChannelUserList:function(e){var n=void 0
switch(e.context){case"irc":n=this.getChannelById(e.actor["@id"])
break
case"xmpp":n=this.getChannel(e.target["@id"],e.actor["@id"])}n&&(n.set("connected",!0),Array.isArray(e.object.members)&&n.set("userList",e.object.members.sort()))},addUserToChannelUserList:function(e){var n=this.getChannelById(e.target["@id"])
n&&n.addUser(e.actor.displayName)},removeUserFromChannelUserList:function(e){var n=this.getChannelById(e.target["@id"])
n&&n.removeUser(e.actor.displayName)},getChannelById:function(e){var n=e.match(/(?:irc:\/\/)?(?:.+@)?(.+?)(?:\/|$)/)[1],t=this.spaces.findBy("server.hostname",n)
if(h(t))console.warn("Could not find space by hostname",n)
else{var s=t.get("channels").findBy("sockethubChannelId",e)
if(!h(s))return s
console.warn("Could not find channel by sockethubChannelId",e)}},getChannel:function(e,n){var t=this.spaces.findBy("sockethubPersonId",e)
if(h(t))console.warn("Could not find space by sockethubPersonId",e)
else{var s=t.get("channels").findBy("sockethubChannelId",n)
if(!h(s))return s
console.warn("Could not find channel by sockethubChannelId",n)}},updateUsername:function(e){if("object"===l(e.actor)){var n=e.actor["@id"],t=this.spaces.findBy("sockethubPersonId",n)
p(t)&&t.updateUsername(e.target.displayName)}},updateChannelTopic:function(e){var n=void 0
"object"===l(e.target)?n=e.target["@id"].match(/irc:\/\/(.+)\//)[1]:"string"==typeof e.actor&&(n=e.actor.match(/irc:\/\/.+@(.+)/)[1])
var t=this.spaces.findBy("server.hostname",n)
if(!h(t)){var s=t.get("channels").findBy("sockethubChannelId",e.target["@id"])
h(s)&&(console.warn("No channel for update topic message found. Creating it.",e),s=this.createChannel(t,e.target.displayName))
var a=s.get("topic"),r=e.object.topic
s.set("topic",r),p(a)&&r!==a&&!s.get("visible")&&Notification.requestPermission(function(){new Notification(s.name,{body:"New Topic: "+r})})}},instantiateChannels:function(e,n){var t=this
n.forEach(function(n){t.createChannel(e,n)})},createChannel:function(e,n){var s=this.getServiceForSockethubPlatform(e.get("protocol")),a=t.default.create({space:e,name:n,sockethubChannelId:s.generateChannelId(e,n)})
return this.joinChannel(e,a,"room"),e.get("channels").pushObject(a),this.storage.saveSpace(e),a.get("isLogged")&&this.loadLastMessages(e,a,o.default.utc(),2).catch(function(){}),a},loadLastMessages:function(e,n,t){var s=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:14,r=void 0
if(r=n.get("searchedPreviousLogsUntilDate")?(0,o.default)(n.get("searchedPreviousLogsUntilDate")).subtract(a,"days"):o.default.utc().subtract(a,"days"),!t.isBefore(r,"day"))return this.loadArchiveMessages(e,n,t).catch(function(){return s.loadLastMessages(e,n,t.subtract(1,"day"))})
n.set("searchedPreviousLogsUntilDate",t)},loadArchiveMessages:function(e,n,t){var s=this,i=r.default.publicLogsUrl+"/"+e.get("name").toLowerCase()+"/channels/"+n.get("slug")+"/"
return i+=t.format("YYYY/MM/DD"),this.ajax.request(i,{type:"GET",dataType:"json"}).then(function(e){m(e,"today.messages").forEach(function(e){s.log("chat_message",e)
var t=a.default.create({type:"message-chat",date:new Date(e.timestamp),nickname:e.from,content:e.text})
n.addMessage(t)})
var t=m(e,"today.previous")
n.set("searchedPreviousLogsUntilDate",o.default.utc(t.replace(/\//g,"-")))}).catch(function(e){throw s.log("ajax-error","couldn't load archive document",e),e})},createUserChannel:function(e,n){var t=this.getServiceForSockethubPlatform(e.get("protocol")),a=s.default.create({space:e,name:n,sockethubChannelId:t.generateChannelId(e,n)})
return this.joinChannel(e,a,"person"),e.get("channels").pushObject(a),a},removeChannel:function(e,n){var t=e.get("channels").findBy("name",n)
return this.leaveChannel(e,t),e.get("channels").removeObject(t),this.storage.saveSpace(e),t},getServiceForSockethubPlatform:function(e){return this.get(e.dasherize())},handleSockethubCompleted:function(e){switch(this.log(e.context+"_completed",e),e["@type"]){case"join":var n=this.spaces.findBy("sockethubPersonId",e.actor["@id"])
h(n)&&(n=this.spaces.find(function(n){return n.get("previousSockethubPersonIds").includes(e.actor["@id"])})),h(n)?console.warn("Could not find space for join message",e):this.get(e.context).handleJoinCompleted(n,e)}},handleSockethubMessage:function(e){switch(this.log(e.context+"_message","SH message",e),e["@type"]){case"observe":"attendance"===e.object["@type"]&&this.updateChannelUserList(e)
break
case"join":this.handleChannelJoin(e)
break
case"leave":this.removeUserFromChannelUserList(e)
break
case"send":switch(e.object["@type"]){case"message":case"me":this.getServiceForSockethubPlatform(e.context).addMessageToChannel(e)}break
case"update":switch(e.object["@type"]){case"topic":this.updateChannelTopic(e)
break
case"address":this.updateUsername(e)
break
case"presence":this.xmpp.handlePresenceUpdate(e)
break
case"error":console.warn("Got error update message",e.actor["@id"],e.object.content)}}},handleChannelJoin:function(e){if(e.object["@type"]&&"error"===e.object["@type"]){var n=this.getChannel(e.target["@id"],e.actor["@id"])
p(n)?n.set("connected",!1):console.warn("Could not find channel for error message",e)}else this.addUserToChannelUserList(e)},handleSockethubFailure:function(e){this.log("sh_failure",e)},log:function(){var e;(e=this.logger).log.apply(e,arguments)}})}),define("hyperchannel/services/ember-elsewhere",["exports","ember-elsewhere/services/ember-elsewhere"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/services/liquid-fire-transitions",["exports","liquid-fire/transition-map"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default}),define("hyperchannel/services/logger",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0})
var n=Ember.Service
e.default=n.extend({enabled:!0,allowedTypes:null,activeTypes:null,init:function(){this._super.apply(this,arguments),this.set("allowedTypes",["connection","error","join","leave","message","irc_message","xmpp_message","send","xmpp_completed","irc_completed","sh_completed","sh_failure","irc","xmpp","ajax-error","chat_message"]),this.set("activeTypes",["connection","error","join","leave","send","sh_completed","xmpp_completed","irc_completed","sh_failure","irc","xmpp","message","irc_message","xmpp_message"])},log:function(e){if(!this.allowedTypes.includes(e))throw new Error('You specified a unknown type: "'+e+'".')
if(this.activeTypes.includes(e)&&this.enabled){var n=Array.prototype.slice.call(arguments)
n[0]="["+n[0]+"]",console.debug.apply(null,n)}},add:function(e){this.activeTypes.addObject(e)},remove:function(e){this.activeTypes.removeObject(e)},disable:function(){this.set("enabled",!1)},enable:function(){this.set("enabled",!0)}})}),define("hyperchannel/services/moment",["exports","ember-moment/services/moment","hyperchannel/config/environment"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0})
var s=Ember.get
e.default=n.default.extend({defaultFormat:s(t.default,"moment.outputFormat")})}),define("hyperchannel/services/remotestorage",["exports","hyperchannel/models/space","npm:remotestoragejs","npm:remotestorage-module-kosmos","hyperchannel/config/environment"],function(e,n,t,s,a){Object.defineProperty(e,"__esModule",{value:!0})
var r=Ember.Service
e.default=r.extend({rs:null,init:function(){this._super.apply(this,arguments)
var e=new t.default({modules:[s.default.default]})
e.access.claim("kosmos","rw"),e.caching.enable("/kosmos/"),this.set("rs",e)},addDefaultSpace:function(){var e=a.default.spacePresets.find(function(e){return e.id===a.default.defaultSpaceId}),t={id:e.id,name:e.name,protocol:e.protocol,server:e.server,channels:["#hackerbeach","#kosmos","#kosmos-dev","#kosmos-random","#sockethub"],botkaURL:e.botkaURL}
return t.server.nickname=window.prompt("Choose a nickname"),this.rs.kosmos.spaces.store(t).then(function(){console.debug("[remotestorage]","created/stored default space")
var e=t.channels
delete t.channels
var s=n.default.create()
return s.setProperties(t),{space:s,channels:e}})},saveSpace:function(e){return this.rs.kosmos.spaces.store(e.serialize()).then(function(){return console.debug("[remotestorage]","saved space "+e.get("name")+" in RS")})},removeSpace:function(e){return this.rs.kosmos.spaces.remove(e.get("id")).then(function(){return console.debug("[remotestorage]","removed space "+e.get("name")+" from RS")})}})}),define("hyperchannel/services/sockethub-irc",["exports","hyperchannel/utils/channel-message-from-sockethub-object"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0})
var t=Ember.$,s=Ember.Service,a=Ember.inject.service,r=Ember.isEmpty,o=Ember.Logger
function i(e,n){var s={context:"irc",actor:e.get("sockethubPersonId")}
return t.extend({},s,n)}function l(e,n,t){return i(e,{"@type":"send",target:n,object:{"@type":arguments.length>3&&void 0!==arguments[3]?arguments[3]:"message",content:t}})}e.default=s.extend({logger:a(),coms:a(),connect:function(e){var n={"@id":e.get("sockethubPersonId"),"@type":"person",displayName:e.get("server.nickname")}
o.debug("actor object",n),this.sockethub.ActivityStreams.Object.create(n)
var t=i(e,{object:{"@type":"credentials",nick:e.get("server.nickname"),server:e.get("server.hostname"),port:parseInt(e.get("server.port"),10),secure:e.get("server.secure")}})
this.log("irc","connecting to IRC network",t),this.sockethub.socket.emit("credentials",t)},handleJoinCompleted:function(e,n){var t=e.get("channels").findBy("sockethubChannelId",n.target["@id"])
t&&this.observeChannel(e,t)},join:function(e,n,t){switch(t){case"room":this.sockethub.ActivityStreams.Object.create({"@type":t,"@id":n.get("sockethubChannelId"),displayName:n.get("name")})
var s=i(e,{"@type":"join",target:n.get("sockethubChannelId"),object:{}})
this.log("irc","joining channel",s),this.sockethub.socket.emit("message",s)
break
case"person":n.set("connected",!0)}},transferMessage:function(e,n,t){var s=l(e,n,t)
this.log("send","sending message job",s),this.sockethub.socket.emit("message",s)},transferMeMessage:function(e,n,t){var s=l(e,n,t,"me")
this.log("send","sending message job",s),this.sockethub.socket.emit("message",s)},addMessageToChannel:function(e){var t=e.actor["@id"].match(/irc:\/\/.+@(.+)/)[1],s=this.get("coms.spaces").findBy("server.hostname",t)
if(r(s))o.warn("Could not find space for message",e)
else{var a=this.getChannelForMessage(s,e),i=(0,n.default)(e)
i.get("nickname")!==s.get("userNickname")&&a.addMessage(i)}},leave:function(e,n){if(!n.get("isUserChannel")){this.sockethub.ActivityStreams.Object.create({"@type":"room","@id":n.get("sockethubChannelId"),displayName:n.get("name")})
var t=i(e,{"@type":"leave",target:n.get("sockethubChannelId"),object:{}})
this.log("leave","leaving channel",t),this.sockethub.socket.emit("message",t)}},changeTopic:function(e,n,t){var s=i(e,{"@type":"update",target:n.get("sockethubChannelId"),object:{"@type":"topic",topic:t}})
this.sockethub.socket.emit("message",s)},observeChannel:function(e,n){var t=i(e,{"@type":"observe",target:n.get("sockethubChannelId"),object:{"@type":"attendance"}})
this.log("irc","asking for attendance list",t),this.sockethub.socket.emit("message",t)},generateChannelId:function(e,n){return"irc://"+e.get("server.hostname")+"/"+n},getChannelForMessage:function(e,n){var t=void 0,s=void 0
return e.get("userNickname")===n.target.displayName?(t=n.actor.displayName||n.actor["@id"],(s=e.get("channels").findBy("name",t))||(s=this.coms.createUserChannel(e,t))):(t=n.target.displayName,(s=e.get("channels").findBy("name",t))||(s=this.coms.createChannel(e,t))),s},log:function(){var e;(e=this.logger).log.apply(e,arguments)}})}),define("hyperchannel/services/sockethub-xmpp",["exports","hyperchannel/utils/channel-message-from-sockethub-object"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0})
var t=Ember.$,s=Ember.Service,a=Ember.inject.service,r=Ember.isEmpty,o=Ember.Logger
function i(e,n){var s={context:"xmpp",actor:e.get("sockethubPersonId")}
return t.extend({},s,n)}e.default=s.extend({logger:a(),coms:a(),connect:function(e){var n=e.get("sockethubPersonId")
this.sockethub.ActivityStreams.Object.create({"@id":n,"@type":"person",displayName:e.get("server.nickname")})
var t={actor:n,context:"xmpp",object:{"@type":"credentials",username:e.get("server.username"),password:e.get("server.password"),server:e.get("server.hostname"),port:parseInt(e.get("server.port"),10),resource:"hyperchannel"}},s={"@type":"connect",context:"xmpp",actor:n}
this.log("xmpp","connecting to XMPP server..."),this.sockethub.socket.emit("credentials",t),this.sockethub.socket.emit("message",s)},handleJoinCompleted:function(e,n){var t=n.target["@id"].split("/")[0],s=e.get("channels").findBy("sockethubChannelId",t)
s?this.observeChannel(e,s):o.warn("Could not find channel for join message",n)},join:function(e,n,t){this.sockethub.ActivityStreams.Object.create({"@type":t,"@id":n.get("sockethubChannelId"),displayName:n.get("name")})
var s=i(e,{"@type":"join",actor:{"@type":"person","@id":e.get("sockethubPersonId"),displayName:e.get("server.nickname")},target:{"@id":n.get("sockethubChannelId"),"@type":t}})
this.log("xmpp","joining channel",s),this.sockethub.socket.emit("message",s)},transferMessage:function(e,n,t){var s=function(e,n,t){return i(e,{"@type":"send",target:n,object:{"@type":arguments.length>3&&void 0!==arguments[3]?arguments[3]:"message",content:t}})}(e,n,t)
this.log("send","sending message job",s),this.sockethub.socket.emit("message",s)},handlePresenceUpdate:function(e){if("room"===e.target["@type"]){var n=e.target["@id"],t=this.get("coms.spaces").find(function(e){return e.get("sockethubChannelIds").includes(n)}).get("channels").findBy("sockethubChannelId",n)
t&&("offline"===e.object.presence?t.removeUser(e.actor.displayName):t.addUser(e.actor.displayName))}else o.debug("Presence update:",e.actor["@id"],e.object.presence,e.object.status)},addMessageToChannel:function(e){if(!r(e.object.content)){var t=this.getSpaceForMessage(e)
if(r(t))o.warn("Could not find space for message",e)
else{var s=this.getChannelForMessage(t,e),a=(0,n.default)(e)
a.get("nickname")!==t.get("userNickname")&&s.addMessage(a)}}},observeChannel:function(e,n){var t=i(e,{"@type":"observe",target:n.get("sockethubChannelId"),object:{"@type":"attendance"}})
this.log("xmpp","asking for attendance list",t),this.sockethub.socket.emit("message",t)},generateChannelId:function(e,n){return n},getSpaceForMessage:function(e){var n=e.target["@id"]
return"room"===e.target["@type"]?this.get("coms.spaces").find(function(e){return e.get("sockethubChannelIds").includes(n)}):this.get("coms.spaces").findBy("sockethubPersonId",n)},getChannelForMessage:function(e,n){var t=n.target["@id"],s=void 0
return"room"===n.target["@type"]?(s=e.get("channels").findBy("sockethubChannelId",t))||(s=this.coms.createChannel(e,t)):(s=e.get("channels").findBy("sockethubChannelId",n.actor["@id"]))||(s=this.coms.createUserChannel(e,n.actor["@id"])),s},log:function(){var e;(e=this.logger).log.apply(e,arguments)}})}),define("hyperchannel/storages/user-settings",["exports","ember-local-storage/local/object","hyperchannel/config/environment"],function(e,n,t){Object.defineProperty(e,"__esModule",{value:!0})
var s=n.default.extend()
s.reopenClass({initialState:function(){return{nickname:null,currentSpace:t.default.defaultSpaceId,currentChannel:"kosmos"}}}),e.default=s}),define("hyperchannel/templates/application",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"QlsdI72x",block:'{"symbols":[],"statements":[[4,"app-container",null,[["showGlobalMenu","showChannelMenu"],[[22,["showGlobalMenu"]],[22,["showChannelMenu"]]]],{"statements":[[0,"  "],[6,"div"],[10,"id","global"],[8],[0,"\\n    "],[6,"header"],[10,"id","sitename"],[8],[0,"\\n      "],[6,"h1"],[8],[0,"Kosmos"],[9],[0,"\\n    "],[9],[0,"\\n\\n    "],[6,"div"],[10,"class","main"],[8],[0,"\\n      "],[6,"nav"],[10,"id","channels"],[8],[0,"\\n        "],[1,[26,"channel-nav",null,[["spaces","joinChannel"],[[22,["spaces"]],[26,"route-action",["openNewChannel"],null]]]],false],[0,"\\n      "],[9],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n\\n  "],[1,[20,"outlet"],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[1,[20,"modal-target"],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hyperchannel/templates/application.hbs"}})}),define("hyperchannel/templates/settings",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"v4YHZi2h",block:'{"symbols":["spacePreset","space"],"statements":[[6,"section"],[10,"id","settings"],[8],[0,"\\n  "],[6,"h2"],[8],[0,"Settings"],[9],[0,"\\n\\n  "],[6,"div"],[10,"class","content"],[8],[0,"\\n    "],[6,"h3"],[8],[0,"Spaces"],[9],[0,"\\n\\n"],[4,"each",[[22,["model","spaces"]]],null,{"statements":[[0,"      "],[6,"h3"],[8],[1,[21,2,["name"]],false],[9],[0,"\\n      "],[6,"button"],[10,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[3,"action",[[21,0,[]],"removeSpace",[21,2,[]]]],[8],[0,"delete"],[9],[0,"\\n      "],[6,"hr"],[8],[9],[0,"\\n"]],"parameters":[2]},null],[0,"\\n    "],[6,"h3"],[8],[0,"Presets"],[9],[0,"\\n\\n"],[4,"each",[[22,["model","spacePresets"]]],null,{"statements":[[0,"      "],[6,"h3"],[8],[1,[21,1,["name"]],false],[9],[0,"\\n      "],[6,"button"],[10,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[3,"action",[[21,0,[]],"addSpaceFromPreset",[21,1,[]]]],[8],[0,"add"],[9],[0,"\\n      "],[6,"hr"],[8],[9],[0,"\\n"]],"parameters":[1]},null],[0,"\\n    "],[6,"h3"],[8],[0,"Add new space"],[9],[0,"\\n    "],[6,"form"],[10,"name","add-space"],[3,"action",[[21,0,[]],"addSpace"],[["on"],["submit"]]],[8],[0,"\\n      "],[6,"p"],[8],[0,"\\n        "],[1,[26,"input",null,[["value","required","placeholder"],[[22,["newSpace","name"]],"required","Freenode"]]],false],[0,"\\n      "],[9],[0,"\\n      "],[6,"p"],[8],[0,"\\n        "],[1,[26,"input",null,[["value","required","placeholder"],[[22,["newSpace","server","hostname"]],"required","irc.servername.org"]]],false],[0,"\\n      "],[9],[0,"\\n      "],[6,"p"],[8],[0,"\\n        "],[1,[26,"input",null,[["value","required","placeholder"],[[22,["newSpace","server","port"]],"required","6667"]]],false],[0,"\\n      "],[9],[0,"\\n      "],[6,"p"],[8],[0,"\\n        "],[1,[26,"input",null,[["type","checked","id"],["checkbox",[22,["newSpace","server","secure"]],"tls-enabled"]]],false],[0,"\\n        "],[6,"label"],[10,"for","tls-enabled"],[8],[0,"Secure (TLS)"],[9],[0,"\\n      "],[9],[0,"\\n      "],[6,"p"],[8],[0,"\\n        "],[1,[26,"input",null,[["value","placeholder"],[[22,["newSpace","server","username"]],"username"]]],false],[0,"\\n      "],[9],[0,"\\n      "],[6,"p"],[8],[0,"\\n        "],[1,[26,"input",null,[["type","value","placeholder"],["password",[22,["newSpace","server","password"]],"password"]]],false],[0,"\\n      "],[9],[0,"\\n      "],[6,"p"],[8],[0,"\\n        "],[1,[26,"input",null,[["value","required","placeholder"],[[22,["newSpace","server","nickname"]],"required","nickname"]]],false],[0,"\\n      "],[9],[0,"\\n      "],[6,"p"],[8],[0,"\\n        "],[6,"input"],[10,"value","Save"],[10,"type","submit"],[8],[9],[0,"\\n      "],[9],[0,"\\n    "],[9],[0,"\\n\\n  "],[9],[0,"\\n"],[9],[0,"\\n\\n"],[4,"if",[[22,["showSpaceSettingModal"]]],null,{"statements":[[0,"  "],[1,[26,"to-elsewhere",null,[["named","send"],["modal",[26,"hash",null,[["body","onOutsideClick"],[[26,"component",["space-setting-modal"],[["settings","onSave","onCancel"],[[22,["selectedSpacePreset"]],[26,"action",[[21,0,[]],"saveSpace"],null],[26,"action",[[21,0,[]],[26,"mut",[[22,["selectedSpacePreset"]]],null],null],null]]]],[26,"action",[[21,0,[]],[26,"mut",[[22,["selectedSpacePreset"]]],null],null],null]]]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"hyperchannel/templates/settings.hbs"}})}),define("hyperchannel/templates/space/channel",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"Tk5LhyHO",block:'{"symbols":[],"statements":[[1,[26,"channel-container",null,[["channel","newMessage","onMessage","onCommand","menu"],[[22,["model"]],[22,["newMessage"]],[26,"action",[[21,0,[]],"sendMessage"],null],[26,"action",[[21,0,[]],"executeCommand"],null],[26,"route-action",["menu"],null]]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hyperchannel/templates/space/channel.hbs"}})}),define("hyperchannel/templates/space/index",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"geipFWFu",block:'{"symbols":[],"statements":[[6,"section"],[10,"id","space"],[8],[0,"\\n  "],[6,"header"],[8],[0,"\\n    "],[6,"h2"],[8],[1,[22,["model","name"]],false],[9],[0,"\\n    "],[6,"p"],[10,"class","discreet"],[8],[1,[22,["model","server","hostname"]],false],[9],[0,"\\n  "],[9],[0,"\\n  "],[6,"div"],[10,"class","content"],[8],[0,"\\n    "],[6,"p"],[8],[0,"\\n      "],[1,[26,"web-push-subscription",null,[["botkaURL","username"],[[22,["model","botkaURL"]],[22,["model","userNickname"]]]]],false],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n"],[9],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hyperchannel/templates/space/index.hbs"}})})
define("hyperchannel/templates/space/user_channel",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"pICutvdZ",block:'{"symbols":[],"statements":[[1,[26,"channel-container",null,[["channel","newMessage","onMessage","onCommand"],[[22,["model"]],[22,["newMessage"]],[26,"action",[[21,0,[]],"sendMessage"],null],[26,"action",[[21,0,[]],"executeCommand"],null]]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hyperchannel/templates/space/user_channel.hbs"}})}),define("hyperchannel/transitions/cross-fade",["exports","liquid-fire/transitions/cross-fade"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/transitions/default",["exports","liquid-fire/transitions/default"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/transitions/explode",["exports","liquid-fire/transitions/explode"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/transitions/fade",["exports","liquid-fire/transitions/fade"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/transitions/flex-grow",["exports","liquid-fire/transitions/flex-grow"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/transitions/fly-to",["exports","liquid-fire/transitions/fly-to"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/transitions/move-over",["exports","liquid-fire/transitions/move-over"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/transitions/scale",["exports","liquid-fire/transitions/scale"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/transitions/scroll-then",["exports","liquid-fire/transitions/scroll-then"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/transitions/to-down",["exports","liquid-fire/transitions/to-down"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/transitions/to-left",["exports","liquid-fire/transitions/to-left"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/transitions/to-right",["exports","liquid-fire/transitions/to-right"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/transitions/to-up",["exports","liquid-fire/transitions/to-up"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/transitions/wait",["exports","liquid-fire/transitions/wait"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/utils/channel-message-from-sockethub-object",["exports","hyperchannel/models/message"],function(e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){return n.default.create({type:"me"===e.object["@type"]?"message-chat-me":"message-chat",date:new Date(e.published),nickname:e.actor.displayName||e.actor["@id"],content:e.object.content})}}),define("hyperchannel/utils/url-base64-to-uint8-array",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){for(var n="=".repeat((4-e.length%4)%4),t=(e+n).replace(/-/g,"+").replace(/_/g,"/"),s=window.atob(t),a=new Uint8Array(s.length),r=0;r<s.length;++r)a[r]=s.charCodeAt(r)
return a}}),define("hyperchannel/config/environment",[],function(){try{var e="hyperchannel/config/environment",n=document.querySelector('meta[name="'+e+'"]').getAttribute("content"),t={default:JSON.parse(unescape(n))}
return Object.defineProperty(t,"__esModule",{value:!0}),t}catch(n){throw new Error('Could not read config from meta tag with name "'+e+'".')}}),runningTests||require("hyperchannel/app").default.create({name:"hyperchannel",version:"0.3.0+f9b4d7f0"})

//# sourceMappingURL=hyperchannel.map