"use strict";define("hyperchannel/app",["exports","ember","hyperchannel/resolver","ember-load-initializers","hyperchannel/config/environment"],function(e,n,t,a,r){var l=void 0;n.default.MODEL_FACTORY_INJECTIONS=!0,l=n.default.Application.extend({modulePrefix:r.default.modulePrefix,podModulePrefix:r.default.podModulePrefix,Resolver:t.default}),(0,a.default)(l,r.default.modulePrefix),e.default=l}),define("hyperchannel/components/app-container/component",["exports","ember","ember-gestures/mixins/recognizers"],function(e,n,t){function a(e,t){return t.id===e||n.default.$(t).parents("#"+e).length>0}e.default=n.default.Component.extend(t.default,{tagName:"div",classNames:["app-container"],classNameBindings:["showGlobalMenu:global-menu-open","showChannelMenu:channel-menu-open"],recognizers:"swipeleft swiperight tap",swipeLeft:function(){this.set("showGlobalMenu",!1)},swipeRight:function(){this.set("showGlobalMenu",!0)},tap:function(e){!this.get("showGlobalMenu")||a("channel-header",e.target)||a("global",e.target)||this.set("showGlobalMenu",!1)}})}),define("hyperchannel/components/app-container/template",["exports"],function(e){e.default=Ember.HTMLBars.template(function(){return{meta:{revision:"Ember@2.8.3",loc:{source:null,start:{line:1,column:0},end:{line:2,column:0}},moduleName:"hyperchannel/components/app-container/template.hbs"},isEmpty:!1,arity:0,cachedFragment:null,hasRendered:!1,buildFragment:function(e){var n=e.createDocumentFragment(),t=e.createComment("");e.appendChild(n,t);var t=e.createTextNode("\n");return e.appendChild(n,t),n},buildRenderNodes:function(e,n,t){var a=new Array(1);return a[0]=e.createMorphAt(n,0,0,t),e.insertBoundary(n,0),a},statements:[["content","yield",["loc",[null,[1,0],[1,9]]],0,0,0,0]],locals:[],templates:[]}}())}),define("hyperchannel/components/app-version",["exports","ember-cli-app-version/components/app-version","hyperchannel/config/environment"],function(e,n,t){var a=t.default.APP.name,r=t.default.APP.version;e.default=n.default.extend({version:r,name:a})}),define("hyperchannel/components/channel-container/component",["exports","ember"],function(e,n){function t(){n.default.$("#channel-content").animate({scrollTop:n.default.$("#channel-content ul").height()},"500")}e.default=n.default.Component.extend({elementId:"channel",newMessage:"",channel:null,messagesUpdated:n.default.observer("channel.messages.[]",function(){n.default.run.scheduleOnce("afterRender",t)}),actions:{processMessageOrCommand:function(){"/"===this.get("newMessage").substr(0,1)?this.attrs.onCommand(this.get("newMessage")):this.attrs.onMessage(this.get("newMessage"))},menu:function(e,n){this.sendAction("menu",e,n)}}})}),define("hyperchannel/components/channel-container/template",["exports"],function(e){e.default=Ember.HTMLBars.template(function(){var e=function(){return{meta:{revision:"Ember@2.8.3",loc:{source:null,start:{line:12,column:4},end:{line:16,column:4}},moduleName:"hyperchannel/components/channel-container/template.hbs"},isEmpty:!1,arity:1,cachedFragment:null,hasRendered:!1,buildFragment:function(e){var n=e.createDocumentFragment(),t=e.createTextNode("      ");e.appendChild(n,t);var t=e.createElement("li"),a=e.createTextNode("\n        ");e.appendChild(t,a);var a=e.createComment("");e.appendChild(t,a);var a=e.createTextNode("\n      ");e.appendChild(t,a),e.appendChild(n,t);var t=e.createTextNode("\n");return e.appendChild(n,t),n},buildRenderNodes:function(e,n,t){var a=new Array(1);return a[0]=e.createMorphAt(e.childAt(n,[1]),1,1),a},statements:[["inline","component",[["get","message.type",["loc",[null,[14,20],[14,32]]],0,0,0,0]],["message",["subexpr","@mut",[["get","message",["loc",[null,[14,41],[14,48]]],0,0,0,0]],[],[],0,0]],["loc",[null,[14,8],[14,50]]],0,0]],locals:["message"],templates:[]}}(),n=function(){return{meta:{revision:"Ember@2.8.3",loc:{source:null,start:{line:44,column:6},end:{line:44,column:67}},moduleName:"hyperchannel/components/channel-container/template.hbs"},isEmpty:!1,arity:0,cachedFragment:null,hasRendered:!1,buildFragment:function(e){var n=e.createDocumentFragment(),t=e.createElement("i");return e.setAttribute(t,"class","icon-users"),e.appendChild(n,t),n},buildRenderNodes:function(){return[]},statements:[],locals:[],templates:[]}}(),t=function(){return{meta:{revision:"Ember@2.8.3",loc:{source:null,start:{line:44,column:125},end:{line:44,column:172}},moduleName:"hyperchannel/components/channel-container/template.hbs"},isEmpty:!1,arity:0,cachedFragment:null,hasRendered:!1,buildFragment:function(e){var n=e.createDocumentFragment(),t=e.createElement("i");return e.setAttribute(t,"class","icon-cog"),e.appendChild(n,t),n},buildRenderNodes:function(){return[]},statements:[],locals:[],templates:[]}}(),a=function(){var e=function(){return{meta:{revision:"Ember@2.8.3",loc:{source:null,start:{line:50,column:12},end:{line:50,column:65}},moduleName:"hyperchannel/components/channel-container/template.hbs"},isEmpty:!1,arity:0,cachedFragment:null,hasRendered:!1,buildFragment:function(e){var n=e.createDocumentFragment(),t=e.createComment("");return e.appendChild(n,t),n},buildRenderNodes:function(e,n,t){var a=new Array(1);return a[0]=e.createMorphAt(n,0,0,t),e.insertBoundary(n,0),e.insertBoundary(n,null),a},statements:[["content","username",["loc",[null,[50,53],[50,65]]],0,0,0,0]],locals:[],templates:[]}}();return{meta:{revision:"Ember@2.8.3",loc:{source:null,start:{line:49,column:6},end:{line:51,column:6}},moduleName:"hyperchannel/components/channel-container/template.hbs"},isEmpty:!1,arity:1,cachedFragment:null,hasRendered:!1,buildFragment:function(e){var n=e.createDocumentFragment(),t=e.createTextNode("        ");e.appendChild(n,t);var t=e.createElement("li"),a=e.createComment("");e.appendChild(t,a),e.appendChild(n,t);var t=e.createTextNode("\n");return e.appendChild(n,t),n},buildRenderNodes:function(e,n,t){var a=new Array(1);return a[0]=e.createMorphAt(e.childAt(n,[1]),0,0),a},statements:[["block","link-to",["space.userChannel",["get","username",["loc",[null,[50,43],[50,51]]],0,0,0,0]],[],0,null,["loc",[null,[50,12],[50,77]]]]],locals:["username"],templates:[e]}}();return{meta:{revision:"Ember@2.8.3",loc:{source:null,start:{line:1,column:0},end:{line:55,column:0}},moduleName:"hyperchannel/components/channel-container/template.hbs"},isEmpty:!1,arity:0,cachedFragment:null,hasRendered:!1,buildFragment:function(e){var n=e.createDocumentFragment(),t=e.createElement("main"),a=e.createTextNode("\n  ");e.appendChild(t,a);var a=e.createElement("header");e.setAttribute(a,"id","channel-header"),e.setAttribute(a,"style","touch-action: manipulation; -ms-touch-action: manipulation;");var r=e.createTextNode("\n    ");e.appendChild(a,r);var r=e.createElement("h2");e.setAttribute(r,"id","channel-name");var l=e.createComment("");e.appendChild(r,l),e.appendChild(a,r);var r=e.createTextNode("\n    ");e.appendChild(a,r);var r=e.createElement("p");e.setAttribute(r,"id","channel-title");var l=e.createComment("");e.appendChild(r,l),e.appendChild(a,r);var r=e.createTextNode("\n    ");e.appendChild(a,r);var r=e.createElement("nav"),l=e.createTextNode("\n      ");e.appendChild(r,l);var l=e.createElement("a");e.setAttribute(l,"href","#"),e.setAttribute(l,"style","touch-action: manipulation; -ms-touch-action: manipulation;");var o=e.createElement("i");e.setAttribute(o,"class","icon-megaphone"),e.appendChild(l,o),e.appendChild(r,l);var l=e.createElement("a");e.setAttribute(l,"href","#"),e.setAttribute(l,"style","touch-action: manipulation; -ms-touch-action: manipulation;");var o=e.createElement("i");e.setAttribute(o,"class","icon-mute"),e.appendChild(l,o),e.appendChild(r,l);var l=e.createTextNode("\n    ");e.appendChild(r,l),e.appendChild(a,r);var r=e.createTextNode("\n  ");e.appendChild(a,r),e.appendChild(t,a);var a=e.createTextNode("\n\n  ");e.appendChild(t,a);var a=e.createElement("section");e.setAttribute(a,"id","channel-content"),e.setAttribute(a,"class","main");var r=e.createTextNode("\n  ");e.appendChild(a,r);var r=e.createElement("ul"),l=e.createTextNode("\n");e.appendChild(r,l);var l=e.createComment("");e.appendChild(r,l);var l=e.createTextNode("    ");e.appendChild(r,l);var l=e.createComment('\n    <li>\n      <div class="chat-message user-raucao">\n        <span class="username" data-username="silverbucket">silverbucket</span>\n        <span class="message">you\'re already here?!</span>\n      </div>\n    </li>\n    ');e.appendChild(r,l);var l=e.createTextNode("\n  ");e.appendChild(r,l),e.appendChild(a,r);var r=e.createTextNode("\n  ");e.appendChild(a,r),e.appendChild(t,a);var a=e.createTextNode("\n\n  ");e.appendChild(t,a);var a=e.createElement("footer"),r=e.createTextNode("\n    ");e.appendChild(a,r);var r=e.createElement("section");e.setAttribute(r,"id","new-message");var l=e.createTextNode("\n      ");e.appendChild(r,l);var l=e.createElement("form"),o=e.createTextNode("\n        ");e.appendChild(l,o);var o=e.createComment("");e.appendChild(l,o);var o=e.createTextNode("\n      ");e.appendChild(l,o),e.appendChild(r,l);var l=e.createTextNode("\n    ");e.appendChild(r,l),e.appendChild(a,r);var r=e.createTextNode("\n  ");e.appendChild(a,r),e.appendChild(t,a);var a=e.createTextNode("\n");e.appendChild(t,a),e.appendChild(n,t);var t=e.createTextNode("\n\n");e.appendChild(n,t);var t=e.createElement("aside"),a=e.createTextNode("\n  ");e.appendChild(t,a);var a=e.createElement("header"),r=e.createTextNode("\n    ");e.appendChild(a,r);var r=e.createElement("nav"),l=e.createTextNode("\n      ");e.appendChild(r,l);var l=e.createComment("");e.appendChild(r,l);var l=e.createElement("a");e.setAttribute(l,"href","#"),e.setAttribute(l,"style","touch-action: manipulation; -ms-touch-action: manipulation;");var o=e.createElement("i");e.setAttribute(o,"class","icon-paperclip"),e.appendChild(l,o),e.appendChild(r,l);var l=e.createComment("");e.appendChild(r,l);var l=e.createElement("a");e.setAttribute(l,"href","#"),e.setAttribute(l,"style","touch-action: manipulation; -ms-touch-action: manipulation;");var o=e.createElement("i");e.setAttribute(o,"class","icon-resize-enlarge"),e.appendChild(l,o),e.appendChild(r,l);var l=e.createTextNode("\n    ");e.appendChild(r,l),e.appendChild(a,r);var r=e.createTextNode("\n  ");e.appendChild(a,r),e.appendChild(t,a);var a=e.createTextNode("\n  ");e.appendChild(t,a);var a=e.createElement("section");e.setAttribute(a,"id","user-list"),e.setAttribute(a,"class","main");var r=e.createTextNode("\n    ");e.appendChild(a,r);var r=e.createElement("ul"),l=e.createTextNode("\n");e.appendChild(r,l);var l=e.createComment("");e.appendChild(r,l);var l=e.createTextNode("    ");e.appendChild(r,l),e.appendChild(a,r);var r=e.createTextNode("\n  ");e.appendChild(a,r),e.appendChild(t,a);var a=e.createTextNode("\n");e.appendChild(t,a),e.appendChild(n,t);var t=e.createTextNode("\n");return e.appendChild(n,t),n},buildRenderNodes:function(e,n,t){var a=e.childAt(n,[0]),r=e.childAt(a,[1]),l=e.childAt(a,[5,1,1]),o=e.childAt(n,[2]),c=e.childAt(o,[1,1]),s=new Array(9);return s[0]=e.createElementMorph(r),s[1]=e.createMorphAt(e.childAt(r,[1]),0,0),s[2]=e.createMorphAt(e.childAt(r,[3]),0,0),s[3]=e.createMorphAt(e.childAt(a,[3,1]),1,1),s[4]=e.createElementMorph(l),s[5]=e.createMorphAt(l,1,1),s[6]=e.createMorphAt(c,1,1),s[7]=e.createMorphAt(c,3,3),s[8]=e.createMorphAt(e.childAt(o,[3,1]),1,1),s},statements:[["element","action",["menu","global","toggle"],[],["loc",[null,[2,30],[2,65]]],0,0],["content","channel.name",["loc",[null,[3,26],[3,42]]],0,0,0,0],["content","channel.formattedTopic",["loc",[null,[4,26],[4,52]]],0,0,0,0],["block","each",[["get","channel.messages",["loc",[null,[12,12],[12,28]]],0,0,0,0]],[],0,null,["loc",[null,[12,4],[16,13]]]],["element","action",["processMessageOrCommand"],["on","submit"],["loc",[null,[30,12],[30,60]]],0,0],["inline","channel-input-field",[],["value",["subexpr","@mut",[["get","newMessage",["loc",[null,[31,36],[31,46]]],0,0,0,0]],[],[],0,0],"placeholder","Type a message and hit enter","name","chat-message","id","message-field","autocomplete","off"],["loc",[null,[31,8],[35,50]]],0,0],["block","link-to",["index"],["class","active"],1,null,["loc",[null,[44,6],[44,79]]]],["block","link-to",["settings"],[],2,null,["loc",[null,[44,125],[44,184]]]],["block","each",[["get","channel.userList",["loc",[null,[49,14],[49,30]]],0,0,0,0]],[],3,null,["loc",[null,[49,6],[51,15]]]]],locals:[],templates:[e,n,t,a]}}())}),define("hyperchannel/components/channel-input-field/component",["exports","ember"],function(e,n){e.default=n.default.TextField.extend({keyUp:function(e){if(e.altKey)switch(e.key){case"k":this._insertAtCaret("")}},_insertAtCaret:function(e){var n=this.$().get(0);if(document.selection)n.focus(),n=document.selection.createRange(),n.text=e,n.focus();else if(n.selectionStart||"0"===n.selectionStart){var t=n.selectionStart,a=n.selectionEnd,r=n.scrollTop;n.value=n.value.substring(0,t)+e+n.value.substring(a,n.value.length),n.focus(),n.selectionStart=t+e.length,n.selectionEnd=t+e.length,n.scrollTop=r}else n.value+=e,n.focus()}})}),define("hyperchannel/components/channel-nav/component",["exports","ember"],function(e,n){e.default=n.default.Component.extend({tagName:"ul"})}),define("hyperchannel/components/channel-nav/template",["exports"],function(e){e.default=Ember.HTMLBars.template(function(){var e=function(){var e=function(){return{meta:{revision:"Ember@2.8.3",loc:{source:null,start:{line:3,column:8},end:{line:3,column:48}},moduleName:"hyperchannel/components/channel-nav/template.hbs"},isEmpty:!1,arity:0,cachedFragment:null,hasRendered:!1,buildFragment:function(e){var n=e.createDocumentFragment(),t=e.createComment("");return e.appendChild(n,t),n},buildRenderNodes:function(e,n,t){var a=new Array(1);return a[0]=e.createMorphAt(n,0,0,t),e.insertBoundary(n,0),e.insertBoundary(n,null),a},statements:[["content","space.name",["loc",[null,[3,34],[3,48]]],0,0,0,0]],locals:[],templates:[]}}(),n=function(){var e=function(){var e=function(){return{meta:{revision:"Ember@2.8.3",loc:{source:null,start:{line:8,column:10},end:{line:8,column:72}},moduleName:"hyperchannel/components/channel-nav/template.hbs"},isEmpty:!1,arity:0,cachedFragment:null,hasRendered:!1,buildFragment:function(e){var n=e.createDocumentFragment(),t=e.createComment("");return e.appendChild(n,t),n},buildRenderNodes:function(e,n,t){var a=new Array(1);return a[0]=e.createMorphAt(n,0,0,t),e.insertBoundary(n,0),e.insertBoundary(n,null),a},statements:[["content","channel.name",["loc",[null,[8,56],[8,72]]],0,0,0,0]],locals:[],templates:[]}}();return{meta:{revision:"Ember@2.8.3",loc:{source:null,start:{line:7,column:8},end:{line:9,column:8}},moduleName:"hyperchannel/components/channel-nav/template.hbs"},isEmpty:!1,arity:0,cachedFragment:null,hasRendered:!1,buildFragment:function(e){var n=e.createDocumentFragment(),t=e.createTextNode("          ");e.appendChild(n,t);var t=e.createComment("");e.appendChild(n,t);var t=e.createTextNode("\n");return e.appendChild(n,t),n},buildRenderNodes:function(e,n,t){var a=new Array(1);return a[0]=e.createMorphAt(n,1,1,t),a},statements:[["block","link-to",["space.userChannel",["get","space",["loc",[null,[8,41],[8,46]]],0,0,0,0],["get","channel",["loc",[null,[8,47],[8,54]]],0,0,0,0]],[],0,null,["loc",[null,[8,10],[8,84]]]]],locals:[],templates:[e]}}(),n=function(){var e=function(){return{meta:{revision:"Ember@2.8.3",loc:{source:null,start:{line:10,column:10},end:{line:10,column:68}},moduleName:"hyperchannel/components/channel-nav/template.hbs"},isEmpty:!1,arity:0,cachedFragment:null,hasRendered:!1,buildFragment:function(e){var n=e.createDocumentFragment(),t=e.createComment("");return e.appendChild(n,t),n},buildRenderNodes:function(e,n,t){var a=new Array(1);return a[0]=e.createMorphAt(n,0,0,t),e.insertBoundary(n,0),e.insertBoundary(n,null),a},statements:[["content","channel.name",["loc",[null,[10,52],[10,68]]],0,0,0,0]],locals:[],templates:[]}}();return{meta:{revision:"Ember@2.8.3",loc:{source:null,start:{line:9,column:8},end:{line:11,column:8}},moduleName:"hyperchannel/components/channel-nav/template.hbs"},isEmpty:!1,arity:0,cachedFragment:null,hasRendered:!1,buildFragment:function(e){var n=e.createDocumentFragment(),t=e.createTextNode("          ");e.appendChild(n,t);var t=e.createComment("");e.appendChild(n,t);var t=e.createTextNode("\n");return e.appendChild(n,t),n},buildRenderNodes:function(e,n,t){var a=new Array(1);return a[0]=e.createMorphAt(n,1,1,t),a},statements:[["block","link-to",["space.channel",["get","space",["loc",[null,[10,37],[10,42]]],0,0,0,0],["get","channel",["loc",[null,[10,43],[10,50]]],0,0,0,0]],[],0,null,["loc",[null,[10,10],[10,80]]]]],locals:[],templates:[e]}}();return{meta:{revision:"Ember@2.8.3",loc:{source:null,start:{line:5,column:4},end:{line:13,column:4}},moduleName:"hyperchannel/components/channel-nav/template.hbs"},isEmpty:!1,arity:1,cachedFragment:null,hasRendered:!1,buildFragment:function(e){var n=e.createDocumentFragment(),t=e.createTextNode("      ");e.appendChild(n,t);var t=e.createElement("li"),a=e.createTextNode("\n");e.appendChild(t,a);var a=e.createComment("");e.appendChild(t,a);var a=e.createTextNode("      ");e.appendChild(t,a),e.appendChild(n,t);var t=e.createTextNode("\n");return e.appendChild(n,t),n},buildRenderNodes:function(e,n,t){var a=e.childAt(n,[1]),r=new Array(2);return r[0]=e.createAttrMorph(a,"class"),r[1]=e.createMorphAt(a,1,1),r},statements:[["attribute","class",["concat",[["subexpr","if",[["get","channel.connected",["loc",[null,[6,22],[6,39]]],0,0,0,0],"connected","disconnected"],[],["loc",[null,[6,17],[6,68]]],0,0]," ",["get","channel.unreadMessagesClass",["loc",[null,[6,71],[6,98]]],0,0,0,0]],0,0,0,0,0],0,0,0,0],["block","if",[["get","channel.isUserChannel",["loc",[null,[7,14],[7,35]]],0,0,0,0]],[],0,1,["loc",[null,[7,8],[11,15]]]]],locals:["channel"],templates:[e,n]}}();return{meta:{revision:"Ember@2.8.3",loc:{source:null,start:{line:1,column:0},end:{line:16,column:0}},moduleName:"hyperchannel/components/channel-nav/template.hbs"},isEmpty:!1,arity:1,cachedFragment:null,hasRendered:!1,buildFragment:function(e){var n=e.createDocumentFragment(),t=e.createTextNode("  ");e.appendChild(n,t);var t=e.createElement("li"),a=e.createTextNode("\n    ");e.appendChild(t,a);var a=e.createElement("h2"),r=e.createComment("");e.appendChild(a,r),e.appendChild(t,a);var a=e.createTextNode("\n    ");e.appendChild(t,a);var a=e.createElement("ul"),r=e.createTextNode("\n");e.appendChild(a,r);var r=e.createComment("");e.appendChild(a,r);var r=e.createTextNode("    ");e.appendChild(a,r),e.appendChild(t,a);var a=e.createTextNode("\n  ");e.appendChild(t,a),e.appendChild(n,t);var t=e.createTextNode("\n");return e.appendChild(n,t),n},buildRenderNodes:function(e,n,t){var a=e.childAt(n,[1]),r=new Array(2);return r[0]=e.createMorphAt(e.childAt(a,[1]),0,0),r[1]=e.createMorphAt(e.childAt(a,[3]),1,1),r},statements:[["block","link-to",["space",["get","space",["loc",[null,[3,27],[3,32]]],0,0,0,0]],[],0,null,["loc",[null,[3,8],[3,60]]]],["block","each",[["get","space.sortedChannels",["loc",[null,[5,12],[5,32]]],0,0,0,0]],[],1,null,["loc",[null,[5,4],[13,13]]]]],locals:["space"],templates:[e,n]}}();return{meta:{revision:"Ember@2.8.3",loc:{source:null,start:{line:1,column:0},end:{line:17,column:0}},moduleName:"hyperchannel/components/channel-nav/template.hbs"},isEmpty:!1,arity:0,cachedFragment:null,hasRendered:!1,buildFragment:function(e){var n=e.createDocumentFragment(),t=e.createComment("");return e.appendChild(n,t),n},buildRenderNodes:function(e,n,t){var a=new Array(1);return a[0]=e.createMorphAt(n,0,0,t),e.insertBoundary(n,0),e.insertBoundary(n,null),a},statements:[["block","each",[["get","spaces",["loc",[null,[1,8],[1,14]]],0,0,0,0]],[],0,null,["loc",[null,[1,0],[16,9]]]]],locals:[],templates:[e]}}())}),define("hyperchannel/components/message-chat-me/component",["exports","hyperchannel/components/message-chat/component"],function(e,n){e.default=n.default.extend({classNames:["chat-message","chat-me-message"]})}),define("hyperchannel/components/message-chat-me/template",["exports"],function(e){e.default=Ember.HTMLBars.template(function(){return{meta:{revision:"Ember@2.8.3",loc:{source:null,start:{line:1,column:0},end:{line:4,column:0}},moduleName:"hyperchannel/components/message-chat-me/template.hbs"},isEmpty:!1,arity:0,cachedFragment:null,hasRendered:!1,buildFragment:function(e){var n=e.createDocumentFragment(),t=e.createElement("span");e.setAttribute(t,"class","username");var a=e.createComment("");e.appendChild(t,a),e.appendChild(n,t);var t=e.createTextNode("\n");e.appendChild(n,t);var t=e.createElement("span");e.setAttribute(t,"class","message");var a=e.createComment("");e.appendChild(t,a),e.appendChild(n,t);var t=e.createTextNode("\n\n");return e.appendChild(n,t),n},buildRenderNodes:function(e,n,t){var a=e.childAt(n,[0]),r=new Array(3);return r[0]=e.createAttrMorph(a,"data-username"),r[1]=e.createMorphAt(a,0,0),r[2]=e.createMorphAt(e.childAt(n,[2]),0,0),r},statements:[["attribute","data-username",["get","message.nickname",["loc",[null,[1,39],[1,55]]],0,0,0,0],0,0,0,0],["content","message.nickname",["loc",[null,[1,58],[1,78]]],0,0,0,0],["content","formattedContent",["loc",[null,[2,22],[2,42]]],0,0,0,0]],locals:[],templates:[]}}())}),define("hyperchannel/components/message-chat/component",["exports","ember"],function(e,n){e.default=n.default.Component.extend({tagName:"div",classNames:["chat-message"],formattedContent:function(){var e=this.get("message.content"),t=linkifyStr(e,{linkAttributes:{rel:"nofollow"},validate:{url:function(e){return/^(http)s?:\/\//.test(e)}}});return t=t.replace(/\u0003(\d+)/g,'<span class="color-$1">').replace(/\"color-(\d)\"/g,'"color-0$1"').replace(/\u000f/,"</span>"),n.default.String.htmlSafe(t)}.property("message.content")})}),define("hyperchannel/components/message-chat/template",["exports"],function(e){e.default=Ember.HTMLBars.template(function(){return{meta:{revision:"Ember@2.8.3",loc:{source:null,start:{line:1,column:0},end:{line:3,column:0}},moduleName:"hyperchannel/components/message-chat/template.hbs"},isEmpty:!1,arity:0,cachedFragment:null,hasRendered:!1,buildFragment:function(e){var n=e.createDocumentFragment(),t=e.createElement("span");e.setAttribute(t,"class","username");var a=e.createComment("");e.appendChild(t,a),e.appendChild(n,t);var t=e.createTextNode("\n");e.appendChild(n,t);var t=e.createElement("span");e.setAttribute(t,"class","message");var a=e.createComment("");e.appendChild(t,a),e.appendChild(n,t);var t=e.createTextNode("\n");return e.appendChild(n,t),n},buildRenderNodes:function(e,n,t){var a=e.childAt(n,[0]),r=new Array(3);return r[0]=e.createAttrMorph(a,"data-username"),r[1]=e.createMorphAt(a,0,0),r[2]=e.createMorphAt(e.childAt(n,[2]),0,0),r},statements:[["attribute","data-username",["get","message.nickname",["loc",[null,[1,39],[1,55]]],0,0,0,0],0,0,0,0],["content","message.nickname",["loc",[null,[1,58],[1,78]]],0,0,0,0],["content","formattedContent",["loc",[null,[2,22],[2,42]]],0,0,0,0]],locals:[],templates:[]}}())}),define("hyperchannel/components/notification-topic-change/component",["exports","ember"],function(e,n){e.default=n.default.Component.extend({tagName:"div",classNames:["topic-change-notification"]})}),define("hyperchannel/components/notification-topic-change/template",["exports"],function(e){e.default=Ember.HTMLBars.template(function(){return{meta:{revision:"Ember@2.8.3",loc:{source:null,start:{line:1,column:0},end:{line:2,column:0}},moduleName:"hyperchannel/components/notification-topic-change/template.hbs"},isEmpty:!1,arity:0,cachedFragment:null,hasRendered:!1,buildFragment:function(e){var n=e.createDocumentFragment(),t=e.createTextNode('Topic was changed to "');e.appendChild(n,t);var t=e.createComment("");e.appendChild(n,t);var t=e.createTextNode('" by ');e.appendChild(n,t);var t=e.createElement("span");e.setAttribute(t,"class","username");var a=e.createComment("");e.appendChild(t,a),e.appendChild(n,t);var t=e.createTextNode("\n");return e.appendChild(n,t),n},buildRenderNodes:function(e,n,t){var a=e.childAt(n,[3]),r=new Array(3);return r[0]=e.createMorphAt(n,1,1,t),r[1]=e.createAttrMorph(a,"data-username"),r[2]=e.createMorphAt(a,0,0),r},statements:[["content","message.content",["loc",[null,[1,22],[1,41]]],0,0,0,0],["attribute","data-username",["get","message.nickname",["loc",[null,[1,85],[1,101]]],0,0,0,0],0,0,0,0],["content","message.nickname",["loc",[null,[1,104],[1,124]]],0,0,0,0]],locals:[],templates:[]}}())}),define("hyperchannel/controllers/application",["exports","ember"],function(e,n){e.default=n.default.Controller.extend({smt:n.default.inject.service(),spaces:n.default.computed.alias("smt.spaces"),showGlobalMenu:!1,showChannelMenu:!1})}),define("hyperchannel/controllers/index",["exports","ember"],function(e,n){e.default=n.default.Controller.extend({application:n.default.inject.controller()})}),define("hyperchannel/controllers/settings",["exports","ember"],function(e,n){e.default=n.default.Controller.extend({application:n.default.inject.controller(),ircSettings:n.default.computed.alias("application.ircSettings")})}),define("hyperchannel/controllers/space",["exports","ember"],function(e,n){e.default=n.default.Controller.extend({})}),define("hyperchannel/controllers/space/base_channel",["exports","ember","hyperchannel/models/message"],function(e,n,t){e.default=n.default.Controller.extend({newMessage:null,space:n.default.inject.controller(),smt:n.default.inject.service(),actions:{sendMessage:function(e){var n=t.default.create({type:"message-chat",date:new Date,nickname:this.get("space.model.ircServer.nickname"),content:e});this.get("smt").transferMessage(this.get("space.model"),this.get("model.sockethubChannelId"),n.get("content")),this.get("model.messages").pushObject(n),this.set("newMessage",null)},executeCommand:function(e){var n=["help","join","leave","me","msg","part","topic"],t=e.substr(1),a=t.split(" "),r=a[0];n.includes(r.toLowerCase())?this.send(r+"Command",a.slice(1)):console.log("Unknown command",t),this.set("newMessage",null)},joinCommand:function(e){var n=this.get("smt").createChannel(this.get("space.model"),e[0]);this.transitionToRoute("space.channel",this.get("space.model"),n)},partCommand:function(){var e=this.get("space.model"),n=this.get("model.name");this.get("smt").removeChannel(e,n);var t=e.get("channels.lastObject");this.transitionToRoute("space.channel",e,t)},leaveCommand:function(){this.send("partCommand")},helpCommand:function(){},meCommand:function(e){var n=e.join(" "),a=t.default.create({type:"message-chat-me",date:new Date,nickname:this.get("space.model.ircServer.nickname"),content:n});this.get("smt").transferMeMessage(this.get("space.model"),this.get("model.sockethubChannelId"),a.get("content")),this.get("model.messages").pushObject(a)},msgCommand:function(e){var n=e.shift();this.get("smt").createUserChannel(this.get("space.model"),n)},topicCommand:function(e){var n=this.get("model"),t=e.join(" ");this.get("smt").changeTopic(this.get("space.model"),n,t)}}})}),define("hyperchannel/controllers/space/channel",["exports","hyperchannel/controllers/space/base_channel"],function(e,n){e.default=n.default.extend({})}),define("hyperchannel/controllers/space/user_channel",["exports","hyperchannel/controllers/space/base_channel"],function(e,n){e.default=n.default.extend({})}),define("hyperchannel/ember-gestures/recognizers/pan",["exports","ember-gestures/recognizers/pan"],function(e,n){e.default=n.default}),define("hyperchannel/ember-gestures/recognizers/pinch",["exports","ember-gestures/recognizers/pinch"],function(e,n){e.default=n.default}),define("hyperchannel/ember-gestures/recognizers/press",["exports","ember-gestures/recognizers/press"],function(e,n){e.default=n.default}),define("hyperchannel/ember-gestures/recognizers/rotate",["exports","ember-gestures/recognizers/rotate"],function(e,n){e.default=n.default}),define("hyperchannel/ember-gestures/recognizers/swipe",["exports","ember-gestures/recognizers/swipe"],function(e,n){e.default=n.default}),define("hyperchannel/ember-gestures/recognizers/swipeleft",["exports"],function(e){e.default={include:[],exclude:[],options:{threshold:25,direction:Hammer.DIRECTION_LEFT},eventName:"swipeleft",recognizer:"swipe"}}),define("hyperchannel/ember-gestures/recognizers/swiperight",["exports"],function(e){e.default={include:[],exclude:[],options:{threshold:25,direction:Hammer.DIRECTION_RIGHT},eventName:"swiperight",recognizer:"swipe"}}),define("hyperchannel/ember-gestures/recognizers/tap",["exports","ember-gestures/recognizers/tap"],function(e,n){Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/ember-gestures/recognizers/vertical-pan",["exports","ember-gestures/recognizers/vertical-pan"],function(e,n){Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/ember-gestures/recognizers/vertical-swipe",["exports","ember-gestures/recognizers/vertical-swipe"],function(e,n){Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/event_dispatcher",["exports","ember","ember-gestures/event_dispatcher","hyperchannel/config/environment"],function(e,n,t,a){var r=n.default.merge({},{emberUseCapture:!1,removeTracking:!1,useFastPaths:!1});r=n.default.merge(r,a.default.gestures),e.default=t.default.extend({useCapture:r.emberUseCapture,removeTracking:r.removeTracking,useFastPaths:r.useFastPaths})}),define("hyperchannel/helpers/is-after",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/is-after"],function(e,n,t,a){e.default=a.default.extend({globalAllowEmpty:!!n.default.get(t.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/is-before",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/is-before"],function(e,n,t,a){e.default=a.default.extend({globalAllowEmpty:!!n.default.get(t.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/is-between",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/is-between"],function(e,n,t,a){e.default=a.default.extend({globalAllowEmpty:!!n.default.get(t.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/is-same-or-after",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/is-same-or-after"],function(e,n,t,a){e.default=a.default.extend({globalAllowEmpty:!!n.default.get(t.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/is-same-or-before",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/is-same-or-before"],function(e,n,t,a){e.default=a.default.extend({globalAllowEmpty:!!n.default.get(t.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/is-same",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/is-same"],function(e,n,t,a){e.default=a.default.extend({globalAllowEmpty:!!n.default.get(t.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/moment-add",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/moment-add"],function(e,n,t,a){e.default=a.default.extend({globalAllowEmpty:!!n.default.get(t.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/moment-calendar",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/moment-calendar"],function(e,n,t,a){e.default=a.default.extend({globalAllowEmpty:!!n.default.get(t.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/moment-duration",["exports","ember-moment/helpers/moment-duration"],function(e,n){Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/helpers/moment-format",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/moment-format"],function(e,n,t,a){e.default=a.default.extend({globalAllowEmpty:!!n.default.get(t.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/moment-from-now",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/moment-from-now"],function(e,n,t,a){e.default=a.default.extend({globalAllowEmpty:!!n.default.get(t.default,"moment.allowEmpty")})}),
define("hyperchannel/helpers/moment-from",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/moment-from"],function(e,n,t,a){e.default=a.default.extend({globalAllowEmpty:!!n.default.get(t.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/moment-subtract",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/moment-subtract"],function(e,n,t,a){e.default=a.default.extend({globalAllowEmpty:!!n.default.get(t.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/moment-to-date",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/moment-to-date"],function(e,n,t,a){e.default=a.default.extend({globalAllowEmpty:!!n.default.get(t.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/moment-to-now",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/moment-to-now"],function(e,n,t,a){e.default=a.default.extend({globalAllowEmpty:!!n.default.get(t.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/moment-to",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/moment-to"],function(e,n,t,a){e.default=a.default.extend({globalAllowEmpty:!!n.default.get(t.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/moment-unix",["exports","ember-moment/helpers/unix"],function(e,n){Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"unix",{enumerable:!0,get:function(){return n.unix}})}),define("hyperchannel/helpers/moment",["exports","ember-moment/helpers/moment"],function(e,n){Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/helpers/now",["exports","ember-moment/helpers/now"],function(e,n){Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/helpers/route-action",["exports","ember-route-action-helper/helpers/route-action"],function(e,n){Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/helpers/unix",["exports","ember-moment/helpers/unix"],function(e,n){Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"unix",{enumerable:!0,get:function(){return n.unix}})}),define("hyperchannel/initializers/app-version",["exports","ember-cli-app-version/initializer-factory","hyperchannel/config/environment"],function(e,n,t){e.default={name:"App Version",initialize:(0,n.default)(t.default.APP.name,t.default.APP.version)}}),define("hyperchannel/initializers/container-debug-adapter",["exports","ember-resolver/container-debug-adapter"],function(e,n){e.default={name:"container-debug-adapter",initialize:function(){var e=arguments[1]||arguments[0];e.register("container-debug-adapter:main",n.default),e.inject("container-debug-adapter:main","namespace","application:main")}}}),define("hyperchannel/initializers/ember-hammertime",["exports","ember-hammertime/components/link-component","ember-hammertime/components/component"],function(e,n,t){e.default={name:"ember-hammertime",initialize:function(){}}}),define("hyperchannel/initializers/export-application-global",["exports","ember","hyperchannel/config/environment"],function(e,n,t){function a(){var e=arguments[1]||arguments[0];if(t.default.exportApplicationGlobal!==!1){var a;if("undefined"!=typeof window)a=window;else if("undefined"!=typeof global)a=global;else{if("undefined"==typeof self)return;a=self}var r,l=t.default.exportApplicationGlobal;r="string"==typeof l?l:n.default.String.classify(t.default.modulePrefix),a[r]||(a[r]=e,e.reopen({willDestroy:function(){this._super.apply(this,arguments),delete a[r]}}))}}e.initialize=a,e.default={name:"export-application-global",initialize:a}}),define("hyperchannel/initializers/sockethub",["exports","hyperchannel/config/environment"],function(e,n){var t=new SockethubClient(io(n.default.sockethubURL,{path:"/sockethub"}));e.default={name:"sockethub",initialize:function(e){e.register("sockethub:client",t,{instantiate:!1,singleton:!0}),e.inject("controller","sockethub","sockethub:client"),e.inject("route","sockethub","sockethub:client"),e.inject("component","sockethub","sockethub:client"),e.inject("service","sockethub","sockethub:client")}}}),define("hyperchannel/instance-initializers/ember-gestures",["exports","ember-getowner-polyfill"],function(e,n){e.default={name:"ember-gestures",initialize:function(e){"function"==typeof e.lookup?e.lookup("service:-gestures"):(0,n.default)(e).lookup("service:-gestures")}}}),define("hyperchannel/models/base_channel",["exports","ember"],function(e,n){e.default=n.default.Object.extend({space:null,name:"",userList:null,messages:null,connected:!1,sockethubChannelId:null,topic:null,unreadMessages:!1,unreadMentions:!1,visible:!1,slug:n.default.computed("name",function(){return this.get("name").replace(/#/g,"")}),unreadMessagesClass:n.default.computed("visible","unreadMessages","unreadMentions",function(){return this.get("visible")||!this.get("unreadMessages")?null:this.get("unreadMentions")?"unread-mentions":"unread-messages"}),addMessage:function(e){this.get("messages").pushObject(e),this.get("visible")||(this.set("unreadMessages",!0),e.get("content").match(this.get("space.userNickname"))&&this.set("unreadMentions",!0))},addUser:function(e){this.get("userList").pushObject(e)},removeUser:function(e){this.get("userList").removeObject(e)}})}),define("hyperchannel/models/channel",["exports","ember","hyperchannel/models/base_channel"],function(e,n,t){e.default=t.default.extend({formattedTopic:n.default.computed("topic",function(){if(null!==this.get("topic")){var e=linkifyStr(this.get("topic"),{defaultProtocol:"https",linkAttributes:{rel:"nofollow"}});return new n.default.String.htmlSafe(e)}return""})})}),define("hyperchannel/models/message",["exports","ember"],function(e,n){e.default=n.default.Object.extend({type:null,date:null,nickname:null,content:null})}),define("hyperchannel/models/space",["exports","ember"],function(e,n){e.default=n.default.Object.extend({name:"",ircServer:{hostname:"irc.freenode.net",port:6667,secure:!1,username:null,password:null,nickname:null,nickServ:{password:null}},channels:null,users:null,id:function(){return this.get("name").toLowerCase()}.property("name"),userNickname:n.default.computed.alias("ircServer.nickname"),sockethubPersonId:function(){return"irc://"+this.get("ircServer.nickname")+"@"+this.get("ircServer.hostname")}.property("ircServer.hostname","ircServer.nickname"),channelSorting:["name"],sortedChannels:n.default.computed.sort("channels","channelSorting"),addChannel:function(e){this.get("channels").pushObject(e)}})}),define("hyperchannel/models/user_channel",["exports","hyperchannel/models/base_channel"],function(e,n){e.default=n.default.extend({isUserChannel:!0})}),define("hyperchannel/resolver",["exports","ember-resolver"],function(e,n){e.default=n.default}),define("hyperchannel/router",["exports","ember","hyperchannel/config/environment"],function(e,n,t){var a=n.default.Router.extend({location:t.default.locationType,rootURL:t.default.rootURL});a.map(function(){this.route("space",{path:"/:id"},function(){this.route("channel",{path:"/channel/:slug"}),this.route("userChannel",{path:"/user/:slug"})}),this.route("settings")}),e.default=a}),define("hyperchannel/routes/application",["exports","ember"],function(e,n){e.default=n.default.Route.extend({smt:n.default.inject.service(),model:function(){this.get("smt").loadFixtures()},actions:{menu:function(e,n){var t="show"+e.capitalize()+"Menu";switch(n){case"show":this.controller.set(t,!0);break;case"hide":this.controller.set(t,!1);break;case"toggle":this.controller.toggleProperty(t)}}}})}),define("hyperchannel/routes/settings",["exports","ember"],function(e,n){e.default=n.default.Route.extend({actions:{save:function(){var e=this.controller.get("ircSettings");window.localStorage.setItem("hyperchannel:irc_settings",JSON.stringify(e)),console.log("saved settings",e),this.controllerFor("application").configureIRC()}}})}),define("hyperchannel/routes/space",["exports","ember"],function(e,n){e.default=n.default.Route.extend({smt:n.default.inject.service(),model:function(e){return this.get("smt").get("spaces").findBy("id",e.id)}})}),define("hyperchannel/routes/space/base_channel",["exports","ember"],function(e,n){function t(){n.default.$("#channel-content").animate({scrollTop:n.default.$("#channel-content ul").height()},"500")}function a(){window.innerWidth>900&&(console.debug("innerWidth",window.innerWidth),n.default.$("input#message-field").focus())}e.default=n.default.Route.extend({smt:n.default.inject.service(),model:function(e){var n=this.modelFor("space"),t=n.get("channels").findBy("slug",e.slug);return t||(t=this.createChannelOrUserChannel(n,e.slug)),t},setupController:function(e,r){this._super(e,r),n.default.run.scheduleOnce("afterRender",function(){a(),t()})},actions:{didTransition:function(){var e=this,t=this.modelFor("space"),a=this.controller.get("model");t.get("channels").setEach("visible",!1),a.set("visible",!0),a.set("unreadMessages",!1),a.set("unreadMentions",!1),n.default.run.later(this,function(){return e.send("menu","global","hide")},500)}}})}),define("hyperchannel/routes/space/channel",["exports","hyperchannel/routes/space/base_channel"],function(e,n){e.default=n.default.extend({createChannelOrUserChannel:function(e,n){return this.get("smt").createChannel(e,"#"+n)}})}),define("hyperchannel/routes/space/user_channel",["exports","hyperchannel/routes/space/base_channel"],function(e,n){e.default=n.default.extend({createChannelOrUserChannel:function(e,n){return this.get("smt").createUserChannel(e,n)}})}),define("hyperchannel/services/-gestures",["exports","ember","hyperchannel/config/environment","ember-gestures/services/-gestures"],function(e,n,t,a){var r=n.default.merge({},{useCapture:!1});r=n.default.merge(r,t.default.gestures),e.default=a.default.extend({useCapture:r.useCapture})}),define("hyperchannel/services/ajax",["exports","ember-ajax/services/ajax"],function(e,n){Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}})}),define("hyperchannel/services/moment",["exports","ember","hyperchannel/config/environment","ember-moment/services/moment"],function(e,n,t,a){e.default=a.default.extend({defaultFormat:n.default.get(t.default,"moment.outputFormat")})}),define("hyperchannel/services/smt",["exports","ember","hyperchannel/models/space","hyperchannel/models/channel","hyperchannel/models/user_channel","hyperchannel/models/message","hyperchannel/config/environment","moment"],function(e,n,t,a,r,l,o,c){e.default=n.default.Service.extend({ajax:n.default.inject.service(),spaces:null,loadFixtures:function(){this.setupListeners(),this.instantiateSpaces(),this.instantiateChannels()},instantiateSpaces:function(){var e=this;this.set("spaces",[]);var n=this.get("spaceFixtures");Object.keys(n).forEach(function(a){var r=t.default.create({name:a,ircServer:n[a].ircServer});e.connectToIRCServer(r),e.get("spaces").pushObject(r)})},connectToIRCServer:function(e){this.sockethub.ActivityStreams.Object.create({"@id":e.get("sockethubPersonId"),"@type":"person",displayName:e.get("ircServer.nickname")});var t={actor:e.get("sockethubPersonId"),context:"irc",object:{"@type":"credentials",nick:e.get("ircServer.nickname"),server:e.get("ircServer.hostname"),port:e.get("ircServer.port"),secure:e.get("ircServer.secure")}};n.default.Logger.debug("connecting to irc",t),this.sockethub.socket.emit("credentials",t)},transferMessage:function(e,n,t){var a={context:"irc","@type":"send",actor:e.get("sockethubPersonId"),target:n,object:{"@type":"message",content:t}};console.log("sending message job",a),this.sockethub.socket.emit("message",a)},transferMeMessage:function(e,n,t){var a={context:"irc","@type":"send",actor:e.get("sockethubPersonId"),target:n,object:{"@type":"me",content:t}};console.log("sending message job",a),this.sockethub.socket.emit("message",a)},setupListeners:function(){var e=this;this.sockethub.socket.on("completed",function(t){switch(n.default.Logger.debug("SH completed",t),t["@type"]){case"join":if("join"===t["@type"]){var a=e.get("spaces").findBy("sockethubPersonId",t.actor);if(!n.default.isEmpty(a)){var r=a.get("channels").findBy("sockethubChannelId",t.target);n.default.isEmpty(r)||(r.set("connected",!0),e.observeChannel(a.get("sockethubPersonId"),r.get("sockethubChannelId")))}}break;case"observe":"attendance"===t.object["@type"]&&e.updateChannelUserList(t)}}),this.sockethub.socket.on("message",function(t){switch(n.default.Logger.debug("SH message",t),t["@type"]){case"observe":"attendance"===t.object["@type"]&&e.updateChannelUserList(t);break;case"join":e.addUserToChannelUserList(t);break;case"leave":e.removeUserFromChannelUserList(t);break;case"send":switch(t.object["@type"]){case"message":case"me":e.addMessageToChannel(t)}break;case"update":"topic"===t.object["@type"]&&e.updateChannelTopic(t)}}),this.sockethub.socket.on("failure",function(e){n.default.Logger.error("SH failure",e)})},updateChannelUserList:function(e){var n=this.getChannelByMessage(e);n&&n.set("userList",e.object.members.sort())},addUserToChannelUserList:function(e){var n=this.getChannelByMessage(e);n&&n.addUser(e.actor.displaName)},removeUserFromChannelUserList:function(e){var n=this.getChannelByMessage(e);n&&n.removeUser(e.actor.displayName)},getChannelByMessage:function(e){var t,a;"object"==typeof e.actor?t=e.actor["@id"]:"string"==typeof e.actor&&(t=e.actor),a=t.match(/irc:\/\/(?:.+@)?(.+?)(?:\/|$)/)[1];var r=this.get("spaces").findBy("ircServer.hostname",a);if(!n.default.isEmpty(r)){var l=r.get("channels").findBy("sockethubChannelId",e.target["@id"]);if(!n.default.isEmpty(l))return l}},updateChannelTopic:function(e){var t;"object"==typeof e.target?t=e.target["@id"].match(/irc:\/\/(.+)\//)[1]:"string"==typeof e.actor&&(t=e.actor.match(/irc:\/\/.+\@(.+)/)[1]);var a=this.get("spaces").findBy("ircServer.hostname",t);if(!n.default.isEmpty(a)){var r=a.get("channels").findBy("sockethubChannelId",e.target["@id"]);n.default.isEmpty(r)&&(r=this.createChannel(a,e.target["@id"])),r.set("topic",e.object.topic),Notification.requestPermission(function(){new Notification(r.name,{body:"New Topic: "+e.object.topic})})}},addMessageToChannel:function(e){var n,t=this.get("spaces").findBy("ircServer.hostname",e.actor["@id"].match(/irc:\/\/.+\@(.+)/)[1]),a=t.get("userNickname");n=a===e.target.displayName?e.actor.displayName:e.target.displayName;var r=t.get("channels").findBy("name",n);r||(r=this.createChannel(t,n));var o=void 0;o="me"===e.object["@type"]?"message-chat-me":"message-chat";var c=l.default.create({type:o,date:new Date(e.published),nickname:e.actor.displayName,content:e.object.content});e.actor.displayName!==a&&r.addMessage(c)},observeChannel:function(e,t){var a={context:"irc","@type":"observe",actor:e,target:t,object:{"@type":"attendance"}};n.default.Logger.debug("asking for attendance list",a),this.sockethub.socket.emit("message",a)},instantiateChannels:function(){var e=this;this.get("spaces").forEach(function(n){n.set("channels",[]),e.get("spaceFixtures")[n.get("name")].channels.forEach(function(t){e.createChannel(n,t)})})},createChannel:function(e,n){var t=a.default.create({space:e,name:n,sockethubChannelId:"irc://"+e.get("ircServer.hostname")+"/"+n,messages:[],userList:[]});return this.joinChannel(e,t,"room"),e.addChannel(t),this.loadArchiveMessages(e,t),t},loadArchiveMessages:function(e,t){var a=c.default.utc(),r=o.default.publicLogsUrl+"/"+e.get("name").toLowerCase()+"/channels/"+t.get("slug")+"/";r+=a.format("YYYY/MM/DD"),this.get("ajax").request(r,{type:"GET",dataType:"json"}).then(function(e){n.default.get(e,"today.messages").forEach(function(e){console.log("message",e);var n=l.default.create({type:"message-chat",date:new Date(e.timestamp),nickname:e.from,content:e.text});t.addMessage(n)})},function(e){console.log(e)})},createUserChannel:function(e,n){var t=r.default.create({name:n,sockethubChannelId:"irc://"+e.get("ircServer.hostname")+"/"+n,messages:[],userList:[]});return this.joinChannel(e,t,"person"),e.addChannel(t),t},removeChannel:function(e,n){var t=e.get("channels").findBy("name",n);return this.leaveChannel(e,t),e.get("channels").removeObject(t),t},joinChannel:function(e,t,a){this.sockethub.ActivityStreams.Object.create({"@type":a,"@id":t.get("sockethubChannelId"),displayName:t.get("name")});var r={context:"irc","@type":"join",actor:e.get("sockethubPersonId"),target:t.get("sockethubChannelId"),object:{}};n.default.Logger.debug("joining channel",r),this.sockethub.socket.emit("message",r)},leaveChannel:function(e,t){this.sockethub.ActivityStreams.Object.create({"@type":"room","@id":t.get("sockethubChannelId"),displayName:t.get("name")});var a={context:"irc","@type":"leave",actor:e.get("sockethubPersonId"),target:t.get("sockethubChannelId"),object:{}};n.default.Logger.debug("leaving channel",a),this.sockethub.socket.emit("message",a)},changeTopic:function(e,n,t){var a={context:"irc","@type":"update",actor:e.get("sockethubPersonId"),target:n.get("sockethubChannelId"),object:{"@type":"topic",topic:t}};this.sockethub.socket.emit("message",a)},spaceFixtures:function(){var e=localStorage.getItem("hyperchannel-nickname");return e||(e=prompt("Choose a Nickname"),localStorage.setItem("hyperchannel-nickname",e)),{Freenode:{ircServer:{hostname:"irc.freenode.net",port:6667,secure:!1,username:null,password:null,nickname:e,nickServ:{password:null}},channels:["#67p","#hackerbeach","#kosmos","#kosmos-dev","#kosmos-random","#sockethub"]}}}.property(),userFixtures:function(){return[{username:"bkero"},{username:"derbumi"},{username:"galfert"},{username:"gregkare"},{username:"jaaan"},{username:"LSA232"},{username:"raucao"},{username:"slvrbckt"}]}.property()})}),define("hyperchannel/templates/application",["exports"],function(e){e.default=Ember.HTMLBars.template(function(){var e=function(){return{meta:{revision:"Ember@2.8.3",loc:{source:null,start:{line:1,column:0},end:{line:16,column:0}},moduleName:"hyperchannel/templates/application.hbs"},isEmpty:!1,arity:0,cachedFragment:null,hasRendered:!1,buildFragment:function(e){var n=e.createDocumentFragment(),t=e.createTextNode("  ");e.appendChild(n,t);var t=e.createElement("div");e.setAttribute(t,"id","global");var a=e.createTextNode("\n    ");e.appendChild(t,a);var a=e.createElement("header");e.setAttribute(a,"id","sitename");var r=e.createTextNode("\n      ");e.appendChild(a,r);var r=e.createElement("h1"),l=e.createTextNode("Kosmos");e.appendChild(r,l),e.appendChild(a,r);var r=e.createTextNode("\n    ");e.appendChild(a,r),e.appendChild(t,a);var a=e.createTextNode("\n\n    ");e.appendChild(t,a);var a=e.createElement("div");e.setAttribute(a,"class","main");var r=e.createTextNode("\n      ");e.appendChild(a,r);var r=e.createElement("nav");e.setAttribute(r,"id","channels");var l=e.createTextNode("\n        ");e.appendChild(r,l);var l=e.createComment("");e.appendChild(r,l);var l=e.createTextNode("\n      ");e.appendChild(r,l),e.appendChild(a,r);var r=e.createTextNode("\n    ");e.appendChild(a,r),e.appendChild(t,a);var a=e.createTextNode("\n  ");e.appendChild(t,a),e.appendChild(n,t);var t=e.createTextNode("\n\n  ");e.appendChild(n,t);var t=e.createComment("");e.appendChild(n,t);var t=e.createTextNode("\n");return e.appendChild(n,t),n},buildRenderNodes:function(e,n,t){var a=new Array(2);return a[0]=e.createMorphAt(e.childAt(n,[1,3,1]),1,1),a[1]=e.createMorphAt(n,3,3,t),a},statements:[["inline","channel-nav",[],["spaces",["subexpr","@mut",[["get","spaces",["loc",[null,[10,29],[10,35]]],0,0,0,0]],[],[],0,0]],["loc",[null,[10,8],[10,37]]],0,0],["content","outlet",["loc",[null,[15,2],[15,12]]],0,0,0,0]],locals:[],templates:[]}}();return{meta:{revision:"Ember@2.8.3",loc:{source:null,start:{line:1,column:0},end:{line:17,column:0}},moduleName:"hyperchannel/templates/application.hbs"},isEmpty:!1,arity:0,cachedFragment:null,hasRendered:!1,buildFragment:function(e){var n=e.createDocumentFragment(),t=e.createComment("");return e.appendChild(n,t),n},buildRenderNodes:function(e,n,t){var a=new Array(1);return a[0]=e.createMorphAt(n,0,0,t),e.insertBoundary(n,0),e.insertBoundary(n,null),a},statements:[["block","app-container",[],["showGlobalMenu",["subexpr","@mut",[["get","showGlobalMenu",["loc",[null,[1,32],[1,46]]],0,0,0,0]],[],[],0,0],"showChannelMenu",["subexpr","@mut",[["get","showChannelMenu",["loc",[null,[2,33],[2,48]]],0,0,0,0]],[],[],0,0]],0,null,["loc",[null,[1,0],[16,18]]]]],locals:[],templates:[e]}}())}),define("hyperchannel/templates/index",["exports"],function(e){e.default=Ember.HTMLBars.template(function(){return{meta:{revision:"Ember@2.8.3",loc:{source:null,start:{line:1,column:0},end:{line:2,column:0}},moduleName:"hyperchannel/templates/index.hbs"},isEmpty:!1,arity:0,cachedFragment:null,hasRendered:!1,buildFragment:function(e){var n=e.createDocumentFragment(),t=e.createElement("p"),a=e.createTextNode("[index.hbs]");e.appendChild(t,a),e.appendChild(n,t);var t=e.createTextNode("\n");return e.appendChild(n,t),n},buildRenderNodes:function(){return[]},statements:[],locals:[],templates:[]}}())}),define("hyperchannel/templates/settings",["exports"],function(e){e.default=Ember.HTMLBars.template(function(){return{meta:{revision:"Ember@2.8.3",loc:{source:null,start:{line:1,column:0},end:{line:18,column:0}},moduleName:"hyperchannel/templates/settings.hbs"},isEmpty:!1,arity:0,cachedFragment:null,hasRendered:!1,buildFragment:function(e){var n=e.createDocumentFragment(),t=e.createElement("section");e.setAttribute(t,"id","channel-content");var a=e.createTextNode("\n");e.appendChild(t,a);var a=e.createElement("ul"),r=e.createTextNode("\n  ");e.appendChild(a,r);var r=e.createElement("li"),l=e.createTextNode("\n    ");e.appendChild(r,l);var l=e.createComment("");e.appendChild(r,l);var l=e.createTextNode("\n  ");e.appendChild(r,l),e.appendChild(a,r);var r=e.createTextNode("\n  ");e.appendChild(a,r);var r=e.createElement("li"),l=e.createTextNode("\n    ");e.appendChild(r,l);var l=e.createComment("");e.appendChild(r,l);var l=e.createTextNode("\n  ");e.appendChild(r,l),e.appendChild(a,r);var r=e.createTextNode("\n  ");e.appendChild(a,r);var r=e.createElement("li"),l=e.createTextNode("\n    ");e.appendChild(r,l);var l=e.createComment("");e.appendChild(r,l);var l=e.createTextNode("\n  ");e.appendChild(r,l),e.appendChild(a,r);var r=e.createTextNode("\n  ");e.appendChild(a,r);var r=e.createElement("li"),l=e.createTextNode("\n    ");e.appendChild(r,l);var l=e.createElement("button");e.setAttribute(l,"style","touch-action: manipulation; -ms-touch-action: manipulation;");var o=e.createTextNode("Save");e.appendChild(l,o),e.appendChild(r,l);var l=e.createTextNode("\n  ");e.appendChild(r,l),e.appendChild(a,r);var r=e.createTextNode("\n");e.appendChild(a,r),e.appendChild(t,a);var a=e.createTextNode("\n");e.appendChild(t,a),e.appendChild(n,t);var t=e.createTextNode("\n\n");return e.appendChild(n,t),n},buildRenderNodes:function(e,n,t){var a=e.childAt(n,[0,1]),r=e.childAt(a,[7,1]),l=new Array(4);return l[0]=e.createMorphAt(e.childAt(a,[1]),1,1),l[1]=e.createMorphAt(e.childAt(a,[3]),1,1),l[2]=e.createMorphAt(e.childAt(a,[5]),1,1),l[3]=e.createElementMorph(r),l},statements:[["inline","input",[],["value",["subexpr","@mut",[["get","ircSettings.nickname",["loc",[null,[4,18],[4,38]]],0,0,0,0]],[],[],0,0],"placeholder","nickname"],["loc",[null,[4,4],[4,63]]],0,0],["inline","input",[],["value",["subexpr","@mut",[["get","ircSettings.server",["loc",[null,[7,18],[7,36]]],0,0,0,0]],[],[],0,0],"placeholder","irc.servername.org"],["loc",[null,[7,4],[7,71]]],0,0],["inline","input",[],["value",["subexpr","@mut",[["get","ircSettings.channel",["loc",[null,[10,18],[10,37]]],0,0,0,0]],[],[],0,0],"placeholder","#channel"],["loc",[null,[10,4],[10,62]]],0,0],["element","action",["save"],[],["loc",[null,[13,12],[13,29]]],0,0]],locals:[],templates:[]}}())}),define("hyperchannel/templates/space/channel",["exports"],function(e){e.default=Ember.HTMLBars.template(function(){return{meta:{revision:"Ember@2.8.3",loc:{source:null,start:{line:1,column:0},end:{line:6,column:0}},moduleName:"hyperchannel/templates/space/channel.hbs"},isEmpty:!1,arity:0,cachedFragment:null,hasRendered:!1,buildFragment:function(e){var n=e.createDocumentFragment(),t=e.createComment("");e.appendChild(n,t);var t=e.createTextNode("\n");return e.appendChild(n,t),n},buildRenderNodes:function(e,n,t){var a=new Array(1);return a[0]=e.createMorphAt(n,0,0,t),e.insertBoundary(n,0),a},statements:[["inline","channel-container",[],["channel",["subexpr","@mut",[["get","model",["loc",[null,[1,28],[1,33]]],0,0,0,0]],[],[],0,0],"newMessage",["subexpr","@mut",[["get","newMessage",["loc",[null,[2,31],[2,41]]],0,0,0,0]],[],[],0,0],"onMessage",["subexpr","action",["sendMessage"],[],["loc",[null,[3,30],[3,52]]],0,0],"onCommand",["subexpr","action",["executeCommand"],[],["loc",[null,[4,30],[4,55]]],0,0],"menu",["subexpr","route-action",["menu"],[],["loc",[null,[5,25],[5,46]]],0,0]],["loc",[null,[1,0],[5,48]]],0,0]],locals:[],templates:[]}}())}),define("hyperchannel/templates/space/user_channel",["exports"],function(e){e.default=Ember.HTMLBars.template(function(){return{meta:{revision:"Ember@2.8.3",loc:{source:null,start:{line:1,column:0},end:{line:5,column:0}},moduleName:"hyperchannel/templates/space/user_channel.hbs"},isEmpty:!1,arity:0,cachedFragment:null,hasRendered:!1,buildFragment:function(e){var n=e.createDocumentFragment(),t=e.createComment("");e.appendChild(n,t);var t=e.createTextNode("\n");return e.appendChild(n,t),n},buildRenderNodes:function(e,n,t){var a=new Array(1);return a[0]=e.createMorphAt(n,0,0,t),e.insertBoundary(n,0),a},statements:[["inline","channel-container",[],["channel",["subexpr","@mut",[["get","model",["loc",[null,[1,28],[1,33]]],0,0,0,0]],[],[],0,0],"newMessage",["subexpr","@mut",[["get","newMessage",["loc",[null,[2,31],[2,41]]],0,0,0,0]],[],[],0,0],"onMessage",["subexpr","action",["sendMessage"],[],["loc",[null,[3,30],[3,52]]],0,0],"onCommand",["subexpr","action",["executeCommand"],[],["loc",[null,[4,30],[4,55]]],0,0]],["loc",[null,[1,0],[4,57]]],0,0]],locals:[],templates:[]}}())}),define("hyperchannel/config/environment",["ember"],function(e){var n="hyperchannel";try{var t=n+"/config/environment",a=document.querySelector('meta[name="'+t+'"]').getAttribute("content"),r=JSON.parse(unescape(a)),l={default:r};return Object.defineProperty(l,"__esModule",{value:!0}),l}catch(e){throw new Error('Could not read config from meta tag with name "'+t+'".')}}),runningTests||require("hyperchannel/app").default.create({name:"hyperchannel",version:"0.1.0+ea95aa26"});
//# sourceMappingURL=hyperchannel.map