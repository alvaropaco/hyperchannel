"use strict";define("hyperchannel/app",["exports","ember","hyperchannel/resolver","ember-load-initializers","hyperchannel/config/environment"],function(e,t,n,a,s){Object.defineProperty(e,"__esModule",{value:!0});var r=void 0;t.default.MODEL_FACTORY_INJECTIONS=!0,r=t.default.Application.extend({modulePrefix:s.default.modulePrefix,podModulePrefix:s.default.podModulePrefix,Resolver:n.default}),(0,a.default)(r,s.default.modulePrefix),e.default=r}),define("hyperchannel/components/-lf-get-outlet-state",["exports","liquid-fire/components/-lf-get-outlet-state"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/components/app-container/component",["exports","ember","ember-gestures/mixins/recognizers"],function(e,t,n){function a(e,n){return n.id===e||t.default.$(n).parents("#"+e).length>0}Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.Component.extend(n.default,{tagName:"div",classNames:["app-container"],classNameBindings:["showGlobalMenu:global-menu-open","showChannelMenu:channel-menu-open"],recognizers:"swipeleft swiperight tap",swipeLeft:function(){this.set("showGlobalMenu",!1)},swipeRight:function(){this.set("showGlobalMenu",!0)},tap:function(e){!this.get("showGlobalMenu")||a("channel-header",e.target)||a("global",e.target)||this.set("showGlobalMenu",!1)}})}),define("hyperchannel/components/app-container/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"1BH+Bt62",block:'{"statements":[[18,"default"],[0,"\\n"]],"locals":[],"named":[],"yields":["default"],"hasPartials":false}',meta:{moduleName:"hyperchannel/components/app-container/template.hbs"}})}),define("hyperchannel/components/channel-container/component",["exports","ember"],function(e,t){function n(){t.default.$("#channel-content").animate({scrollTop:t.default.$("#channel-content ul").height()},"500")}Object.defineProperty(e,"__esModule",{value:!0});var a=t.default.Component,s=t.default.observer,r=t.default.run.scheduleOnce,o=t.default.inject.service;e.default=a.extend({elementId:"channel",newMessage:"",channel:null,scrollingDisabled:!1,coms:o(),messagesUpdated:s("channel.messages.[]",function(){this.get("scrollingDisabled")||r("afterRender",n)}),didInsertElement:function(){this._super.apply(this,arguments),r("afterRender",n)},actions:{processMessageOrCommand:function(){"/"===this.get("newMessage").substr(0,1)?this.onCommand(this.get("newMessage")):this.onMessage(this.get("newMessage"))},menu:function(e,t){this.sendAction("menu",e,t)},loadPreviousMessages:function(){var e=this;this.set("scrollingDisabled",!0),this.get("coms").loadLastMessages(this.get("channel.space"),this.get("channel"),this.get("channel.searchedPreviousLogsUntilDate")).catch(function(){}).finally(function(){e.set("scrollingDisabled",!1)})}}})}),define("hyperchannel/components/channel-container/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"efJNfYzN",block:'{"statements":[[11,"main",[]],[13],[0,"\\n  "],[11,"header",[]],[15,"id","channel-header"],[15,"onClick",""],[15,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[5,["action"],[[28,[null]],"menu","global","toggle"]],[13],[0,"\\n    "],[11,"h2",[]],[15,"id","channel-name"],[13],[1,[28,["channel","name"]],false],[14],[0,"\\n    "],[11,"p",[]],[15,"id","channel-title"],[13],[1,[28,["channel","formattedTopic"]],false],[14],[0,"\\n    "],[11,"nav",[]],[13],[0,"\\n      "],[11,"a",[]],[15,"href","#"],[15,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[13],[11,"i",[]],[15,"class","icon-megaphone"],[13],[14],[14],[11,"a",[]],[15,"href","#"],[15,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[13],[11,"i",[]],[15,"class","icon-mute"],[13],[14],[14],[0,"\\n    "],[14],[0,"\\n  "],[14],[0,"\\n\\n  "],[11,"section",[]],[15,"id","channel-content"],[15,"class","main"],[13],[0,"\\n"],[6,["if"],[[28,["channel","isLogged"]]],null,{"statements":[[0,"      "],[11,"a",[]],[15,"class","load-previous"],[15,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[5,["action"],[[28,[null]],"loadPreviousMessages"]],[13],[0,"\\n        Load previous messages\\n      "],[14],[0,"\\n"]],"locals":[]},null],[0,"\\n    "],[11,"ul",[]],[13],[0,"\\n"],[6,["each"],[[28,["channel","sortedMessages"]]],null,{"statements":[[0,"        "],[11,"li",[]],[13],[0,"\\n          "],[1,[33,["component"],[[28,["message","type"]]],[["message"],[[28,["message"]]]]],false],[0,"\\n        "],[14],[0,"\\n"]],"locals":["message"]},{"statements":[[6,["if"],[[28,["channel","isLogged"]]],null,{"statements":[[0,"          "],[11,"li",[]],[15,"class","no-messages"],[13],[0,"No recent messages to display."],[14],[0,"\\n"]],"locals":[]},{"statements":[[0,"          "],[11,"li",[]],[15,"class","no-messages"],[13],[0,"No Kosmos logs configured for this channel. "],[11,"a",[]],[15,"href","https://wiki.kosmos.org/Setting_up_channel_logs"],[15,"target","_blank"],[15,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[13],[0,"Learn more"],[14],[14],[0,"\\n"]],"locals":[]}]],"locals":[]}],[0,"    "],[14],[0,"\\n  "],[14],[0,"\\n\\n  "],[11,"footer",[]],[13],[0,"\\n    "],[11,"section",[]],[15,"id","new-message"],[13],[0,"\\n      "],[11,"form",[]],[5,["action"],[[28,[null]],"processMessageOrCommand"],[["on"],["submit"]]],[13],[0,"\\n        "],[1,[33,["channel-input-field"],null,[["value","placeholder","name","id","autocomplete"],[[28,["newMessage"]],"Type a message and hit enter","chat-message","message-field","off"]]],false],[0,"\\n      "],[14],[0,"\\n    "],[14],[0,"\\n  "],[14],[0,"\\n"],[14],[0,"\\n\\n"],[11,"aside",[]],[13],[0,"\\n  "],[11,"header",[]],[13],[0,"\\n    "],[11,"nav",[]],[13],[0,"\\n      "],[6,["link-to"],["index"],[["class"],["active"]],{"statements":[[11,"i",[]],[15,"class","icon-users"],[13],[14]],"locals":[]},null],[11,"a",[]],[15,"href","#"],[15,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[13],[11,"i",[]],[15,"class","icon-paperclip"],[13],[14],[14],[6,["link-to"],["settings"],null,{"statements":[[11,"i",[]],[15,"class","icon-cog"],[13],[14]],"locals":[]},null],[11,"a",[]],[15,"href","#"],[15,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[13],[11,"i",[]],[15,"class","icon-resize-enlarge"],[13],[14],[14],[0,"\\n    "],[14],[0,"\\n  "],[14],[0,"\\n  "],[11,"section",[]],[15,"id","user-list"],[15,"class","main"],[13],[0,"\\n    "],[11,"ul",[]],[13],[0,"\\n"],[6,["each"],[[28,["channel","userList"]]],null,{"statements":[[0,"      "],[11,"li",[]],[13],[1,[33,["link-to-username"],null,[["username"],[[28,["username"]]]]],false],[14],[0,"\\n"]],"locals":["username"]},null],[0,"    "],[14],[0,"\\n  "],[14],[0,"\\n"],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"hyperchannel/components/channel-container/template.hbs"}})}),define("hyperchannel/components/channel-input-field/component",["exports","ember"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.TextField.extend({keyUp:function(e){if(e.altKey)switch(e.key){case"k":this._insertAtCaret("")}},_insertAtCaret:function(e){var t=this.$().get(0);if(document.selection)t.focus(),t=document.selection.createRange(),t.text=e,t.focus();else if(t.selectionStart||"0"===t.selectionStart){var n=t.selectionStart,a=t.selectionEnd,s=t.scrollTop;t.value=t.value.substring(0,n)+e+t.value.substring(a,t.value.length),t.focus(),t.selectionStart=n+e.length,t.selectionEnd=n+e.length,t.scrollTop=s}else t.value+=e,t.focus()}})}),define("hyperchannel/components/channel-nav/component",["exports","ember"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.Component.extend({tagName:"ul"})}),define("hyperchannel/components/channel-nav/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"RD5NuZqj",block:'{"statements":[[6,["each"],[[28,["spaces"]]],null,{"statements":[[0,"  "],[11,"li",[]],[13],[0,"\\n    "],[11,"h2",[]],[13],[6,["link-to"],["space",[28,["space"]]],null,{"statements":[[1,[28,["space","name"]],false]],"locals":[]},null],[14],[0,"\\n    "],[11,"ul",[]],[13],[0,"\\n"],[6,["each"],[[28,["space","sortedChannels"]]],null,{"statements":[[0,"        "],[11,"li",[]],[16,"class",[34,[[33,["if"],[[28,["channel","connected"]],"connected","disconnected"],null]," ",[28,["channel","unreadMessagesClass"]]]]],[13],[0,"\\n"],[6,["if"],[[28,["channel","isUserChannel"]]],null,{"statements":[[0,"            "],[6,["link-to"],["space.userChannel",[28,["space"]],[28,["channel"]]],null,{"statements":[[1,[28,["channel","name"]],false]],"locals":[]},null],[0,"\\n"]],"locals":[]},{"statements":[[0,"            "],[6,["link-to"],["space.channel",[28,["space"]],[28,["channel"]]],null,{"statements":[[1,[28,["channel","name"]],false]],"locals":[]},null],[0,"\\n"]],"locals":[]}],[0,"        "],[14],[0,"\\n"]],"locals":["channel"]},null],[0,"      "],[11,"li",[]],[13],[0,"\\n        "],[11,"a",[]],[15,"class","join-channel"],[15,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[5,["action"],[[28,[null]],[33,["action"],[[28,[null]],[28,["joinChannel"]],[28,["space"]]],null]]],[13],[0,"+"],[14],[0,"\\n      "],[14],[0,"\\n    "],[14],[0,"\\n  "],[14],[0,"\\n"]],"locals":["space"]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"hyperchannel/components/channel-nav/template.hbs"}})}),define("hyperchannel/components/date-headline/component",["exports","ember","moment"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.Component.extend({classNames:["date-headline"],updateInterval:12e4,headline:t.default.computed("message.date",function(){var e=this,a=(0,n.default)(this.get("message.date")),s=function(){t.default.run.later(function(){e.notifyPropertyChange("message.date")},e.get("updateInterval"))};return a.isSame((0,n.default)(),"day")?(s(),"Today"):a.isSame((0,n.default)().subtract(1,"day"),"day")?(s(),"Yesterday"):this.get("message.date").toLocaleDateString()})})}),define("hyperchannel/components/date-headline/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"9ikDqjay",block:'{"statements":[[11,"h3",[]],[13],[1,[26,["headline"]],false],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"hyperchannel/components/date-headline/template.hbs"}})}),define("hyperchannel/components/from-elsewhere",["exports","ember-elsewhere/components/from-elsewhere"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/components/illiquid-model",["exports","liquid-fire/components/illiquid-model"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/components/link-to-username/component",["exports","ember"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0});var n=t.default.Component,a=t.default.computed,s=t.default.isPresent;e.default=n.extend({username:null,roles:{"@":"op","%":"half-op","+":"voice"},role:a("username","roles",function(){var e=this.get("roles")[this.get("username")[0]];return s(e)?e:"normal"}),usernameWithoutPrefix:a("username","roles",function(){var e=RegExp("^[\\"+Object.keys(this.get("roles")).join("\\")+"]");return this.get("username").replace(e,"")})})}),define("hyperchannel/components/link-to-username/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"SBRQN+LX",block:'{"statements":[[6,["link-to"],["space.userChannel",[28,["usernameWithoutPrefix"]]],[["class"],[[28,["role"]]]],{"statements":[[1,[26,["username"]],false]],"locals":[]},null],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"hyperchannel/components/link-to-username/template.hbs"}})}),define("hyperchannel/components/liquid-bind",["exports","liquid-fire/components/liquid-bind"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/components/liquid-child",["exports","liquid-fire/components/liquid-child"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/components/liquid-container",["exports","liquid-fire/components/liquid-container"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/components/liquid-if",["exports","liquid-fire/components/liquid-if"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/components/liquid-measured",["exports","liquid-fire/components/liquid-measured"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"measure",{enumerable:!0,get:function(){return t.measure}})}),define("hyperchannel/components/liquid-outlet",["exports","liquid-fire/components/liquid-outlet"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/components/liquid-spacer",["exports","liquid-fire/components/liquid-spacer"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/components/liquid-sync",["exports","liquid-fire/components/liquid-sync"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/components/liquid-unless",["exports","liquid-fire/components/liquid-unless"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/components/liquid-versions",["exports","liquid-fire/components/liquid-versions"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/components/message-chat-me/component",["exports","hyperchannel/components/message-chat/component"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({classNames:["chat-message","chat-me-message"]})}),define("hyperchannel/components/message-chat-me/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"VPwtBi/C",block:'{"statements":[[11,"span",[]],[15,"class","username"],[16,"data-username",[28,["message","nickname"]],null],[13],[1,[28,["message","nickname"]],false],[14],[0,"\\n"],[11,"span",[]],[15,"class","message"],[13],[1,[26,["formattedContent"]],false],[14],[0,"\\n\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"hyperchannel/components/message-chat-me/template.hbs"}})}),define("hyperchannel/components/message-chat/component",["exports","ember","moment"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0});var a=t.default.computed,s=t.default.String.htmlSafe;e.default=t.default.Component.extend({tagName:"div",classNames:["chat-message"],message:null,datetime:a("message.date",function(){return(0,n.default)(this.get("message.date")).format("YYYY-MM-DD[T]HH:mm")}),dateTitle:a("message.date",function(){return(0,n.default)(this.get("message.date")).format("YYYY-MM-DD [at] HH:mm")}),formattedContent:a("message.content",function(){var e=this.get("message.content"),t=void 0;return t=e.match(/^(http)s?:\/\/.*(gif|png|jpg|jpeg)$/i)?'<br><a href="'+e+'" target="_blank" rel="nofollow noopener">'+('<img src="'+e+'" class="from-image-url" alt="'+e+'">')+"</a>":linkifyStr(e,{linkAttributes:{rel:"nofollow noopener"},validate:{url:function(e){return/^(http)s?:\/\//.test(e)}}}),t=t.replace(/\u0003(\d+)/g,'<span class="color-$1">').replace(/\"color-(\d)\"/g,'"color-0$1"').replace(/\u0002/g,'<span class="bold">').replace(/\u001D/g,'<span class="italic">').replace(/\u000f/g,"</span>"),s(t)})})}),define("hyperchannel/components/message-chat/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"wnE6pEFq",block:'{"statements":[[11,"span",[]],[15,"class","chat-message__username"],[16,"data-username",[28,["message","nickname"]],null],[13],[0,"\\n  "],[1,[28,["message","nickname"]],false],[0,":\\n"],[14],[0,"\\n\\n"],[11,"time",[]],[15,"class","chat-message__date"],[16,"datetime",[26,["datetime"]],null],[16,"title",[26,["dateTitle"]],null],[13],[0,"\\n  "],[1,[33,["moment-format"],[[28,["message","date"]],"HH:mm"],null],false],[0,"\\n"],[14],[0,"\\n\\n"],[11,"span",[]],[15,"class","chat-message__message"],[13],[0,"\\n  "],[1,[26,["formattedContent"]],false],[0,"\\n"],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"hyperchannel/components/message-chat/template.hbs"}})}),define("hyperchannel/components/modal-target/component",["exports","ember"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.Component.extend({modalAnimation:function(){return this.lookup("explode").call(this,{pick:".modal-background",use:["fade",{maxOpacity:.5}]},{pick:".modal-dialog",use:"scale"})},actions:{outsideClick:function(e){e&&e.onOutsideClick&&e.onOutsideClick()}}})}),define("hyperchannel/components/modal-target/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"iWOGFOgx",block:'{"statements":[[6,["from-elsewhere"],null,[["name"],["modal"]],{"statements":[[6,["liquid-bind"],[[28,["modal"]]],[["containerless","use"],[true,[28,["modalAnimation"]]]],{"statements":[[6,["if"],[[28,["currentModal"]]],null,{"statements":[[0,"      "],[11,"div",[]],[15,"class","modal-container"],[13],[0,"\\n        "],[11,"div",[]],[15,"class","modal-background"],[16,"onclick",[33,["action"],[[28,[null]],"outsideClick",[28,["currentModal"]]],null],null],[15,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[13],[14],[0,"\\n        "],[11,"div",[]],[15,"class","modal-dialog"],[13],[0,"\\n"],[6,["if"],[[28,["currentModal","body"]]],null,{"statements":[[0,"            "],[1,[33,["component"],[[28,["currentModal","body"]]],null],false],[0,"\\n"]],"locals":[]},{"statements":[[0,"            "],[1,[33,["component"],[[28,["currentModal"]]],null],false],[0,"\\n"]],"locals":[]}],[0,"        "],[14],[0,"\\n      "],[14],[0,"\\n"]],"locals":[]},null]],"locals":["currentModal"]},null]],"locals":["modal"]},null],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"hyperchannel/components/modal-target/template.hbs"}})}),define("hyperchannel/components/multiple-from-elsewhere",["exports","ember-elsewhere/components/multiple-from-elsewhere"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/components/notification-topic-change/component",["exports","ember"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.Component.extend({tagName:"div",classNames:["topic-change-notification"]})}),define("hyperchannel/components/notification-topic-change/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"t9m+VltG",block:'{"statements":[[0,"Topic was changed to \\""],[1,[28,["message","content"]],false],[0,"\\" by "],[11,"span",[]],[15,"class","username"],[16,"data-username",[28,["message","nickname"]],null],[13],[1,[28,["message","nickname"]],false],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"hyperchannel/components/notification-topic-change/template.hbs"}})}),define("hyperchannel/components/space-setting-modal/component",["exports","ember","hyperchannel/models/space"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.Component.extend({settings:null,space:null,init:function(){this._super.apply(this,arguments),this.set("space",n.default.create(this.get("settings").serialize()))},actions:{save:function(){this.onSave(this.get("space"))},cancel:function(){this.onCancel()}}})}),define("hyperchannel/components/space-setting-modal/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"KEYVCh1C",block:'{"statements":[[11,"h1",[]],[13],[0,"Space Setting"],[14],[0,"\\n\\n"],[11,"form",[]],[15,"name","add-space"],[5,["action"],[[28,[null]],"save"],[["on"],["submit"]]],[13],[0,"\\n  "],[11,"p",[]],[13],[0,"\\n    "],[1,[33,["input"],null,[["value","required","placeholder"],[[28,["space","protocol"]],"required","IRC"]]],false],[0,"\\n  "],[14],[0,"\\n  "],[11,"p",[]],[13],[0,"\\n    "],[1,[33,["input"],null,[["value","required","placeholder"],[[28,["space","name"]],"required","Freenode"]]],false],[0,"\\n  "],[14],[0,"\\n  "],[11,"p",[]],[13],[0,"\\n    "],[1,[33,["input"],null,[["value","required","placeholder"],[[28,["space","server","hostname"]],"required","irc.servername.org"]]],false],[0,"\\n  "],[14],[0,"\\n  "],[11,"p",[]],[13],[0,"\\n    "],[1,[33,["input"],null,[["value","required","placeholder"],[[28,["space","server","port"]],"required","6667"]]],false],[0,"\\n  "],[14],[0,"\\n  "],[11,"p",[]],[13],[0,"\\n    "],[1,[33,["input"],null,[["type","checked","id"],["checkbox",[28,["space","server","secure"]],"tls-enabled-modal"]]],false],[0,"\\n    "],[11,"label",[]],[15,"for","tls-enabled-modal"],[13],[0,"Secure (TLS)"],[14],[0,"\\n  "],[14],[0,"\\n  "],[11,"p",[]],[13],[0,"\\n    "],[1,[33,["input"],null,[["value","placeholder"],[[28,["space","server","username"]],"username"]]],false],[0,"\\n  "],[14],[0,"\\n  "],[11,"p",[]],[13],[0,"\\n    "],[1,[33,["input"],null,[["value","placeholder"],[[28,["space","server","password"]],"password"]]],false],[0,"\\n  "],[14],[0,"\\n  "],[11,"p",[]],[13],[0,"\\n    "],[1,[33,["input"],null,[["value","required","placeholder"],[[28,["space","server","nickname"]],"required","nickname"]]],false],[0,"\\n  "],[14],[0,"\\n  "],[11,"p",[]],[13],[0,"\\n    username:  "],[1,[28,["space","server","username"]],false],[0,"\\n  "],[14],[0,"\\n  "],[11,"p",[]],[13],[0,"\\n    "],[11,"input",[]],[15,"type","submit"],[15,"value","Save"],[13],[14],[0,"\\n  "],[14],[0,"\\n"],[14],[0,"\\n\\n"],[11,"button",[]],[15,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[5,["action"],[[28,[null]],"cancel"]],[13],[0,"Cancel"],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"hyperchannel/components/space-setting-modal/template.hbs"}})}),define("hyperchannel/components/to-elsewhere",["exports","ember-elsewhere/components/to-elsewhere"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/controllers/application",["exports","ember"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0});var n=t.default.Controller,a=t.default.computed.alias,s=t.default.inject.service;e.default=n.extend({coms:s(),spaces:a("coms.spaces"),showGlobalMenu:!1,showChannelMenu:!1})}),define("hyperchannel/controllers/index",["exports","ember"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.Controller.extend({application:t.default.inject.controller()})}),define("hyperchannel/controllers/settings",["exports","ember"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0});var n=t.default.Controller,a=t.default.inject,s=a.controller,r=a.service,o=t.default.computed.notEmpty;e.default=n.extend({application:s(),coms:r(),storage:r("remotestorage"),newSpace:null,selectedSpacePreset:null,showSpaceSettingModal:o("selectedSpacePreset"),actions:{addSpaceFromPreset:function(e){this.set("selectedSpacePreset",e)},saveSpace:function(e){var t=this;this.set("selectedSpacePreset",null),this.get("storage").saveSpace(e).then(function(){t.get("coms").connectAndAddSpace(e)})}}})}),define("hyperchannel/controllers/space",["exports","ember"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.Controller.extend({})}),define("hyperchannel/controllers/space/base_channel",["exports","ember","hyperchannel/models/message"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0});var a=t.default.Controller,s=t.default.inject,r=s.controller,o=s.service,l=t.default.Logger,i=t.default.isPresent;e.default=a.extend({newMessage:null,space:r(),coms:o(),storage:o("remotestorage"),createMessage:function(e,t){return n.default.create({type:t,date:new Date,nickname:this.get("space.model.server.nickname"),content:e})},actions:{sendMessage:function(e){var t=this.createMessage(e,"message-chat");this.get("coms").transferMessage(this.get("space.model"),this.get("model"),t.get("content")),this.get("model.messages").pushObject(t),this.set("newMessage",null)},executeCommand:function(e){var t=["help","join","leave","me","msg","part","topic"],n=e.substr(1),a=n.split(" "),s=a[0];t.includes(s.toLowerCase())?this.send(s+"Command",a.slice(1)):l.warn("[channel]","Unknown command",n),this.set("newMessage",null)},joinCommand:function(e){var t=this.get("space.model"),n=this.get("coms").createChannel(t,e[0]);this.get("storage").saveSpace(t),this.transitionToRoute("space.channel",t,n)},partCommand:function(){var e=this.get("space.model"),t=this.get("model.name");this.get("coms").removeChannel(e,t);var n=e.get("channels.lastObject");i(n)?this.transitionToRoute("space.channel",e,n):this.transitionToRoute("space",e)},leaveCommand:function(){this.send("partCommand")},helpCommand:function(){},meCommand:function(e){var t=e.join(" "),n=this.createMessage(t,"message-chat-me");this.get("coms").transferMeMessage(this.get("space.model"),this.get("model.sockethubChannelId"),n.get("content")),this.get("model.messages").pushObject(n)},msgCommand:function(e){var t=e.shift();this.get("coms").createUserChannel(this.get("space.model"),t)},topicCommand:function(e){var t=this.get("model"),n=e.join(" ");this.get("coms").changeTopic(this.get("space.model"),t,n)}}})}),define("hyperchannel/controllers/space/channel",["exports","hyperchannel/controllers/space/base_channel"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({})}),define("hyperchannel/controllers/space/user_channel",["exports","hyperchannel/controllers/space/base_channel"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({})}),define("hyperchannel/ember-gestures/recognizers/pan",["exports","ember-gestures/recognizers/pan"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("hyperchannel/ember-gestures/recognizers/pinch",["exports","ember-gestures/recognizers/pinch"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("hyperchannel/ember-gestures/recognizers/press",["exports","ember-gestures/recognizers/press"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("hyperchannel/ember-gestures/recognizers/rotate",["exports","ember-gestures/recognizers/rotate"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("hyperchannel/ember-gestures/recognizers/swipe",["exports","ember-gestures/recognizers/swipe"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("hyperchannel/ember-gestures/recognizers/swipeleft",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={include:[],exclude:[],options:{threshold:25,direction:Hammer.DIRECTION_LEFT},eventName:"swipeleft",recognizer:"swipe"}}),define("hyperchannel/ember-gestures/recognizers/swiperight",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={include:[],exclude:[],options:{threshold:25,direction:Hammer.DIRECTION_RIGHT},eventName:"swiperight",recognizer:"swipe"}}),define("hyperchannel/ember-gestures/recognizers/tap",["exports","ember-gestures/recognizers/tap"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/ember-gestures/recognizers/vertical-pan",["exports","ember-gestures/recognizers/vertical-pan"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/ember-gestures/recognizers/vertical-swipe",["exports","ember-gestures/recognizers/vertical-swipe"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/event_dispatcher",["exports","ember","ember-gestures/event_dispatcher","hyperchannel/config/environment"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0});var s=t.default.assign||t.default.merge,r=s({},{emberUseCapture:!1,removeTracking:!1,useFastPaths:!1});r=s(r,a.default.gestures),e.default=n.default.extend({useCapture:r.emberUseCapture,removeTracking:r.removeTracking,useFastPaths:r.useFastPaths})}),define("hyperchannel/helpers/app-version",["exports","ember","hyperchannel/config/environment","ember-cli-app-version/utils/regexp"],function(e,t,n,a){function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.hideSha?r.match(a.versionRegExp)[0]:t.hideVersion?r.match(a.shaRegExp)[0]:r}Object.defineProperty(e,"__esModule",{value:!0}),e.appVersion=s;var r=n.default.APP.version;e.default=t.default.Helper.helper(s)}),define("hyperchannel/helpers/is-after",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/is-after"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a.default.extend({globalAllowEmpty:!!t.default.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/is-before",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/is-before"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a.default.extend({globalAllowEmpty:!!t.default.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/is-between",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/is-between"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a.default.extend({globalAllowEmpty:!!t.default.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/is-same-or-after",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/is-same-or-after"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a.default.extend({globalAllowEmpty:!!t.default.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/is-same-or-before",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/is-same-or-before"],function(e,t,n,a){
Object.defineProperty(e,"__esModule",{value:!0}),e.default=a.default.extend({globalAllowEmpty:!!t.default.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/is-same",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/is-same"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a.default.extend({globalAllowEmpty:!!t.default.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/lf-lock-model",["exports","liquid-fire/helpers/lf-lock-model"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"lfLockModel",{enumerable:!0,get:function(){return t.lfLockModel}})}),define("hyperchannel/helpers/lf-or",["exports","liquid-fire/helpers/lf-or"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"lfOr",{enumerable:!0,get:function(){return t.lfOr}})}),define("hyperchannel/helpers/moment-add",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/moment-add"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a.default.extend({globalAllowEmpty:!!t.default.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/moment-calendar",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/moment-calendar"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a.default.extend({globalAllowEmpty:!!t.default.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/moment-duration",["exports","ember-moment/helpers/moment-duration"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/helpers/moment-format",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/moment-format"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a.default.extend({globalAllowEmpty:!!t.default.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/moment-from-now",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/moment-from-now"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a.default.extend({globalAllowEmpty:!!t.default.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/moment-from",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/moment-from"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a.default.extend({globalAllowEmpty:!!t.default.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/moment-subtract",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/moment-subtract"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a.default.extend({globalAllowEmpty:!!t.default.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/moment-to-date",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/moment-to-date"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a.default.extend({globalAllowEmpty:!!t.default.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/moment-to-now",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/moment-to-now"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a.default.extend({globalAllowEmpty:!!t.default.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/moment-to",["exports","ember","hyperchannel/config/environment","ember-moment/helpers/moment-to"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a.default.extend({globalAllowEmpty:!!t.default.get(n.default,"moment.allowEmpty")})}),define("hyperchannel/helpers/moment-unix",["exports","ember-moment/helpers/unix"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"unix",{enumerable:!0,get:function(){return t.unix}})}),define("hyperchannel/helpers/moment",["exports","ember-moment/helpers/moment"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/helpers/now",["exports","ember-moment/helpers/now"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/helpers/pluralize",["exports","ember-inflector/lib/helpers/pluralize"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("hyperchannel/helpers/route-action",["exports","ember-route-action-helper/helpers/route-action"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/helpers/singularize",["exports","ember-inflector/lib/helpers/singularize"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("hyperchannel/helpers/unix",["exports","ember-moment/helpers/unix"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"unix",{enumerable:!0,get:function(){return t.unix}})}),define("hyperchannel/initializers/app-version",["exports","ember-cli-app-version/initializer-factory","hyperchannel/config/environment"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0});var a=n.default.APP,s=a.name,r=a.version;e.default={name:"App Version",initialize:(0,t.default)(s,r)}}),define("hyperchannel/initializers/container-debug-adapter",["exports","ember-resolver/resolvers/classic/container-debug-adapter"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"container-debug-adapter",initialize:function(){var e=arguments[1]||arguments[0];e.register("container-debug-adapter:main",t.default),e.inject("container-debug-adapter:main","namespace","application:main")}}}),define("hyperchannel/initializers/data-adapter",["exports","ember"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"data-adapter",before:"store",initialize:function(){}}}),define("hyperchannel/initializers/ember-data",["exports","ember-data/setup-container","ember-data/index"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ember-data",initialize:t.default}}),define("hyperchannel/initializers/ember-hammertime",["exports","ember-hammertime/components/component"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ember-hammertime",initialize:function(){}}}),define("hyperchannel/initializers/export-application-global",["exports","ember","hyperchannel/config/environment"],function(e,t,n){function a(){var e=arguments[1]||arguments[0];if(n.default.exportApplicationGlobal!==!1){var a;if("undefined"!=typeof window)a=window;else if("undefined"!=typeof global)a=global;else{if("undefined"==typeof self)return;a=self}var s,r=n.default.exportApplicationGlobal;s="string"==typeof r?r:t.default.String.classify(n.default.modulePrefix),a[s]||(a[s]=e,e.reopen({willDestroy:function(){this._super.apply(this,arguments),delete a[s]}}))}}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=a,e.default={name:"export-application-global",initialize:a}}),define("hyperchannel/initializers/hammer",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"hammer",initialize:function(){delete Hammer.defaults.cssProps.userSelect}}}),define("hyperchannel/initializers/injectStore",["exports","ember"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"injectStore",before:"store",initialize:function(){}}}),define("hyperchannel/initializers/liquid-fire",["exports","liquid-fire/ember-internals"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),(0,t.initialize)(),e.default={name:"liquid-fire",initialize:function(){}}}),define("hyperchannel/initializers/local-storage-adapter",["exports","ember-local-storage/initializers/local-storage-adapter"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"initialize",{enumerable:!0,get:function(){return t.initialize}})}),define("hyperchannel/initializers/sockethub",["exports","hyperchannel/config/environment"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0});var n=new SockethubClient(io(t.default.sockethubURL,{path:"/sockethub"}));e.default={name:"sockethub",initialize:function(e){e.register("sockethub:client",n,{instantiate:!1,singleton:!0}),e.inject("controller","sockethub","sockethub:client"),e.inject("route","sockethub","sockethub:client"),e.inject("component","sockethub","sockethub:client"),e.inject("service","sockethub","sockethub:client")}}}),define("hyperchannel/initializers/store",["exports","ember"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"store",after:"ember-data",initialize:function(){}}}),define("hyperchannel/initializers/transforms",["exports","ember"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"transforms",before:"store",initialize:function(){}}}),define("hyperchannel/instance-initializers/ember-data",["exports","ember-data/-private/instance-initializers/initialize-store-service"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ember-data",initialize:t.default}}),define("hyperchannel/instance-initializers/ember-gestures",["exports","ember"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0});var n=t.default.getOwner;e.default={name:"ember-gestures",initialize:function(e){"function"==typeof e.lookup?e.lookup("service:-gestures"):n(e).lookup("service:-gestures")}}}),define("hyperchannel/instance-initializers/remotestorage",["exports","ember"],function(e,t){function n(e){var n=e.lookup("service:remotestorage"),a=n.get("rs");window.remoteStorage=a;var s=["ready","not-connected","connected","disconnected","error","features-loaded","connecting","authing","wire-busy","wire-done","network-offline","network-online"];s.forEach(function(e){a.on(e,function(){return t.default.Logger.debug("[remotestorage] RS event: "+e)})})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=n,e.default={name:"remotestorage",initialize:n}}),define("hyperchannel/models/base_channel",["exports","ember","hyperchannel/models/message","moment"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0});var s=t.default.computed,r=t.default.isPresent;e.default=t.default.Object.extend({space:null,name:"",userList:null,messages:null,connected:!1,sockethubChannelId:null,topic:null,unreadMessages:!1,unreadMentions:!1,visible:!1,init:function(){this._super.apply(this,arguments),this.set("messages",[]),this.set("userList",[])},isLogged:s("space.loggedChannels.[]","name",function(){var e=this,t=this.get("space.loggedChannels").find(function(t){return t===e.get("name")});return r(t)}),slug:s("name",function(){return this.get("name").replace(/#/g,"")}),unreadMessagesClass:s("visible","unreadMessages","unreadMentions",function(){return this.get("visible")||!this.get("unreadMessages")?null:this.get("unreadMentions")?"unread-mentions":"unread-messages"}),sortedMessages:s("messages.@each.date",function(){return this.get("messages").sortBy("date")}),addDateHeadline:function(e){var t=(0,a.default)(e.get("date")).startOf("day").toDate(),s=this.get("messages").find(function(e){return"date-headline"===e.get("type")&&e.get("date").toString()===t.toString()});if(!s){var r=n.default.create({type:"date-headline",date:t});this.get("messages").pushObject(r)}},addMessage:function(e){this.addDateHeadline(e),this.get("messages").pushObject(e),this.get("visible")||(this.set("unreadMessages",!0),e.get("content").match(this.get("space.userNickname"))&&this.set("unreadMentions",!0))},addUser:function(e){this.get("userList").includes(e)||this.get("userList").pushObject(e)},removeUser:function(e){this.get("userList").removeObject(e)}})}),define("hyperchannel/models/channel",["exports","ember","hyperchannel/models/base_channel"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n.default.extend({searchedPreviousLogsUntilDate:null,formattedTopic:t.default.computed("topic",function(){if(null!==this.get("topic")){var e=linkifyStr(this.get("topic"),{defaultProtocol:"https",linkAttributes:{rel:"nofollow"}});return new t.default.String.htmlSafe(e)}return""})})}),define("hyperchannel/models/message",["exports","ember"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.Object.extend({type:null,date:null,nickname:null,content:null})}),define("hyperchannel/models/space",["exports","ember"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0});var n=t.default.computed,a=t.default.isPresent;e.default=t.default.Object.extend({name:null,protocol:"IRC",server:{hostname:null,port:7e3,secure:!0,username:null,password:null,nickname:null,nickServ:{password:null}},channels:null,previousSockethubPersonIds:null,init:function(){this._super.apply(this,arguments),this.set("channels",[]),this.set("previousSockethubPersonIds",[])},channelNames:n("channels.@each.name",function(){return this.get("channels").mapBy("name")}),sockethubChannelIds:n("channels.@each.sockethubChannelId",function(){return this.get("channels").mapBy("sockethubChannelId")}),loggedChannels:n("name","protocol",function(){return"Freenode"===this.get("name")&&"IRC"===this.get("protocol")?["#5apps","#kosmos","#kosmos-dev","#remotestorage","#hackerbeach","#unhosted","#sockethub","#opensourcedesign","#openknot","#emberjs","#indieweb","#mastodon"]:[]}),userNickname:n.alias("server.nickname"),updateUsername:function(e){switch(this.get("previousSockethubPersonIds").pushObject(this.get("sockethubPersonId")),this.get("protocol")){case"IRC":this.set("server.nickname",e);break;case"XMPP":this.set("server.username",e)}},sockethubPersonId:function(){var e=void 0;switch(this.get("protocol")){case"IRC":e="irc://"+this.get("server.nickname")+"@"+this.get("server.hostname");break;case"XMPP":e=this.get("server.username")+"/hyperchannel"}return e}.property("protocol","server.hostname","server.username","server.nickname"),channelSorting:["name"],sortedChannels:n.sort("channels","channelSorting"),serialize:function(){var e=this,t={id:this.get("id")||this.get("name").dasherize(),name:this.get("name"),protocol:this.get("protocol"),server:{hostname:this.get("server.hostname"),port:parseInt(this.get("server.port"),10),secure:this.get("server.secure"),nickname:this.get("server.nickname")},channels:this.get("channelNames")||[]};return["username","password","nickname"].forEach(function(n){a(e.get("server."+n))&&(t.server[n]=e.get("server."+n))}),t}})}),define("hyperchannel/models/user_channel",["exports","hyperchannel/models/base_channel"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({isUserChannel:!0})}),define("hyperchannel/resolver",["exports","ember-resolver"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("hyperchannel/router",["exports","ember","hyperchannel/config/environment"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0});var a=t.default.Router.extend({location:n.default.locationType,rootURL:n.default.rootURL});a.map(function(){this.route("space",{path:"/:id"},function(){this.route("channel",{path:"/channel/:slug"}),this.route("userChannel",{path:"/user/:slug"})}),this.route("settings")}),e.default=a}),define("hyperchannel/routes/application",["exports","ember"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0});var n=t.default.Route,a=t.default.inject.service,s=t.default.isEmpty;e.default=n.extend({logger:a(),coms:a(),storage:a("remotestorage"),beforeModel:function(){this._super.apply(this,arguments)},model:function(){return this.get("coms").setupListeners(),this.get("coms").instantiateSpacesAndChannels()},actions:{menu:function(e,t){var n="show"+e.capitalize()+"Menu";switch(t){case"show":this.controller.set(n,!0);break;case"hide":this.controller.set(n,!1);break;case"toggle":this.controller.toggleProperty(n)}},openNewChannel:function(e){var t=window.prompt("Join channel");if(!s(t)){"IRC"!==e.get("protocol")||t.match(/^#/)||(t="#"+t);var n=this.get("coms").createChannel(e,t);this.get("storage").saveSpace(e),this.transitionTo("space.channel",e,n)}}}})}),define("hyperchannel/routes/index",["exports","ember","ember-local-storage"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.Route.extend({userSettings:(0,n.storageFor)("user-settings"),redirect:function(){var e=this.get("userSettings.currentSpace")||"freenode",t=this.get("userSettings.currentChannel")||"#kosmos";e&&t&&this.transitionTo("space.channel",e,t)}})}),define("hyperchannel/routes/settings",["exports","ember","hyperchannel/models/space","hyperchannel/config/environment"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0});var s=t.default.Route,r=t.default.inject.service,o=t.default.isEmpty,l=t.default.Logger,i=t.default.RSVP;e.default=s.extend({storage:r("remotestorage"),coms:r(),model:function(){var e=this.get("storage.rs").kosmos,t=e.spaces.getAll().then(function(e){var t=[];return o(e)?t:(Object.keys(e).forEach(function(a){t.push(n.default.create(e[a]))}),t)},function(e){l.error(e)});return i.hash({spaces:t,spacePresets:a.default.spacePresets.map(function(e){return n.default.create(e)})})},setupController:function(e){this._super.apply(this,arguments),e.set("newSpace",n.default.create())},actions:{addSpace:function(){var e=this,t=this.controller.get("newSpace");t.set("id",t.get("name").dasherize()),this.get("storage").saveSpace(t).then(function(){e.get("coms").connectAndAddSpace(t),e.modelFor("settings").spaces.pushObject(t)},function(e){l.error("error saving in RS",t,e)})},removeSpace:function(e){var t=this;this.get("storage").removeSpace(e).then(function(){t.modelFor("settings").spaces.removeObject(e)},function(t){l.error("error deleting from RS",e,t)})}}})}),define("hyperchannel/routes/space",["exports","ember"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.Route.extend({coms:t.default.inject.service(),model:function(e){return this.get("coms").get("spaces").findBy("id",e.id)}})}),define("hyperchannel/routes/space/base_channel",["exports","ember","ember-local-storage"],function(e,t,n){function a(){window.innerWidth>900&&t.default.$("input#message-field").focus()}Object.defineProperty(e,"__esModule",{value:!0});var s=t.default.Route,r=t.default.inject.service,o=t.default.run,l=o.later,i=o.scheduleOnce;e.default=s.extend({coms:r(),userSettings:(0,n.storageFor)("user-settings"),model:function(e){var t=this.modelFor("space"),n=t.get("channels").findBy("slug",e.slug);return n||(n=this.createChannelOrUserChannel(t,e.slug)),n},setupController:function(e,t){this._super(e,t),i("afterRender",function(){a()})},actions:{didTransition:function(){var e=this,t=this.modelFor("space"),n=this.controller.get("model");this.set("userSettings.currentSpace",t.get("id")),this.set("userSettings.currentChannel",n.get("slug")),t.get("channels").setEach("visible",!1),n.set("visible",!0),n.set("unreadMessages",!1),n.set("unreadMentions",!1),l(this,function(){return e.send("menu","global","hide")},500)}}})}),define("hyperchannel/routes/space/channel",["exports","hyperchannel/routes/space/base_channel"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({createChannelOrUserChannel:function(e,t){return this.get("coms").createChannel(e,"#"+t)}})}),define("hyperchannel/routes/space/user_channel",["exports","hyperchannel/routes/space/base_channel"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({createChannelOrUserChannel:function(e,t){return this.get("coms").createUserChannel(e,t)}})}),define("hyperchannel/services/-gestures",["exports","ember","hyperchannel/config/environment","ember-gestures/services/-gestures"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0});var s=t.default.assign||t.default.merge,r=s({},{useCapture:!1});r=s(r,n.default.gestures),e.default=a.default.extend({useCapture:r.useCapture})}),define("hyperchannel/services/ajax",["exports","ember-ajax/services/ajax"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/services/coms",["exports","ember","hyperchannel/models/space","hyperchannel/models/channel","hyperchannel/models/user_channel","hyperchannel/models/message","hyperchannel/config/environment","moment","ember-local-storage"],function(e,t,n,a,s,r,o,l,i){Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=t.default.Service,d=t.default.inject.service,p=t.default.RSVP,f=t.default.isEmpty,h=t.default.isPresent,m=t.default.Logger,g=t.default.get;e.default=u.extend({ajax:d(),logger:d(),userSettings:(0,i.storageFor)("user-settings"),storage:d("remotestorage"),irc:d("sockethub-irc"),xmpp:d("sockethub-xmpp"),spaces:null,setupListeners:function(){this.sockethub.socket.on("completed",this.handleSockethubCompleted.bind(this)),this.sockethub.socket.on("message",this.handleSockethubMessage.bind(this)),this.sockethub.socket.on("failure",this.handleSockethubFailure.bind(this))},instantiateSpacesAndChannels:function(){var e=this;this.set("spaces",[]);var t=this.get("storage.rs");return new p.Promise(function(a,s){t.kosmos.spaces.getAll().then(function(t){f(Object.keys(t))?(m.debug("No space data found in RS. Adding default space..."),e.get("storage").addDefaultSpace().then(function(t){e.connectAndAddSpace(t.space),e.instantiateChannels(t.space,t.channels),a()})):(Object.keys(t).forEach(function(a){var s=n.default.create({id:a,name:t[a].name,protocol:t[a].protocol,server:t[a].server});e.connectAndAddSpace(s),e.instantiateChannels(s,t[a].channels)}),a())},function(t){e.log("error","couldn'd load spaces from RS",t),s()})})},connectServer:function(e){this.getServiceForSockethubPlatform(e.get("protocol")).connect(e)},connectAndAddSpace:function(e){this.connectServer(e),this.get("spaces").pushObject(e)},joinChannel:function(e,t,n){this.getServiceForSockethubPlatform(e.get("protocol")).join(e,t,n)},transferMessage:function(e,t,n){var a={"@id":t.get("sockethubChannelId"),"@type":t.get("isUserChannel")?"person":"room",displayName:t.get("name")};this.getServiceForSockethubPlatform(e.get("protocol")).transferMessage(e,a,n)},transferMeMessage:function(e,t,n){switch(e.get("protocol")){case"IRC":this.get("irc").transferMeMessage(e,t,n)}},leaveChannel:function(e,t){switch(e.get("protocol")){case"IRC":this.get("irc").leave(e,t)}},changeTopic:function(e,t,n){switch(e.get("protocol")){case"IRC":this.get("irc").changeTopic(e,t,n)}},updateChannelUserList:function(e){var t=this.getChannelById(e.actor["@id"]);t&&Array.isArray(e.object.members)&&t.set("userList",e.object.members.sort())},addUserToChannelUserList:function(e){var t=this.getChannelById(e.target["@id"]);t&&t.addUser(e.actor.displayName)},removeUserFromChannelUserList:function(e){var t=this.getChannelById(e.target["@id"]);t&&t.removeUser(e.actor.displayName)},getChannelById:function(e){var n=e.match(/(?:irc:\/\/)?(?:.+@)?(.+?)(?:\/|$)/)[1],a=this.get("spaces").findBy("server.hostname",n);if(f(a))return void t.default.Logger.warn("Could not find space by hostname",n);var s=a.get("channels").findBy("sockethubChannelId",e);return f(s)?void t.default.Logger.warn("Could not find channel by sockethubChannelId",e):s},getChannel:function(e,n){var a=this.get("spaces").findBy("sockethubPersonId",e);if(f(a))return void t.default.Logger.warn("Could not find space by sockethubPersonId",e);var s=a.get("channels").findBy("sockethubChannelId",n);return f(s)?void t.default.Logger.warn("Could not find channel by sockethubChannelId",n):s},updateUsername:function(e){if("object"===c(e.actor)){var t=e.actor["@id"],n=this.get("spaces").findBy("sockethubPersonId",t);h(n)&&n.updateUsername(e.target.displayName)}},updateChannelTopic:function(e){var n=void 0;"object"===c(e.target)?n=e.target["@id"].match(/irc:\/\/(.+)\//)[1]:"string"==typeof e.actor&&(n=e.actor.match(/irc:\/\/.+\@(.+)/)[1]);var a=this.get("spaces").findBy("server.hostname",n);if(!f(a)){var s=a.get("channels").findBy("sockethubChannelId",e.target["@id"]);f(s)&&(t.default.Logger.warn("No channel for update topic message found. Creating it.",e),s=this.createChannel(a,e.target.displayName));var r=s.get("topic"),o=e.object.topic;s.set("topic",o),h(r)&&o!==r&&!s.get("visible")&&Notification.requestPermission(function(){new Notification(s.name,{body:"New Topic: "+o})})}},instantiateChannels:function(e,t){var n=this;t.forEach(function(t){n.createChannel(e,t)})},createChannel:function(e,t){var n=this.getServiceForSockethubPlatform(e.get("protocol")),s=a.default.create({space:e,name:t,sockethubChannelId:n.generateChannelId(e,t)});return this.joinChannel(e,s,"room"),e.get("channels").pushObject(s),this.get("storage").saveSpace(e),s.get("isLogged")&&this.loadLastMessages(e,s,l.default.utc(),2).catch(function(){}),s},loadLastMessages:function(e,t,n){var a=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:14,r=void 0;return r=t.get("searchedPreviousLogsUntilDate")?(0,l.default)(t.get("searchedPreviousLogsUntilDate")).subtract(s,"days"):l.default.utc().subtract(s,"days"),n.isBefore(r,"day")?void t.set("searchedPreviousLogsUntilDate",n):this.loadArchiveMessages(e,t,n).catch(function(){return a.loadLastMessages(e,t,n.subtract(1,"day"))})},loadArchiveMessages:function(e,t,n){var a=this,s=o.default.publicLogsUrl+"/"+e.get("name").toLowerCase()+"/channels/"+t.get("slug")+"/";return s+=n.format("YYYY/MM/DD"),this.get("ajax").request(s,{type:"GET",dataType:"json"}).then(function(e){g(e,"today.messages").forEach(function(e){a.log("chat_message",e);var n=r.default.create({type:"message-chat",date:new Date(e.timestamp),nickname:e.from,content:e.text});t.addMessage(n)});var n=g(e,"today.previous");t.set("searchedPreviousLogsUntilDate",l.default.utc(n.replace(/\//g,"-")))}).catch(function(e){throw a.log("ajax-error","couldn't load archive document",e),e})},createUserChannel:function(e,t){var n=this.getServiceForSockethubPlatform(e.get("protocol")),a=s.default.create({space:e,name:t,sockethubChannelId:n.generateChannelId(e,t)});return this.joinChannel(e,a,"person"),e.get("channels").pushObject(a),a},removeChannel:function(e,t){var n=e.get("channels").findBy("name",t);return this.leaveChannel(e,n),e.get("channels").removeObject(n),this.get("storage").saveSpace(e),n},getServiceForSockethubPlatform:function(e){return this.get(e.dasherize())},handleSockethubCompleted:function(e){switch(this.log(e.context+"_completed",e),e["@type"]){case"join":var t=this.get("spaces").findBy("sockethubPersonId",e.actor["@id"]);f(t)&&(t=this.get("spaces").find(function(t){return t.get("previousSockethubPersonIds").includes(e.actor["@id"])})),f(t)?m.warn("Could not find space for join message",e):this.get(e.context).handleJoinCompleted(t,e)}},handleSockethubMessage:function(e){switch(this.log(e.context+"_message","SH message",e),e["@type"]){case"observe":"attendance"===e.object["@type"]&&this.updateChannelUserList(e);break;case"join":this.handleChannelJoin(e);break;case"leave":this.removeUserFromChannelUserList(e);break;case"send":switch(e.object["@type"]){case"message":case"me":this.getServiceForSockethubPlatform(e.context).addMessageToChannel(e)}break;case"update":switch(e.object["@type"]){case"topic":this.updateChannelTopic(e);break;case"address":this.updateUsername(e);break;case"presence":this.get("xmpp").handlePresenceUpdate(e);break;case"error":m.warn("Got error update message",e.actor["@id"],e.object.content)}}},handleChannelJoin:function(e){if(e.object["@type"]&&"error"===e.object["@type"]){var t=this.getChannel(e.target["@id"],e.actor["@id"]);h(t)?t.set("connected",!1):m.warn("Could not find channel for error message",e)}else this.addUserToChannelUserList(e)},handleSockethubFailure:function(e){this.log("sh_failure",e)},log:function(){var e;(e=this.get("logger")).log.apply(e,arguments)}})}),define("hyperchannel/services/ember-elsewhere",["exports","ember-elsewhere/services/ember-elsewhere"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/services/liquid-fire-transitions",["exports","liquid-fire/transition-map"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("hyperchannel/services/logger",["exports","ember"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0});var n=t.default.Service;e.default=n.extend({enabled:!0,allowedTypes:["connection","error","join","leave","message","irc_message","xmpp_message","send","xmpp_completed","irc_completed","sh_completed","sh_failure","irc","xmpp","ajax-error","chat_message"],activeTypes:["connection","error","join","leave","send","sh_completed","xmpp_completed","irc_completed","sh_failure","irc","xmpp","message","irc_message","xmpp_message"],log:function(e){if(!this.get("allowedTypes").includes(e))throw new Error('You specified a unknown type: "'+e+'".');if(this.get("activeTypes").includes(e)&&this.get("enabled")){var n=Array.prototype.slice.call(arguments);n[0]="["+n[0]+"]",t.default.Logger.debug.apply(null,n)}},add:function(e){this.get("activeTypes").addObject(e)},remove:function(e){this.get("activeTypes").removeObject(e)},disable:function(){this.set("enabled",!1)},enable:function(){this.set("enabled",!0)}})}),define("hyperchannel/services/moment",["exports","ember","hyperchannel/config/environment","ember-moment/services/moment"],function(e,t,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a.default.extend({defaultFormat:t.default.get(n.default,"moment.outputFormat")})}),define("hyperchannel/services/remotestorage",["exports","ember","hyperchannel/models/space","npm:remotestoragejs","npm:remotestorage-module-kosmos"],function(e,t,n,a,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.Service.extend({rsInstance:null,rs:function(){if(this.get("rsInstance"))return this.get("rsInstance");var e=new a.default({modules:[s.default.default]});return e.access.claim("kosmos","rw"),e.caching.enable("/kosmos/"),this.set("rsInstance",e),e}.property("rsInstance"),addDefaultSpace:function(){var e=window.prompt("Choose a nickname"),a={id:"freenode",name:"Freenode",protocol:"IRC",server:{hostname:"irc.freenode.net",secure:!0,port:7e3,nickname:e},channels:["#hackerbeach","#kosmos","#kosmos-dev","#kosmos-random","#sockethub"]};return this.get("rs").kosmos.spaces.store(a).then(function(){t.default.Logger.debug("[remotestorage]","created/stored default space");var e=a.channels;return delete a.channels,{space:n.default.create(a),channels:e}})},saveSpace:function(e){return this.get("rs").kosmos.spaces.store(e.serialize()).then(function(){return t.default.Logger.debug("[remotestorage]","saved space "+e.get("name")+" in RS")})},removeSpace:function(e){return this.get("rs").kosmos.spaces.remove(e.get("id")).then(function(){return t.default.Logger.debug("[remotestorage]","removed space "+e.get("name")+" from RS")})}})}),define("hyperchannel/services/sockethub-irc",["exports","ember","hyperchannel/utils/channel-message-from-sockethub-object"],function(e,t,n){
function a(e,n){var a={context:"irc",actor:e.get("sockethubPersonId")};return t.default.$.extend({},a,n)}function s(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"message";return a(e,{"@type":"send",target:t,object:{"@type":s,content:n}})}Object.defineProperty(e,"__esModule",{value:!0});var r=t.default.inject.service,o=t.default.isEmpty,l=t.default.Logger;e.default=t.default.Service.extend({logger:r(),coms:r(),connect:function(e){var t={"@id":e.get("sockethubPersonId"),"@type":"person",displayName:e.get("server.nickname")};l.debug("actor object",t),this.sockethub.ActivityStreams.Object.create(t);var n=a(e,{object:{"@type":"credentials",nick:e.get("server.nickname"),server:e.get("server.hostname"),port:parseInt(e.get("server.port"),10),secure:e.get("server.secure")}});this.log("irc","connecting to IRC network",n),this.sockethub.socket.emit("credentials",n)},handleJoinCompleted:function(e,t){var n=e.get("channels").findBy("sockethubChannelId",t.target["@id"]);o(n)||(n.set("connected",!0),this.observeChannel(e,n))},join:function(e,t,n){switch(n){case"room":this.sockethub.ActivityStreams.Object.create({"@type":n,"@id":t.get("sockethubChannelId"),displayName:t.get("name")});var s=a(e,{"@type":"join",target:t.get("sockethubChannelId"),object:{}});this.log("irc","joining channel",s),this.sockethub.socket.emit("message",s);break;case"person":t.set("connected",!0)}},transferMessage:function(e,t,n){var a=s(e,t,n);this.log("send","sending message job",a),this.sockethub.socket.emit("message",a)},transferMeMessage:function(e,t,n){var a=s(e,t,n,"me");this.log("send","sending message job",a),this.sockethub.socket.emit("message",a)},addMessageToChannel:function(e){var t=e.actor["@id"].match(/irc:\/\/.+\@(.+)/)[1],a=this.get("coms.spaces").findBy("server.hostname",t);if(o(a))return void l.warn("Could not find space for message",e);var s=this.getChannelForMessage(a,e),r=(0,n.default)(e);r.get("nickname")!==a.get("userNickname")&&s.addMessage(r)},leave:function(e,t){if(!t.get("isUserChannel")){this.sockethub.ActivityStreams.Object.create({"@type":"room","@id":t.get("sockethubChannelId"),displayName:t.get("name")});var n=a(e,{"@type":"leave",target:t.get("sockethubChannelId"),object:{}});this.log("leave","leaving channel",n),this.sockethub.socket.emit("message",n)}},changeTopic:function(e,t,n){var s=a(e,{"@type":"update",target:t.get("sockethubChannelId"),object:{"@type":"topic",topic:n}});this.sockethub.socket.emit("message",s)},observeChannel:function(e,t){var n=a(e,{"@type":"observe",target:t.get("sockethubChannelId"),object:{"@type":"attendance"}});this.log("irc","asking for attendance list",n),this.sockethub.socket.emit("message",n)},generateChannelId:function(e,t){return"irc://"+e.get("server.hostname")+"/"+t},getChannelForMessage:function(e,t){var n=void 0,a=void 0;return e.get("userNickname")===t.target.displayName?(n=t.actor.displayName||t.actor["@id"],a=e.get("channels").findBy("name",n),a||(a=this.get("coms").createUserChannel(e,n))):(n=t.target.displayName,a=e.get("channels").findBy("name",n),a||(a=this.get("coms").createChannel(e,n))),a},log:function(){var e;(e=this.get("logger")).log.apply(e,arguments)}})}),define("hyperchannel/services/sockethub-xmpp",["exports","ember","hyperchannel/utils/channel-message-from-sockethub-object"],function(e,t,n){function a(e,n){var a={context:"xmpp",actor:e.get("sockethubPersonId")};return t.default.$.extend({},a,n)}function s(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"message";return a(e,{"@type":"send",target:t,object:{"@type":s,content:n}})}Object.defineProperty(e,"__esModule",{value:!0});var r=t.default.inject.service,o=t.default.isEmpty,l=t.default.Logger;e.default=t.default.Service.extend({logger:r(),coms:r(),connect:function(e){var t=e.get("sockethubPersonId");this.sockethub.ActivityStreams.Object.create({"@id":t,"@type":"person",displayName:e.get("server.nickname")});var n={actor:t,context:"xmpp",object:{"@type":"credentials",username:e.get("server.username"),password:e.get("server.password"),server:e.get("server.hostname"),port:parseInt(e.get("server.port"),10),resource:"hyperchannel"}},a={"@type":"connect",context:"xmpp",actor:t};this.log("xmpp","connecting to XMPP server..."),this.sockethub.socket.emit("credentials",n),this.sockethub.socket.emit("message",a)},handleJoinCompleted:function(e,t){var n=t.target["@id"].split("/")[0],a=e.get("channels").findBy("sockethubChannelId",n);o(a)?l.warn("Could not find channel for join message",t):a.set("connected",!0)},join:function(e,t,n){this.sockethub.ActivityStreams.Object.create({"@type":n,"@id":t.get("sockethubChannelId"),displayName:t.get("name")});var s=a(e,{"@type":"join",actor:{"@type":"person","@id":e.get("sockethubPersonId"),displayName:e.get("server.nickname")},target:{"@id":t.get("sockethubChannelId"),"@type":n}});this.log("xmpp","joining channel",s),this.sockethub.socket.emit("message",s)},transferMessage:function(e,t,n){var a=s(e,t,n);this.log("send","sending message job",a),this.sockethub.socket.emit("message",a)},handlePresenceUpdate:function(e){if("room"===e.target["@type"]){var t=e.target["@id"],n=this.get("coms.spaces").find(function(e){return e.get("sockethubChannelIds").includes(t)}),a=n.get("channels").findBy("sockethubChannelId",t);a&&("offline"===e.object.presence?a.removeUser(e.actor.displayName):a.addUser(e.actor.displayName))}else l.debug("Presence update:",e.actor["@id"],e.object.presence,e.object.status)},addMessageToChannel:function(e){if(!o(e.object.content)){var t=this.getSpaceForMessage(e);if(o(t))return void l.warn("Could not find space for message",e);var a=this.getChannelForMessage(t,e),s=(0,n.default)(e);s.get("nickname")!==t.get("userNickname")&&a.addMessage(s)}},generateChannelId:function(e,t){return t},getSpaceForMessage:function(e){var t=e.target["@id"];return"room"===e.target["@type"]?this.get("coms.spaces").find(function(e){return e.get("sockethubChannelIds").includes(t)}):this.get("coms.spaces").findBy("sockethubPersonId",t)},getChannelForMessage:function(e,t){var n=t.target["@id"],a=void 0;return"room"===t.target["@type"]?(a=e.get("channels").findBy("sockethubChannelId",n),a||(a=this.get("coms").createChannel(e,n))):(a=e.get("channels").findBy("sockethubChannelId",t.actor["@id"]),a||(a=this.get("coms").createUserChannel(e,t.actor["@id"]))),a},log:function(){var e;(e=this.get("logger")).log.apply(e,arguments)}})}),define("hyperchannel/storages/user-settings",["exports","ember-local-storage/local/object"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0});var n=t.default.extend();n.reopenClass({initialState:function(){return{nickname:null,currentSpace:"freenode",currentChannel:"kosmos"}}}),e.default=n}),define("hyperchannel/templates/application",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"1H0X/hn5",block:'{"statements":[[6,["app-container"],null,[["showGlobalMenu","showChannelMenu"],[[28,["showGlobalMenu"]],[28,["showChannelMenu"]]]],{"statements":[[0,"  "],[11,"div",[]],[15,"id","global"],[13],[0,"\\n    "],[11,"header",[]],[15,"id","sitename"],[13],[0,"\\n      "],[11,"h1",[]],[13],[0,"Kosmos"],[14],[0,"\\n    "],[14],[0,"\\n\\n    "],[11,"div",[]],[15,"class","main"],[13],[0,"\\n      "],[11,"nav",[]],[15,"id","channels"],[13],[0,"\\n        "],[1,[33,["channel-nav"],null,[["spaces","joinChannel"],[[28,["spaces"]],[33,["route-action"],["openNewChannel"],null]]]],false],[0,"\\n      "],[14],[0,"\\n    "],[14],[0,"\\n  "],[14],[0,"\\n\\n  "],[1,[26,["outlet"]],false],[0,"\\n"]],"locals":[]},null],[0,"\\n"],[1,[26,["modal-target"]],false],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"hyperchannel/templates/application.hbs"}})}),define("hyperchannel/templates/index",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"QwPHqcaX",block:'{"statements":[[11,"p",[]],[13],[0,"[index.hbs]"],[14],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"hyperchannel/templates/index.hbs"}})}),define("hyperchannel/templates/settings",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"ZTtH8R0L",block:'{"statements":[[11,"section",[]],[15,"id","settings"],[13],[0,"\\n  "],[11,"h2",[]],[13],[0,"Settings"],[14],[0,"\\n\\n  "],[11,"div",[]],[15,"class","content"],[13],[0,"\\n    "],[11,"h3",[]],[13],[0,"Spaces"],[14],[0,"\\n\\n"],[6,["each"],[[28,["model","spaces"]]],null,{"statements":[[0,"      "],[11,"h3",[]],[13],[1,[28,["space","name"]],false],[14],[0,"\\n      "],[11,"button",[]],[15,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[5,["action"],[[28,[null]],"removeSpace",[28,["space"]]]],[13],[0,"delete"],[14],[0,"\\n      "],[11,"hr",[]],[13],[14],[0,"\\n"]],"locals":["space"]},null],[0,"\\n    "],[11,"h3",[]],[13],[0,"Presets"],[14],[0,"\\n\\n"],[6,["each"],[[28,["model","spacePresets"]]],null,{"statements":[[0,"      "],[11,"h3",[]],[13],[1,[28,["spacePreset","name"]],false],[14],[0,"\\n      "],[11,"button",[]],[15,"style","touch-action: manipulation; -ms-touch-action: manipulation; cursor: pointer;"],[5,["action"],[[28,[null]],"addSpaceFromPreset",[28,["spacePreset"]]]],[13],[0,"add"],[14],[0,"\\n      "],[11,"hr",[]],[13],[14],[0,"\\n"]],"locals":["spacePreset"]},null],[0,"\\n    "],[11,"h3",[]],[13],[0,"Add new space"],[14],[0,"\\n    "],[11,"form",[]],[15,"name","add-space"],[5,["action"],[[28,[null]],"addSpace"],[["on"],["submit"]]],[13],[0,"\\n      "],[11,"p",[]],[13],[0,"\\n        "],[1,[33,["input"],null,[["value","required","placeholder"],[[28,["newSpace","name"]],"required","Freenode"]]],false],[0,"\\n      "],[14],[0,"\\n      "],[11,"p",[]],[13],[0,"\\n        "],[1,[33,["input"],null,[["value","required","placeholder"],[[28,["newSpace","server","hostname"]],"required","irc.servername.org"]]],false],[0,"\\n      "],[14],[0,"\\n      "],[11,"p",[]],[13],[0,"\\n        "],[1,[33,["input"],null,[["value","required","placeholder"],[[28,["newSpace","server","port"]],"required","6667"]]],false],[0,"\\n      "],[14],[0,"\\n      "],[11,"p",[]],[13],[0,"\\n        "],[1,[33,["input"],null,[["type","checked","id"],["checkbox",[28,["newSpace","server","secure"]],"tls-enabled"]]],false],[0,"\\n        "],[11,"label",[]],[15,"for","tls-enabled"],[13],[0,"Secure (TLS)"],[14],[0,"\\n      "],[14],[0,"\\n      "],[11,"p",[]],[13],[0,"\\n        "],[1,[33,["input"],null,[["value","placeholder"],[[28,["newSpace","server","username"]],"username"]]],false],[0,"\\n      "],[14],[0,"\\n      "],[11,"p",[]],[13],[0,"\\n        "],[1,[33,["input"],null,[["value","placeholder"],[[28,["newSpace","server","password"]],"password"]]],false],[0,"\\n      "],[14],[0,"\\n      "],[11,"p",[]],[13],[0,"\\n        "],[1,[33,["input"],null,[["value","required","placeholder"],[[28,["newSpace","server","nickname"]],"required","nickname"]]],false],[0,"\\n      "],[14],[0,"\\n      "],[11,"p",[]],[13],[0,"\\n        "],[11,"input",[]],[15,"type","submit"],[15,"value","Save"],[13],[14],[0,"\\n      "],[14],[0,"\\n    "],[14],[0,"\\n\\n  "],[14],[0,"\\n"],[14],[0,"\\n\\n"],[6,["if"],[[28,["showSpaceSettingModal"]]],null,{"statements":[[0,"  "],[1,[33,["to-elsewhere"],null,[["named","send"],["modal",[33,["hash"],null,[["body","onOutsideClick"],[[33,["component"],["space-setting-modal"],[["settings","onSave","onCancel"],[[28,["selectedSpacePreset"]],[33,["action"],[[28,[null]],"saveSpace"],null],[33,["action"],[[28,[null]],[33,["mut"],[[28,["selectedSpacePreset"]]],null],null],null]]]],[33,["action"],[[28,[null]],[33,["mut"],[[28,["selectedSpacePreset"]]],null],null],null]]]]]]],false],[0,"\\n"]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"hyperchannel/templates/settings.hbs"}})}),define("hyperchannel/templates/space/channel",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"JaFksbt/",block:'{"statements":[[1,[33,["channel-container"],null,[["channel","newMessage","onMessage","onCommand","menu"],[[28,["model"]],[28,["newMessage"]],[33,["action"],[[28,[null]],"sendMessage"],null],[33,["action"],[[28,[null]],"executeCommand"],null],[33,["route-action"],["menu"],null]]]],false],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"hyperchannel/templates/space/channel.hbs"}})}),define("hyperchannel/templates/space/user_channel",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"OYiIDheE",block:'{"statements":[[1,[33,["channel-container"],null,[["channel","newMessage","onMessage","onCommand"],[[28,["model"]],[28,["newMessage"]],[33,["action"],[[28,[null]],"sendMessage"],null],[33,["action"],[[28,[null]],"executeCommand"],null]]]],false],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"hyperchannel/templates/space/user_channel.hbs"}})}),define("hyperchannel/transitions/cross-fade",["exports","liquid-fire/transitions/cross-fade"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/transitions/default",["exports","liquid-fire/transitions/default"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/transitions/explode",["exports","liquid-fire/transitions/explode"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/transitions/fade",["exports","liquid-fire/transitions/fade"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/transitions/flex-grow",["exports","liquid-fire/transitions/flex-grow"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/transitions/fly-to",["exports","liquid-fire/transitions/fly-to"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/transitions/move-over",["exports","liquid-fire/transitions/move-over"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/transitions/scale",["exports","liquid-fire/transitions/scale"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/transitions/scroll-then",["exports","liquid-fire/transitions/scroll-then"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/transitions/to-down",["exports","liquid-fire/transitions/to-down"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/transitions/to-left",["exports","liquid-fire/transitions/to-left"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/transitions/to-right",["exports","liquid-fire/transitions/to-right"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/transitions/to-up",["exports","liquid-fire/transitions/to-up"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/transitions/wait",["exports","liquid-fire/transitions/wait"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hyperchannel/utils/channel-message-from-sockethub-object",["exports","hyperchannel/models/message"],function(e,t){function n(e){var n=t.default.create({type:"me"===e.object["@type"]?"message-chat-me":"message-chat",date:new Date(e.published),nickname:e.actor.displayName||e.actor["@id"],content:e.object.content});return n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n}),define("hyperchannel/config/environment",["ember"],function(e){var t="hyperchannel";try{var n=t+"/config/environment",a=document.querySelector('meta[name="'+n+'"]').getAttribute("content"),s=JSON.parse(unescape(a)),r={default:s};return Object.defineProperty(r,"__esModule",{value:!0}),r}catch(e){throw new Error('Could not read config from meta tag with name "'+n+'".')}}),runningTests||require("hyperchannel/app").default.create({name:"hyperchannel",version:"0.2.0+192410c7"});
//# sourceMappingURL=hyperchannel.map